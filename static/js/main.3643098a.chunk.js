(this["webpackJsonpepub-manga-creator-2"]=this["webpackJsonpepub-manga-creator-2"]||[]).push([[0],{30:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(15),c=n.n(o),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),o(e),c(e)}))},s=n(0);document.body.insertAdjacentHTML("afterbegin",'<svg aria-hidden="true" style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<defs>\n<symbol id="icon-price-tag" viewBox="0 0 20 20"><path d="M19.388 0.405c-0.111-0.314-0.454-0.48-0.769-0.371s-0.481 0.455-0.372 0.77c0.929 2.67-0.915 4.664-2.321 5.732l-0.568-0.814c-0.191-0.273-0.618-0.5-0.95-0.504l-3.188 0.014c-0.332-0.006-0.825 0.146-1.097 0.338l-9.394 6.587c-0.455 0.32-0.565 0.947-0.247 1.404l4.269 6.108c0.32 0.455 0.831 0.4 1.287 0.082l9.394-6.588c0.27-0.191 0.582-0.603 0.692-0.918l0.998-3.145c0.11-0.314 0.043-0.793-0.148-1.066l-0.346-0.496c1.888-1.447 3.848-4.004 2.76-7.133zM15.017 9.763c-0.727 0.51-1.731 0.332-2.24-0.396-0.511-0.73-0.333-1.734 0.395-2.246 0.578-0.405 1.328-0.376 1.868 0.017-0.272 0.164-0.459 0.26-0.494 0.275-0.301 0.143-0.43 0.504-0.288 0.805 0.104 0.219 0.321 0.348 0.547 0.348 0.086 0 0.174-0.020 0.257-0.059 0.194-0.092 0.402-0.201 0.619-0.33 0.097 0.594-0.139 1.217-0.664 1.586z"></path></symbol>\n<symbol id="icon-heart" viewBox="0 0 20 20"><path d="M17.19 4.155c-1.672-1.534-4.383-1.534-6.055 0l-1.135 1.042-1.136-1.042c-1.672-1.534-4.382-1.534-6.054 0-1.881 1.727-1.881 4.52 0 6.246l7.19 6.599 7.19-6.599c1.88-1.726 1.88-4.52 0-6.246z"></path></symbol>\n<symbol id="icon-star" viewBox="0 0 20 20"><path d="M10 1.3l2.388 6.722h6.412l-5.232 3.948 1.871 6.928-5.439-4.154-5.438 4.154 1.87-6.928-5.233-3.948h6.412l2.389-6.722z"></path></symbol>\n<symbol id="icon-save" viewBox="0 0 20 20"><path d="M15.173 2h-11.173c-1.101 0-2 0.9-2 2v12c0 1.1 0.899 2 2 2h12c1.101 0 2-0.9 2-2v-10.873l-2.827-3.127zM14 8c0 0.549-0.45 1-1 1h-6c-0.55 0-1-0.451-1-1v-5h8v5zM13 4h-2v4h2v-4z"></path></symbol>\n<symbol id="icon-retweet" viewBox="0 0 20 20"><path d="M5 13v-5h2l-3.5-4-3.5 4h2v6c0 1.104 0.895 2 2 2h9.482l-2.638-3h-5.844zM9.156 7l-2.638-3h9.482c1.104 0 2 0.897 2 2v6h2l-3.5 4-3.5-4h2v-5h-5.844z"></path></symbol>\n<symbol id="icon-notification" viewBox="0 0 20 20"><path d="M15 8.38v8.62h-12v-12h8.62c-0.073-0.322-0.12-0.655-0.12-1s0.047-0.678 0.12-1h-8.62c-1.102 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12c1.1 0 2-0.9 2-2v-8.62c-0.322 0.073-0.655 0.12-1 0.12s-0.678-0.047-1-0.12zM16 1c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3z"></path></symbol>\n<symbol id="icon-chevron-down" viewBox="0 0 20 20"><path d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"></path></symbol>\n<symbol id="icon-chevron-left" viewBox="0 0 20 20"><path d="M12.452 4.516c0.446 0.436 0.481 1.043 0 1.576l-3.747 3.908 3.747 3.908c0.481 0.533 0.446 1.141 0 1.574-0.445 0.436-1.197 0.408-1.615 0-0.418-0.406-4.502-4.695-4.502-4.695-0.223-0.217-0.335-0.502-0.335-0.787s0.112-0.57 0.335-0.789c0 0 4.084-4.287 4.502-4.695s1.17-0.436 1.615 0z"></path></symbol>\n<symbol id="icon-chevron-right" viewBox="0 0 20 20"><path d="M9.163 4.516c0.418 0.408 4.502 4.695 4.502 4.695 0.223 0.219 0.335 0.504 0.335 0.789s-0.112 0.57-0.335 0.787c0 0-4.084 4.289-4.502 4.695-0.418 0.408-1.17 0.436-1.615 0-0.446-0.434-0.481-1.041 0-1.574l3.747-3.908-3.747-3.908c-0.481-0.533-0.446-1.141 0-1.576s1.197-0.409 1.615 0z"></path></symbol>\n<symbol id="icon-chevron-up" viewBox="0 0 20 20"><path d="M15.484 12.452c-0.436 0.446-1.043 0.481-1.576 0l-3.908-3.747-3.908 3.747c-0.533 0.481-1.141 0.446-1.574 0-0.436-0.445-0.408-1.197 0-1.615 0.406-0.418 4.695-4.502 4.695-4.502 0.217-0.223 0.502-0.335 0.787-0.335s0.57 0.112 0.789 0.335c0 0 4.287 4.084 4.695 4.502s0.436 1.17 0 1.615z"></path></symbol>\n<symbol id="icon-minus" viewBox="0 0 20 20"><path d="M16 10c0 0.553-0.048 1-0.601 1h-10.798c-0.552 0-0.601-0.447-0.601-1s0.049-1 0.601-1h10.799c0.552 0 0.6 0.447 0.6 1z"></path></symbol>\n<symbol id="icon-plus" viewBox="0 0 20 20"><path d="M16 10c0 0.553-0.048 1-0.601 1h-4.399v4.399c0 0.552-0.447 0.601-1 0.601s-1-0.049-1-0.601v-4.399h-4.399c-0.552 0-0.601-0.447-0.601-1s0.049-1 0.601-1h4.399v-4.399c0-0.553 0.447-0.601 1-0.601s1 0.048 1 0.601v4.399h4.399c0.553 0 0.601 0.447 0.601 1z"></path></symbol>\n<symbol id="icon-tools" viewBox="0 0 20 20"><path d="M3.135 6.89c0.933-0.725 1.707-0.225 2.74 0.971 0.116 0.135 0.272-0.023 0.361-0.1 0.088-0.078 1.451-1.305 1.518-1.361 0.066-0.059 0.146-0.169 0.041-0.292-0.107-0.123-0.494-0.625-0.743-0.951-1.808-2.365 4.946-3.969 3.909-3.994-0.528-0.014-2.646-0.039-2.963-0.004-1.283 0.135-2.894 1.334-3.705 1.893-1.061 0.726-1.457 1.152-1.522 1.211-0.3 0.262-0.048 0.867-0.592 1.344-0.575 0.503-0.934 0.122-1.267 0.414-0.165 0.146-0.627 0.492-0.759 0.607-0.133 0.117-0.157 0.314-0.021 0.471 0 0 1.264 1.396 1.37 1.52 0.105 0.122 0.391 0.228 0.567 0.071 0.177-0.156 0.632-0.553 0.708-0.623 0.078-0.066-0.050-0.861 0.358-1.177zM8.843 7.407c-0.12-0.139-0.269-0.143-0.397-0.029l-1.434 1.252c-0.113 0.1-0.129 0.283-0.027 0.4l8.294 9.439c0.194 0.223 0.53 0.246 0.751 0.053l0.97-0.813c0.222-0.195 0.245-0.533 0.052-0.758l-8.209-9.544zM19.902 3.39c-0.074-0.494-0.33-0.391-0.463-0.182-0.133 0.211-0.721 1.102-0.963 1.506-0.24 0.4-0.832 1.191-1.934 0.41-1.148-0.811-0.749-1.377-0.549-1.758 0.201-0.383 0.818-1.457 0.907-1.59 0.089-0.135-0.015-0.527-0.371-0.363s-2.523 1.025-2.823 2.26c-0.307 1.256 0.257 2.379-0.85 3.494l-1.343 1.4 1.349 1.566 1.654-1.57c0.394-0.396 1.236-0.781 1.998-0.607 1.633 0.369 2.524-0.244 3.061-1.258 0.482-0.906 0.402-2.814 0.327-3.308zM2.739 17.053c-0.208 0.209-0.208 0.549 0 0.758l0.951 0.93c0.208 0.209 0.538 0.121 0.746-0.088l4.907-4.824-1.503-1.714-5.101 4.938z"></path></symbol>\n<symbol id="icon-bookmark" viewBox="0 0 20 20"><path d="M14 2v17l-4-4-4 4v-17c0-0.553 0.585-1.020 1-1h6c0.689-0.020 1 0.447 1 1z"></path></symbol>\n<symbol id="icon-bookmarks" viewBox="0 0 20 20"><path d="M15 0h-4c-0.553 0-1 0.447-1 1l0.023 0.222c1.102 0 2 0.897 2 2v11.359l0.977-1.181 3 3.6v-16c0-0.553-0.447-1-1-1zM9.023 3h-4.023c-0.553 0-1 0.447-1 1v16l3-3.6 3 3.6v-16c0-0.553-0.424-1-0.977-1z"></path></symbol>\n<symbol id="icon-document" viewBox="0 0 20 20"><path d="M16 1h-12c-0.553 0-1 0.447-1 1v16c0 0.552 0.447 1 1 1h12c0.553 0 1-0.448 1-1v-16c0-0.552-0.447-1-1-1zM15 17h-10v-14h10v14z"></path></symbol>\n<symbol id="icon-upload" viewBox="0 0 20 20"><path d="M8 12h4v-6h3l-5-5-5 5h3v6zM19.338 13.532c-0.21-0.224-1.611-1.723-2.011-2.114-0.265-0.259-0.644-0.418-1.042-0.418h-1.757l3.064 2.994h-3.544c-0.102 0-0.194 0.052-0.24 0.133l-0.816 1.873h-5.984l-0.816-1.873c-0.046-0.081-0.139-0.133-0.24-0.133h-3.544l3.063-2.994h-1.756c-0.397 0-0.776 0.159-1.042 0.418-0.4 0.392-1.801 1.891-2.011 2.114-0.489 0.521-0.758 0.936-0.63 1.449l0.561 3.074c0.128 0.514 0.691 0.936 1.252 0.936h16.312c0.561 0 1.124-0.422 1.252-0.936l0.561-3.074c0.126-0.513-0.142-0.928-0.632-1.449z"></path></symbol>\n<symbol id="icon-cross" viewBox="0 0 20 20"><path d="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"></path></symbol>\n<symbol id="icon-list" viewBox="0 0 20 20"><path d="M14.4 9h-5.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h5.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM16.4 14h-7.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h7.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM8.6 6h7.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1h-7.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1zM5.4 9h-1.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h1.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM5.4 14h-1.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h1.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM5.4 4h-1.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h1.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1z"></path></symbol>\n<symbol id="icon-menu" viewBox="0 0 20 20"><path d="M16.4 9h-12.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h12.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM16.4 13h-12.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h12.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM3.6 7h12.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1h-12.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1z"></path></symbol>\n<symbol id="icon-ruler" viewBox="0 0 20 20"><path d="M14.249 0.438l-13.811 13.813c-0.584 0.584-0.584 1.538 0.002 2.124l3.185 3.187c0.584 0.584 1.541 0.586 2.124 0.002l13.813-13.813c0.584-0.585 0.584-1.541 0-2.125l-3.186-3.188c-0.587-0.586-1.542-0.583-2.127 0zM3.929 15.312l-0.759 0.759-1.896-1.897 0.759-0.759 1.896 1.897zM6.965 15.312l-0.759 0.759-3.415-3.415 0.759-0.76 3.415 3.416zM6.965 12.276l-0.759 0.759-1.898-1.896 0.76-0.76 1.897 1.897zM8.483 10.758l-0.759 0.759-1.896-1.896 0.759-0.76 1.896 1.897zM11.518 10.758l-0.759 0.759-3.414-3.414 0.759-0.759 3.414 3.414zM11.518 7.723l-0.759 0.759-1.896-1.896 0.759-0.759 1.896 1.896zM13.036 6.206l-0.759 0.759-1.897-1.897 0.759-0.759 1.897 1.897zM16.072 6.206l-0.76 0.759-3.414-3.415 0.759-0.76 3.415 3.416zM16.071 3.171l-0.759 0.759-1.896-1.898 0.759-0.758 1.896 1.897z"></path></symbol>\n<symbol id="icon-scissors" viewBox="0 0 20 20"><path d="M8.38 5.59c0-2.038-1.652-3.69-3.69-3.69s-3.69 1.652-3.69 3.69c0 2.038 1.652 3.69 3.69 3.69 0.96 0 1.826-0.376 2.483-0.976l1.827 1.687 0.012 0.009-0.004 0.003-1.836 1.693c-0.656-0.6-1.522-0.976-2.482-0.976-2.038 0-3.69 1.652-3.69 3.69s1.652 3.69 3.69 3.69 3.69-1.652 3.69-3.69c0-0.297-0.044-0.582-0.111-0.858l2.844-1.991 4.127 3.065c2.212 1.549 3.76-0.663 3.76-0.663l-10.731-7.515c0.066-0.276 0.111-0.561 0.111-0.858zM4.69 7.39c-0.994 0-1.8-0.806-1.8-1.8s0.806-1.8 1.8-1.8 1.8 0.806 1.8 1.8-0.806 1.8-1.8 1.8zM4.69 16.21c-0.994 0-1.8-0.806-1.8-1.8s0.806-1.8 1.8-1.8 1.8 0.806 1.8 1.8-0.806 1.8-1.8 1.8zM19 6.038c0 0-1.548-2.212-3.76-0.663l-3.205 2.235 2.354 1.648 4.611-3.22z"></path></symbol>\n<symbol id="icon-swap" viewBox="0 0 20 20"><path d="M14 5h-10v-2l-4 3.5 4 3.5v-2h10v-3zM20 13.5l-4-3.5v2h-10v3h10v2l4-3.5z"></path></symbol>\n<symbol id="icon-install" viewBox="0 0 20 20"><path d="M19.059 10.898l-3.171-7.927c-0.234-0.587-0.802-0.971-1.434-0.971h-2.434l0.38 4.065h2.7l-5.1 4.228-5.1-4.228h2.7l0.38-4.065h-2.434c-0.632 0-1.2 0.384-1.434 0.971l-3.171 7.927c-0.288 0.721-0.373 1.507-0.246 2.272l0.59 3.539c0.124 0.745 0.768 1.291 1.523 1.291h14.383c0.755 0 1.399-0.546 1.523-1.291l0.59-3.539c0.129-0.765 0.044-1.551-0.245-2.272zM16.959 15.245c-0.072 0.436-0.449 0.755-0.891 0.755h-12.136c-0.442 0-0.819-0.319-0.891-0.755l-0.365-2.193c-0.093-0.551 0.332-1.052 0.891-1.052h12.867c0.558 0 0.983 0.501 0.891 1.052l-0.366 2.193z"></path></symbol>\n<symbol id="icon-book" viewBox="0 0 20 20"><path d="M17 5.95v10.351c0 0.522-0.452 0.771-1 1.16-0.44 0.313-1-0.075-1-0.587 0 0 0-9.905 0-10.114 0-0.211-0.074-0.412-0.314-0.535s-7.738-4.065-7.738-4.065c-0.121-0.045-0.649-0.378-1.353-0.016-0.669 0.344-1.033 0.718-1.126 0.894l8.18 4.482c0.217 0.114 0.351 0.29 0.351 0.516v10.802c0 0.23-0.142 0.476-0.369 0.585-0.104 0.052-0.219 0.077-0.333 0.077-0.135 0-0.271-0.033-0.386-0.104-0.215-0.131-7.774-4.766-8.273-5.067-0.24-0.144-0.521-0.439-0.527-0.658l-0.112-10.286c0-0.198-0.023-0.547 0.289-1.032 0.697-1.084 3.129-2.317 4.36-1.678l8.999 4.555c0.217 0.112 0.352 0.336 0.352 0.72z"></path></symbol>\n<symbol id="icon-cycle" viewBox="0 0 20 20"><path d="M5.516 14.224c-2.262-2.432-2.222-6.244 0.128-8.611 0.962-0.969 2.164-1.547 3.414-1.736l-0.069-2.077c-1.755 0.213-3.452 0.996-4.797 2.351-3.149 3.17-3.187 8.289-0.123 11.531l-1.741 1.752 5.51 0.301-0.015-5.834-2.307 2.323zM12.163 2.265l0.015 5.834 2.307-2.322c2.262 2.434 2.222 6.246-0.128 8.611-0.961 0.969-2.164 1.547-3.414 1.736l0.069 2.076c1.755-0.213 3.452-0.996 4.798-2.35 3.148-3.172 3.186-8.291 0.122-11.531l1.741-1.754-5.51-0.3z"></path></symbol>\n<symbol id="icon-tag" viewBox="0 0 20 20"><path d="M18.662 5.521l-13.425 13.479 0.707-4.967-4.945 0.709 13.425-13.479c0.391-0.392 1.133-0.308 1.412 0l2.826 2.839c0.5 0.473 0.391 1.026 0 1.419z"></path></symbol>\n</defs>\n</svg>');var r,b,p,u,d,m,j,h,x,g,O,f,v,y,k,w,N,P,C,I,z,B,M,D,S,T,V,A,F,E,L=function(e){return Object(s.jsx)("svg",{className:"icon "+(e.className||""),children:Object(s.jsx)("use",{xlinkHref:"#icon-"+e.name})})},R=(n(30),n(7)),q=n.n(R),U=n(11),_=n(6),Y=n(19),G=n.n(Y),K=n(5),H=n(4),W=n(8),J=n(9),Q=n(3),$=(n(14),n(2)),X=function(){for(var e="",t=36;t-- >0;)e+=27===t||22===t||17===t||12===t?"-":String("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.ceil(35*Math.random())]);return e},Z=n(20),ee=n(10),te=(r=function(){function e(){Object(W.a)(this,e),Object(H.a)(this,"bookID",b,this),Object(H.a)(this,"bookTitle",p,this),Object(H.a)(this,"bookAuthors",u,this),Object(H.a)(this,"bookSubject",d,this),Object(H.a)(this,"bookPublisher",m,this),Object(H.a)(this,"pageSize",j,this),Object(H.a)(this,"pagePosition",h,this),Object(H.a)(this,"pageShow",x,this),Object(H.a)(this,"pageFit",g,this),Object(H.a)(this,"pageBackgroundColor",O,this),Object(H.a)(this,"pageDirection",f,this),Object(H.a)(this,"pages",v,this),Object($.m)(this)}return Object(J.a)(e,[{key:"pushNewPage",value:function(e){var t=e.map((function(e,t){return{index:t,blobID:e,sticky:"auto",blank:!1}})),n=Object($.q)(this.pages);this.pages=[].concat(Object(ee.a)(n),Object(ee.a)(t))}},{key:"splitPage",value:function(e,t){var n=Object($.q)(this.pages),a={index:e,blobID:t[0],sticky:"auto",blank:!1},i={index:-1,blobID:t[1],sticky:"auto",blank:!1};n.splice(e,1,a,i),this.pages=n}},{key:"updateBookPageProperty",value:function(e,t){Object.assign(this,Object(Z.a)({},e,t))}},{key:"removePage",value:function(e){var t=Object($.q)(this.pages);t.splice(e,1),this.pages=t}},{key:"switchIndex",value:function(e,t){var n=Object($.q)(this.pages),a=n[e],i=n.length-1;n[e]=null;var o=n.slice(0,t),c=n.slice(t,i+1);n=[].concat(Object(ee.a)(o),[a],Object(ee.a)(c)).filter((function(e){return e})),this.pages=n}},{key:"updatePageItemIndex",value:function(){var e=Object($.q)(this.pages);this.pages=e.map((function(e,t){return e.index=t,e}))}},{key:"insertBlankPage",value:function(e){var t=Object($.q)(this.pages),n={index:-1,blobID:"",sticky:"auto",blank:!0};if(e>=t.length-1)t.push(n);else{var a=e<0?0:e,i=t[a];t.splice(a,1,n,i)}this.pages=t}}]),e}(),b=Object(Q.a)(r.prototype,"bookID",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X()}}),p=Object(Q.a)(r.prototype,"bookTitle",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=Object(Q.a)(r.prototype,"bookAuthors",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[""]}}),d=Object(Q.a)(r.prototype,"bookSubject",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=Object(Q.a)(r.prototype,"bookPublisher",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=Object(Q.a)(r.prototype,"pageSize",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[250,353]}}),h=Object(Q.a)(r.prototype,"pagePosition",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"between"}}),x=Object(Q.a)(r.prototype,"pageShow",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"two"}}),g=Object(Q.a)(r.prototype,"pageFit",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"stretch"}}),O=Object(Q.a)(r.prototype,"pageBackgroundColor",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"white"}}),f=Object(Q.a)(r.prototype,"pageDirection",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"right"}}),v=Object(Q.a)(r.prototype,"pages",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(Q.a)(r.prototype,"pushNewPage",[$.f],Object.getOwnPropertyDescriptor(r.prototype,"pushNewPage"),r.prototype),Object(Q.a)(r.prototype,"updateBookPageProperty",[$.f],Object.getOwnPropertyDescriptor(r.prototype,"updateBookPageProperty"),r.prototype),Object(Q.a)(r.prototype,"removePage",[$.f],Object.getOwnPropertyDescriptor(r.prototype,"removePage"),r.prototype),Object(Q.a)(r.prototype,"switchIndex",[$.f],Object.getOwnPropertyDescriptor(r.prototype,"switchIndex"),r.prototype),Object(Q.a)(r.prototype,"updatePageItemIndex",[$.f],Object.getOwnPropertyDescriptor(r.prototype,"updatePageItemIndex"),r.prototype),Object(Q.a)(r.prototype,"insertBlankPage",[$.f],Object.getOwnPropertyDescriptor(r.prototype,"insertBlankPage"),r.prototype),r),ne=(y=function(){function e(){Object(W.a)(this,e),Object(H.a)(this,"modalAnalyzeVisible",k,this),Object(H.a)(this,"modalBookVisible",w,this),Object(H.a)(this,"modalContentVisible",N,this),Object(H.a)(this,"modalPageVisible",P,this),Object(H.a)(this,"maxCardBoxCountInOneRow",C,this),Object(H.a)(this,"selectedPageIndex",I,this),this.fileName="",this.firstImport=!0,Object($.m)(this)}return Object(J.a)(e,[{key:"toggleAnalyzeVisible",value:function(e){e&&(this.fileName=e),this.modalAnalyzeVisible=!this.modalAnalyzeVisible}},{key:"toggleBookVisible",value:function(){this.firstImport=!1,this.modalBookVisible=!this.modalBookVisible}},{key:"toggleContentVisible",value:function(){this.modalContentVisible=!this.modalContentVisible}},{key:"togglePageVisible",value:function(){this.modalPageVisible=!this.modalPageVisible}},{key:"hideModal",value:function(){Object.assign(this,{modalBookVisible:!1,modalContentVisible:!1,modalPageVisible:!1})}},{key:"selectPageIndex",value:function(e){null===e||this.selectedPageIndex===e?this.selectedPageIndex=null:this.selectedPageIndex=e}}]),e}(),k=Object(Q.a)(y.prototype,"modalAnalyzeVisible",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(Q.a)(y.prototype,"modalBookVisible",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=Object(Q.a)(y.prototype,"modalContentVisible",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object(Q.a)(y.prototype,"modalPageVisible",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Object(Q.a)(y.prototype,"maxCardBoxCountInOneRow",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=Object(Q.a)(y.prototype,"selectedPageIndex",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(Q.a)(y.prototype,"toggleAnalyzeVisible",[$.f],Object.getOwnPropertyDescriptor(y.prototype,"toggleAnalyzeVisible"),y.prototype),Object(Q.a)(y.prototype,"toggleBookVisible",[$.f],Object.getOwnPropertyDescriptor(y.prototype,"toggleBookVisible"),y.prototype),Object(Q.a)(y.prototype,"toggleContentVisible",[$.f],Object.getOwnPropertyDescriptor(y.prototype,"toggleContentVisible"),y.prototype),Object(Q.a)(y.prototype,"togglePageVisible",[$.f],Object.getOwnPropertyDescriptor(y.prototype,"togglePageVisible"),y.prototype),Object(Q.a)(y.prototype,"hideModal",[$.f],Object.getOwnPropertyDescriptor(y.prototype,"hideModal"),y.prototype),Object(Q.a)(y.prototype,"selectPageIndex",[$.f],Object.getOwnPropertyDescriptor(y.prototype,"selectPageIndex"),y.prototype),y),ae=function e(t){if(t&&"object"===typeof t){var n=t instanceof Array?[]:t instanceof Date?new Date(+t):{};for(var a in t){var i=t[a];n[a]=e(i)}return n}return t},ie=function(){return{list:ae(Object($.q)(this.list)),indexMap:ae(Object($.q)(this.indexMap))}},oe=(z=function(){function e(){Object(W.a)(this,e),Object(H.a)(this,"list",B,this),Object(H.a)(this,"indexMap",M,this),Object($.m)(this)}return Object(J.a)(e,[{key:"removeTitle",value:function(e){var t=ie.call(this),n=t.list,a=t.indexMap;if(1!==n.length){var i=n[e];n.splice(e,1),i.pageIndex&&i.pageIndex in a&&delete a[i.pageIndex],this.list=n,this.indexMap=a}}},{key:"updateList",value:function(e){var t={};e.forEach((function(e,n){null!==e.pageIndex&&(t[e.pageIndex]=n)})),this.list=e,this.indexMap=t}},{key:"setPageIndexToTitle",value:function(e,t){var n=ie.call(this),a=n.list,i=n.indexMap;if(!i[t]||i[t]!==e){var o={},c=t in i?i[t]:null;null!==c&&(a[c].pageIndex=null),a[e].pageIndex=t,a.forEach((function(e,t){null!==e.pageIndex&&(o[e.pageIndex]=t)})),this.list=a,this.indexMap=o}}},{key:"removePageIndex",value:function(e){var t=ie.call(this),n=t.list,a=t.indexMap,i=n[e];n[e].pageIndex=null,delete a[i.pageIndex],this.list=n,this.indexMap=a}}]),e}(),B=Object(Q.a)(z.prototype,"list",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{pageIndex:0,title:"\u8868\u7d19"}]}}),M=Object(Q.a)(z.prototype,"indexMap",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{0:0}}}),Object(Q.a)(z.prototype,"removeTitle",[$.f],Object.getOwnPropertyDescriptor(z.prototype,"removeTitle"),z.prototype),Object(Q.a)(z.prototype,"updateList",[$.f],Object.getOwnPropertyDescriptor(z.prototype,"updateList"),z.prototype),Object(Q.a)(z.prototype,"setPageIndexToTitle",[$.f],Object.getOwnPropertyDescriptor(z.prototype,"setPageIndexToTitle"),z.prototype),Object(Q.a)(z.prototype,"removePageIndex",[$.f],Object.getOwnPropertyDescriptor(z.prototype,"removePageIndex"),z.prototype),z),ce=n(23),le=function(e){return new Promise((function(t,n){var a=new Image;a.onerror=function(e){return n(e)},a.onload=function(e){t(a)},a.src=e}))},se=function(){var e=Object(U.a)(q.a.mark((function e(t){var n,a,i,o,c,l;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=URL.createObjectURL(t),e.next=3,le(n);case 3:return a=e.sent,i=document.createElement("canvas"),a.width<a.height?(i.width=a.width/a.height*200,i.height=200):a.width>a.height?(i.width=200,i.height=a.height/a.width*200):(i.width=200,i.height=200),(o=i.getContext("2d")).imageSmoothingQuality="high",o.drawImage(a,0,0,i.width,i.height),e.next=11,new Promise((function(e,t){return i.toBlob((function(n){return n?e(n):t()}))}));case 11:return c=e.sent,l={blob:t,blobURL:n,thumbnailURL:URL.createObjectURL(c),originImage:a},e.abrupt("return",l);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=new(D=function(){function e(){Object(W.a)(this,e),Object(H.a)(this,"blobs",S,this),Object($.m)(this)}return Object(J.a)(e,[{key:"push",value:function(){var e=Object(U.a)(q.a.mark((function e(t,n){var a,i=this;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,Promise.all(t.map(se));case 4:a=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),alert("\u9519\u8bef\nError"),e.abrupt("return");case 12:Object($.p)((function(){var e={};n.forEach((function(t,n){e[t]=a[n]})),i.blobs=Object(ce.a)(Object(ce.a)({},i.blobs),e)}));case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),S=Object(Q.a)(D.prototype,"blobs",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(Q.a)(D.prototype,"push",[$.f],Object.getOwnPropertyDescriptor(D.prototype,"push"),D.prototype),D),be=(n.p,function(){return'<?xml version="1.0"?>\n<container\n version="1.0"\n xmlns="urn:oasis:names:tc:opendocument:xmlns:container"\n>\n<rootfiles>\n<rootfile\n full-path="OEBPS/standard.opf"\n media-type="application/oebps-package+xml"\n/>\n</rootfiles>\n</container>'}),pe=function(){return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE html>\n<html\n xmlns="http://www.w3.org/1999/xhtml"\n xmlns:epub="http://www.idpf.org/2007/ops"\n xml:lang="ja"\n>\n<head>\n<meta charset="UTF-8" />\n<title>{{title}}</title>\n<link rel="stylesheet" type="text/css" href="../style/fixed-layout-jp.css"/>\n<meta name="viewport" content="width={{width}}, height={{height}}"/>\n</head>\n<body>\n<div class="main">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1"\n xmlns:xlink="http://www.w3.org/1999/xlink"\n width="100%" height="100%" viewBox="0 0 {{width}} {{height}}">\n{{image}}\n</svg>\n</div>\n</body>\n</html>'},ue=function(){return'@charset "UTF-8";\n\nhtml,\nbody {\n    margin:    0;\n    padding:   0;\n    font-size: 0;\n}\nsvg {\n    margin:    0;\n    padding:   0;\n}\n'},de=function(){return'<?xml version="1.0" encoding="UTF-8"?>\n<package xmlns="http://www.idpf.org/2007/opf" version="3.0" xml:lang="ja" unique-identifier="unique-id" prefix="rendition: http://www.idpf.org/vocab/rendition/#         epub-bundle-tool: https://wing-kai.github.io/epub-manga-creator/         ebpaj: http://www.ebpaj.jp/         fixed-layout-jp: http://www.digital-comic.jp/">\n\n<metadata xmlns:dc="http://purl.org/dc/elements/1.1/">\n\n\x3c!-- \u4f5c\u54c1\u540d --\x3e\n<dc:title id="title">{{title}}</dc:title>\n<meta refines="#title" property="file-as"></meta>\n\n\x3c!-- \u8457\u8005\u540d --\x3e\n\x3c!-- creator-list --\x3e\n\n<dc:subject>{{subject}}</dc:subject>\n\n\x3c!-- \u51fa\u7248\u793e\u540d --\x3e\n<dc:publisher id="publisher">{{publisher}}</dc:publisher>\n<meta refines="#publisher" property="file-as"></meta>\n\n\x3c!-- \u8a00\u8a9e --\x3e\n<dc:language>ja</dc:language>\n\n\x3c!-- \u30d5\u30a1\u30a4\u30ebid --\x3e\n<dc:identifier id="unique-id">urn:uuid:{{uuid}}</dc:identifier>\n\n\x3c!-- \u66f4\u65b0\u65e5 --\x3e\n<meta property="dcterms:modified">{{createTime}}</meta>\n\n\x3c!-- Fixed-Layout Documents\u6307\u5b9a --\x3e\n<meta property="rendition:layout">pre-paginated</meta>\n<meta property="rendition:spread">{{spread}}</meta>\n\n\x3c!-- etc. --\x3e\n<meta property="ebpaj:guide-version">1.1</meta>\n<meta name="SpineColor" content="#FFFFFF"></meta>\n<meta name="cover" content="cover"></meta>\n\n</metadata>\n\n<manifest>\n\n\x3c!-- navigation --\x3e\n<item media-type="application/xhtml+xml" id="toc" href="navigation-documents.xhtml" properties="nav"></item>\n\n\x3c!-- style --\x3e\n<item media-type="text/css" id="fixed-layout-jp" href="style/fixed-layout-jp.css"></item>\n\n\x3c!-- image --\x3e\n\x3c!-- item-image --\x3e\n\n\x3c!-- text --\x3e\n<item id="p_cover" href="text/p_cover.xhtml" media-type="application/xhtml+xml" properties="svg" fallback="cover"></item>\n\x3c!-- item-xhtml --\x3e\n\n</manifest>\n\n<spine{{direction}}>\n\n<itemref linear="yes" idref="p_cover" properties="rendition:page-spread-center"></itemref>\n\x3c!-- itemref-xhtml --\x3e\n\n</spine>\n\n</package>'},me=function(){return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="ja">\n<head>\n<meta charset="UTF-8"></meta>\n<title>Navigation</title>\n</head>\n<body>\n<nav epub:type="toc" id="toc">\n<h1>Navigation</h1>\n<ol>\n\x3c!-- navigation-list --\x3e\n</ol>\n</nav>\n<nav epub:type="landmarks">\n<ol>\n<li><a epub:type="bodymatter" href="text/p_cover.xhtml">Start of Content</a></li>\n</ol>\n</nav>\n</body>\n</html>\n'},je=function(e){return e.replace(/"|&|'|\\!|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g,(function(e){var t=e.charCodeAt(0),n=["&#"];return t=32===t?160:t,n.push(t),n.push(";"),n.join("")}))},he=function(e,t){for(var n=String(e),a=t-n.length;a-- >0;)n="0"+n;return n},xe=new(T=function(){function e(){Object(W.a)(this,e),Object(H.a)(this,"ui",V,this),Object(H.a)(this,"book",A,this),Object(H.a)(this,"contents",F,this),Object(H.a)(this,"blobs",E,this),this.ui=new ne,this.book=new te,this.contents=new oe,this.blobs=re,Object($.m)(this)}return Object(J.a)(e,[{key:"importPageFromImages",value:function(e){var t=e.map((function(){return X()}));this.book.pushNewPage(t),this.blobs.push(e,t)}},{key:"replacePageIndex",value:function(e,t){var n=this;this.book.switchIndex(e,e>t?t:t+1),this.ui.selectPageIndex(t);var a={},i=Object($.q)(this.contents.list);this.book.pages.forEach((function(e,t){if(e.index in n.contents.indexMap){var o=n.contents.indexMap[e.index];a[t]=o,i[o].pageIndex=t}})),this.contents.updateList(i),this.book.updatePageItemIndex()}},{key:"splitPage",value:function(){var e=Object(U.a)(q.a.mark((function e(t){var n,a,i,o,c,l,s,r,b,p,u,d;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.book.pages[t],a=this.blobs.blobs[n.blobID],i=[X(),X()],o=a.blob.type,c=a.originImage.width>>1,l=a.originImage.width-c,s=document.createElement("canvas"),r=document.createElement("canvas"),s.width=c,s.height=a.originImage.height,r.width=l,r.height=a.originImage.height,b=s.getContext("2d"),p=r.getContext("2d"),null===b||void 0===b||b.drawImage(a.originImage,0,0),null===p||void 0===p||p.drawImage(a.originImage,0-c,0),e.next=18,Promise.all([new Promise((function(e,t){return s.toBlob((function(n){return n?e(n):t()}),o,1)})),new Promise((function(e,t){return r.toBlob((function(n){return n?e(n):t()}),o,1)}))]);case 18:u=e.sent,this.book.splitPage(t,i),this.book.updatePageItemIndex(),this.blobs.push(u,"left"===this.book.pageDirection?i:i.reverse()),(d=Object($.q)(this.contents.list)).forEach((function(e){null!==e.pageIndex&&e.pageIndex>t&&e.pageIndex++})),this.contents.updateList(d);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"insertBlankPage",value:function(e){this.book.insertBlankPage(e),this.book.updatePageItemIndex();var t=this.ui.selectedPageIndex;t&&t>=e&&this.ui.selectPageIndex(t+1);var n=Object($.q)(this.contents.list);n.forEach((function(t){null!==t.pageIndex&&t.pageIndex>e&&t.pageIndex++})),this.contents.updateList(n)}},{key:"removePage",value:function(e){this.book.removePage(e),this.ui.selectPageIndex(null);var t=Object($.q)(this.contents.list);t.forEach((function(t){null!==t.pageIndex&&(t.pageIndex!==e?t.pageIndex>e&&t.pageIndex--:t.pageIndex=null)})),this.contents.updateList(t)}},{key:"generateBook",value:function(){var e=this,t=be(),n=pe(),a=ue(),i=de(),o=me(),c=new G.a;c.folder("META-INF"),c.folder("OEBPS/image"),c.folder("OEBPS/text"),c.folder("OEBPS/style"),o=o.replace("\x3c!-- navigation-list --\x3e",Object.keys(this.contents.indexMap).map((function(t){var n=e.contents.indexMap[t],a=e.contents.list[n],i=je(a.title);return"0"===t?'<li><a href="text/p_cover.xhtml">'.concat(i,"</a></li>"):'<li><a href="text/p_'.concat(he(+t-1,4),'.xhtml">').concat(i,"</a></li>")})).join("\n"));var l=[],s=[],r=[],b=this.book.pageDirection;this.book.pages.forEach((function(t,n){var a=0===n?"cover":he(n-1,4),i=(0===n?"":"i_")+a;if(t.blank)s.push('<item id="p_'.concat(a,'" href="text/p_').concat(a,'.xhtml" media-type="application/xhtml+xml" properties="svg"></item>'));else{var o=e.blobs.blobs[t.blobID].blob.type;s.push('<item id="p_'.concat(a,'" href="text/p_').concat(a,'.xhtml" media-type="application/xhtml+xml" properties="svg" fallback="').concat(i,'"></item>')),l.push('<item id="'.concat(i,'" href="image/').concat(i,".").concat(o.slice(6),'" media-type="').concat(o,'"').concat(0===n?' properties="cover-image"':"","></item>"))}0!==n&&(r.push('<itemref linear="yes" idref="p_'.concat(a,'" properties="page-spread-').concat(b,'"></itemref>')),b="left"===b?"right":"left")}));var p=this.book.pageSize[0]+"",u=this.book.pageSize[1]+"",d=this.book.pageFit,m=je(this.book.bookTitle.trim());this.book.pages.forEach((function(t,a){var i=0===a?"cover":he(a-1,4);if(t.blank)c.file("OEBPS/text/p_".concat(i,".xhtml"),n.replace("{{title}}",m).replace(new RegExp("{{width}}","gm"),p).replace(new RegExp("{{height}}","gm"),u).replace("{{image}}",""));else{var o=e.blobs.blobs[t.blobID].blob,l=(0===a?"":"i_")+i+"."+o.type.slice(6),s="none";"stretch"!==d&&(s="center"===e.book.pagePosition?"xMidYMid ":"left"===e.book.pageDirection?(a+1)%2===1?"xMaxYMid":"xMinYMid":(a+1)%2===1?"xMinYMid":"xMaxYMid",s+="fit"===d?"meet":"slice"),c.file("OEBPS/text/p_".concat(i,".xhtml"),n.replace("{{title}}",m).replace(new RegExp("{{width}}","gm"),p).replace(new RegExp("{{height}}","gm"),u).replace("{{image}}",'<image width="100%" height="100%" preserveAspectRatio="'.concat(s,'" xlink:href="../image/').concat(l,'" />'))),c.file("OEBPS/image/".concat(l),o)}}));var j=this.book.bookAuthors.map((function(e,t){return['<dc:creator id="creator'.concat(t+1,'">').concat(je(e),"</dc:creator>"),'<meta refines="#creator'.concat(t+1,'" property="role" scheme="marc:relators">aut</meta>'),'<meta refines="#creator'.concat(t+1,'" property="file-as"></meta>'),'<meta refines="#creator'.concat(t+1,'" property="display-seq">').concat(t+1,"</meta>")].join("\n")})).join("\n");i=i.replace("{{uuid}}",this.book.bookID).replace("{{title}}",m).replace("\x3c!-- creator-list --\x3e",j).replace("{{subject}}",je(this.book.bookSubject)).replace("{{publisher}}",je(this.book.bookPublisher)).replace("{{spread}}","one"===this.book.pageShow?"none":"landscape").replace("{{createTime}}",(new Date).toISOString()).replace("\x3c!-- item-image --\x3e",l.join("\n")).replace("\x3c!-- item-xhtml --\x3e",s.join("\n")).replace("\x3c!-- itemref-xhtml --\x3e",r.join("\n")).replace("{{direction}}","right"===this.book.pageDirection?' page-progression-direction="rtl"':""),c.file("mimetype","application/epub+zip"),c.file("META-INF/container.xml",t),c.file("OEBPS/style/fixed-layout-jp.css",a),c.file("OEBPS/navigation-documents.xhtml",o),c.file("OEBPS/standard.opf",i),c.generateAsync({type:"blob",mimeType:"application/epub+zip"}).then((function(t){var n=document.createElement("a"),a=window.URL.createObjectURL(t);n.download=e.book.bookTitle.trim()+".epub",n.href=a,n.click(),window.URL.revokeObjectURL(a)}))}}]),e}(),V=Object(Q.a)(T.prototype,"ui",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(Q.a)(T.prototype,"book",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=Object(Q.a)(T.prototype,"contents",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=Object(Q.a)(T.prototype,"blobs",[$.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(Q.a)(T.prototype,"importPageFromImages",[$.f],Object.getOwnPropertyDescriptor(T.prototype,"importPageFromImages"),T.prototype),Object(Q.a)(T.prototype,"replacePageIndex",[$.f],Object.getOwnPropertyDescriptor(T.prototype,"replacePageIndex"),T.prototype),Object(Q.a)(T.prototype,"splitPage",[$.f],Object.getOwnPropertyDescriptor(T.prototype,"splitPage"),T.prototype),Object(Q.a)(T.prototype,"insertBlankPage",[$.f],Object.getOwnPropertyDescriptor(T.prototype,"insertBlankPage"),T.prototype),Object(Q.a)(T.prototype,"removePage",[$.f],Object.getOwnPropertyDescriptor(T.prototype,"removePage"),T.prototype),Object(Q.a)(T.prototype,"generateBook",[$.f],Object.getOwnPropertyDescriptor(T.prototype,"generateBook"),T.prototype),T),ge=Object(K.a)((function(e){var t=Object(a.useCallback)((function(){var t=xe.book.pages[e.pageIndex],n=xe.blobs.blobs[t.blobID].originImage;xe.book.updateBookPageProperty("pageSize",[n.width,n.height])}),[e.pageIndex]),n=Object(a.useCallback)((function(){var t=xe.book.pages.length,n=window.prompt("new page index (1 - ".concat(t,"):")),a=parseInt(n||"");isNaN(a)||a<1||(a>t&&(a=t),xe.replacePageIndex(e.pageIndex,a-1))}),[e.pageIndex]),i=Object(a.useCallback)((function(t){xe.contents.setPageIndexToTitle(+t.currentTarget.dataset.index,e.pageIndex)}),[e.pageIndex]),o=Object(a.useCallback)((function(){xe.splitPage(e.pageIndex)}),[e.pageIndex]),c=Object(a.useCallback)((function(){window.confirm("remove page index ".concat(e.pageIndex+1,"?"))&&xe.removePage(e.pageIndex)}),[e.pageIndex]);if(null===e.pageIndex)return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-outline-secondary disabled",disabled:!0,children:Object(s.jsx)(L,{name:"ruler"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-outline-secondary disabled",disabled:!0,children:Object(s.jsx)(L,{name:"menu"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-outline-secondary disabled",disabled:!0,children:Object(s.jsx)(L,{name:"bookmark"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-outline-secondary disabled",disabled:!0,children:Object(s.jsx)(L,{name:"scissors"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-outline-secondary disabled",disabled:!0,children:Object(s.jsx)(L,{name:"cross"})})})]});var l=xe.book.pages[e.pageIndex].blank;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-secondary",disabled:l,onClick:t,children:Object(s.jsx)(L,{name:"ruler"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:n,children:Object(s.jsx)(L,{name:"menu"})})}),Object(s.jsxs)("div",{className:"nav-item dropdown",children:[Object(s.jsx)("button",{type:"button",className:"btn btn-secondary",children:Object(s.jsx)(L,{name:"bookmark"})}),Object(s.jsx)("ul",{className:"dropdown-menu",style:{top:0,left:"100%"},children:xe.contents.list.map((function(t,n){return Object(s.jsx)("li",{children:Object(s.jsx)("span",{className:"dropdown-item"+(t.pageIndex===e.pageIndex?" active":""),"data-index":n,onClick:i,children:t.title})},n)}))})]}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-secondary",disabled:l,onClick:o,children:Object(s.jsx)(L,{name:"scissors"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:c,children:Object(s.jsx)(L,{name:"cross"})})})]})})),Oe={image:"image/jpeg,image/png,image/webp",zip:"application/zip",epub:"application/epub+zip"},fe={image:!0,zip:!1,epub:!1},ve=function(e,t){var n=e;return n.lastModifiedDate=new Date,n.name=t,e},ye=Object(K.a)((function(){var e=i.a.useContext(i.a.createContext(xe.ui)),t=Object(a.useRef)(null),n=Object(a.useState)("zip"),o=Object(_.a)(n,2),c=o[0],l=o[1],r=Object(a.useCallback)((function(){e.toggleBookVisible()}),[e]),b=Object(a.useCallback)((function(){e.toggleContentVisible()}),[e]),p=Object(a.useCallback)((function(){e.togglePageVisible()}),[e]),u=Object(a.useCallback)((function(e){var n,a=e.currentTarget.dataset.type;a===c?null===(n=t.current)||void 0===n||n.click():l(a)}),[c]),d=Object(a.useCallback)(Object(U.a)(q.a.mark((function e(){var n,a,i;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.current,"zip"!==c||!(null===a||void 0===a||null===(n=a.files)||void 0===n?void 0:n[0])){e.next=5;break}return i=a.files[0].name,G.a.loadAsync(a.files[0]).then((function(e){var t=Object.values(e.files).map((function(e){return e.dir?Promise.resolve(null):new Promise((function(t){e.async("uint8array").then((function(n){var a=null;switch(Array.from(new Uint8Array(n).subarray(0,4)).map((function(e){return e.toString(16)})).join("")){case"89504e47":a="image/png";break;case"52494646":a="image/webp";break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":a="image/jpeg"}if(a){var i=new Blob([n],{type:a});t(ve(i,e.name.replace(/^.+\/(.+)$/,"$1")))}else t(null)}))}))}));return Promise.all(t)})).then((function(e){xe.importPageFromImages(e.filter((function(e){return null!==e}))),xe.ui.firstImport&&xe.ui.toggleAnalyzeVisible(i)})),e.abrupt("return");case 5:xe.importPageFromImages(Array.from(a.files));case 6:case"end":return e.stop()}}),e)}))),[c]),m=Object(a.useCallback)((function(){var e=xe.book.pages.length,t=window.prompt("page index (1 - ".concat(e,"):")),n=parseInt(t||"");isNaN(n)||n<1||(n>e&&(n=e),xe.insertBlankPage(n-1))}),[]),j=Object(a.useCallback)((function(){xe.generateBook()}),[]);return Object(a.useLayoutEffect)((function(){setTimeout((function(){var e;null===(e=t.current)||void 0===e||e.click()}),0)}),[c]),Object(s.jsxs)("nav",{id:"nav",className:"navbar bg-dark",children:[Object(s.jsxs)("div",{className:"nav-item dropdown",children:[Object(s.jsx)("button",{type:"button",className:"btn btn-primary",children:Object(s.jsx)(L,{name:"upload"})}),Object(s.jsxs)("ul",{className:"dropdown-menu",style:{top:0,left:"100%"},children:[Object(s.jsx)("li",{children:Object(s.jsx)("span",{className:"dropdown-item","data-type":"image",onClick:u,children:"image"})}),Object(s.jsx)("li",{children:Object(s.jsx)("span",{className:"dropdown-item","data-type":"zip",onClick:u,children:"zip"})})]})]}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary",onClick:r,children:Object(s.jsx)(L,{name:"book"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary",onClick:b,children:Object(s.jsx)(L,{name:"list"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary",onClick:p,children:Object(s.jsx)(L,{name:"tools"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary",disabled:0===xe.book.pages.length,onClick:m,children:Object(s.jsx)(L,{name:"notification"})})}),Object(s.jsx)("div",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",className:"btn btn-primary",disabled:0===xe.book.pages.length,onClick:j,children:Object(s.jsx)(L,{name:"install"})})}),Object(s.jsx)(ge,{pageIndex:e.selectedPageIndex}),Object(s.jsx)("input",{id:"input-upload",ref:t,type:"file",value:"",accept:Oe[c],multiple:fe[c],onChange:d,style:{display:"none"}},c)]})})),ke=n(42),we=Object(K.a)((function(e){var t=i.a.useContext(i.a.createContext(xe.ui)),n=i.a.useContext(i.a.createContext(xe.book)),o=i.a.useContext(i.a.createContext(xe.contents)),c=Object(a.useCallback)((function(){xe.ui.selectPageIndex(e.pageItemIndex)}),[e.pageItemIndex]);if(null===e.pageItemIndex)return Object(s.jsx)("div",{className:"card",children:Object(s.jsx)("div",{className:"card-image"})});var l="none";"stretch"!==n.pageFit&&(l="center"===e.pagePosition?"xMidYMid ":"left"===e.pagePosition?"xMinYMid ":"xMaxYMid ","fit"===n.pageFit?l+="meet":l+="slice");var r=null!==e.pageItemIndex&&t.selectedPageIndex===e.pageItemIndex;return Object(s.jsxs)("div",{className:"card",children:[e.pageItemIndex in o.indexMap?Object(s.jsx)(L,{name:"bookmark"}):null,e.blobItem||!e.blobItem&&e.blank?Object(s.jsxs)("svg",{className:"card-image",viewBox:"0 0 "+n.pageSize.join(" "),onClick:c,children:[Object(s.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"===n.pageBackgroundColor?"#fff":"#000"}),e.blobItem?Object(s.jsx)("image",{width:"100%",height:"100%",preserveAspectRatio:l,xlinkHref:e.blobItem.thumbnailURL}):null,r?Object(s.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"none",stroke:"rgba(49,132,253,.5)",strokeWidth:"8%"}):null]}):Object(s.jsx)("div",{className:"card-image",children:Object(s.jsx)("div",{className:"spinner-border text-primary",role:"status"})}),null===e.pageItemIndex?null:Object(s.jsx)("div",{className:"page-num",children:e.pageItemIndex+1})]})})),Ne=Object(K.a)((function(e){var t=i.a.useContext(i.a.createContext(xe.book)),n="right"===t.pageDirection?e.pages[1]:e.pages[0],a="right"===t.pageDirection?e.pages[0]:e.pages[1],o=null===n?null:t.pages[n],c=null===a?null:t.pages[a];return Object(s.jsxs)("div",{className:"card-group",children:[Object(s.jsx)(we,{pageItemIndex:n,blobItem:o?re.blobs[o.blobID]:null,pagePosition:"between"===t.pagePosition?"left":"center",blank:(null===o||void 0===o?void 0:o.blank)||!1}),Object(s.jsx)(we,{pageItemIndex:a,blobItem:c?re.blobs[c.blobID]:null,pagePosition:"between"===t.pagePosition?"right":"center",blank:(null===c||void 0===c?void 0:c.blank)||!1})]})})),Pe=getComputedStyle(document.documentElement),Ce=+Pe.getPropertyValue("--card-box-width").slice(0,-2),Ie=+Pe.getPropertyValue("--card-box-margin").slice(0,-2),ze=Object(K.a)((function(){var e=Object(a.useRef)(null),t=i.a.useContext(i.a.createContext(xe.book)),n=Object(a.useState)([]),o=Object(_.a)(n,2),c=o[0],l=o[1],r=Object(a.useCallback)((function(){var n,a=null===(n=e.current)||void 0===n?void 0:n.clientWidth;if(a){var i=Math.floor(a/(Ce+2*Ie)),o=Math.ceil((1+t.pages.length)/i/2);if(0!==t.pages.length){for(var c=0,s=0,r=-1,b=[],p=t.pages.length;c++<o;){for(var u=[];s++<i;)u.push([-1===r?null:++r<p?r:null,++r<p?r:null]);s=0,b.push("right"===t.pageDirection?u.reverse():u)}l(b)}else l([])}}),[t.pageDirection,t.pages]);Object(a.useCallback)((function(){var e;null===(e=document.getElementById("input-upload"))||void 0===e||e.click()}),[]);return Object(a.useEffect)((function(){r()}),[t.pages,r]),Object(ke.a)((function(){r(),window.addEventListener("resize",r)})),Object(s.jsx)("main",{id:"main",className:"pt-4 pb-4",ref:e,children:0===c.length?Object(s.jsx)("div",{className:"alert alert-secondary text-center",role:"alert",children:"ready \ud83d\ude80"}):c.map((function(e,t){return Object(s.jsx)("div",{className:"row page-row justify-content-evenly",children:e.map((function(e,n){return Object(s.jsx)(Ne,{pages:e},"".concat(t,"-").concat(n,"-").concat(e[0],"-").concat(e[1]))}))},t)}))})})),Be=n(24),Me=(n(39),{B4:function(){return[250,353]},B5:function(){return[176,250]},A4:function(){return[210,297]},A5:function(){return[148,210]},"CG 16:9":function(){return[160,90]},"CG 16:10":function(){return[160,100]}}),De=function(e){var t=Object(a.useCallback)((function(t){var n=t.currentTarget.dataset.index;e.onClick(e.keywords[+n])}),[e]);return Object(s.jsx)(s.Fragment,{children:e.keywords.map((function(e,n){return Object(s.jsx)("button",{type:"button","data-index":n,className:"btn btn-outline-primary btn-sm mr-1",onClick:t,children:e},n)}))})},Se=Object(K.a)((function(){var e=i.a.useContext(i.a.createContext(xe.ui)),t=Object(a.useState)(""),n=Object(_.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(""),r=Object(_.a)(l,2),b=r[0],p=r[1],u=Object(a.useState)(""),d=Object(_.a)(u,2),m=d[0],j=d[1],h=Object(a.useState)(""),x=Object(_.a)(h,2),g=x[0],O=x[1],f=Object(a.useState)([]),v=Object(_.a)(f,2),y=v[0],k=v[1],w=Object(a.useCallback)((function(e){e.stopPropagation()}),[]),N=Object(a.useCallback)((function(){e.toggleAnalyzeVisible()}),[e]),P=Object(a.useCallback)((function(e){p("string"===typeof e?e:e.currentTarget.value)}),[]),C=Object(a.useCallback)((function(e){j("string"===typeof e?e:e.currentTarget.value)}),[]),I=Object(a.useCallback)((function(e){O("string"===typeof e?e:e.currentTarget.value)}),[]),z=Object(a.useCallback)((function(){xe.book.updateBookPageProperty("bookTitle",b),xe.book.updateBookPageProperty("bookAuthors",[m]),xe.book.updateBookPageProperty("bookPublisher",g),N()}),[m,g,b,N]);return Object(a.useEffect)((function(){var e=[/\[.*?\(.*\)\]/,/\[.*?\]\s?\[.*?\]/,/\[.*?\]/,/\(.*?\)/,/\([^[\]()]*?\)|\[[^[\]()]*?\]/g],t=e[0].exec(o),n=e[1].exec(o),a=e[2].exec(o),i=e[3].exec(o);if(t){var c,l=t[0],s=Array.from(l.match(/\(.*?\)/g)||[]).pop(),r=o.indexOf(l[0]),b=o.slice(0===r?l.length:r+l.length).trim();return p(b),j((null===s||void 0===s||null===(c=s.slice(1,-1))||void 0===c?void 0:c.trim())||""),void k(Array.from(o.match(e[4])||[]).map((function(e){return e.slice(1,-1)})))}if(n){var u,d=n[0],m=Array.from(d.match(/\[.*?\]/g)||[]).pop(),h=o.indexOf(d[0]),x=o.slice(0===h?d.length:h+d.length).trim();return p(x),j((null===m||void 0===m||null===(u=m.slice(1,-1))||void 0===u?void 0:u.trim())||""),void k(Array.from(o.match(e[4])||[]).map((function(e){return e.slice(1,-1)})))}if(a){var g=a[0],O=g.slice(1,-1),f=o.indexOf(g[0]),v=o.slice(0===f?g.length:f+g.length).trim();return p(v),j(O),void k(Array.from(o.match(e[4])||[]).map((function(e){return e.slice(1,-1)})))}if(i){var y=i[0],w=y.slice(1,-1),N=o.indexOf(y[0]),P=o.slice(0===N?y.length:N+y.length).trim();return p(P),j(w),void k(Array.from(o.match(e[4])||[]).map((function(e){return e.slice(1,-1)})))}p(o),k(Array.from(o.match(e[4])||[]).map((function(e){return e.slice(1,-1)})))}),[o]),Object(a.useEffect)((function(){e.modalAnalyzeVisible&&c(e.fileName.split(".").slice(0,-1).join(""))}),[e.fileName,e.modalAnalyzeVisible]),Object(s.jsx)("div",{className:"modal-dialog modal-lg",onClick:w,children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",children:"analyze"}),Object(s.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:N})]}),Object(s.jsxs)("div",{className:"modal-body",children:[Object(s.jsxs)("div",{className:"mb-3 row",children:[Object(s.jsx)("label",{htmlFor:"input-page-progression direction",className:"col-2 col-form-label text-end",children:"file name"}),Object(s.jsx)("div",{className:"col-10",children:Object(s.jsx)("input",{type:"text",className:"form-control",value:o,disabled:!0})})]}),Object(s.jsxs)("div",{className:"mb-3 row",children:[Object(s.jsx)("label",{htmlFor:"input-page-progression direction",className:"col-2 col-form-label text-end",children:"title"}),Object(s.jsxs)("div",{className:"col-10",children:[Object(s.jsx)("input",{type:"text",className:"form-control",value:b,onChange:P}),Object(s.jsx)("div",{className:"mt-3",children:Object(s.jsx)(De,{keywords:y,onClick:P})})]})]}),Object(s.jsxs)("div",{className:"mb-3 row",children:[Object(s.jsx)("label",{htmlFor:"input-page-progression direction",className:"col-2 col-form-label text-end",children:"authors"}),Object(s.jsxs)("div",{className:"col-10",children:[Object(s.jsx)("input",{type:"text",className:"form-control",value:m,onChange:C}),Object(s.jsx)("div",{className:"mt-3",children:Object(s.jsx)(De,{keywords:y,onClick:C})})]})]}),Object(s.jsxs)("div",{className:"mb-3 row",children:[Object(s.jsx)("label",{htmlFor:"input-page-progression direction",className:"col-2 col-form-label text-end",children:"publisher"}),Object(s.jsxs)("div",{className:"col-10",children:[Object(s.jsx)("input",{type:"text",className:"form-control",value:g,onChange:I}),Object(s.jsx)("div",{className:"mt-3",children:Object(s.jsx)(De,{keywords:y,onClick:I})})]})]})]}),Object(s.jsxs)("div",{className:"modal-footer",children:[Object(s.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:N,children:"later"}),Object(s.jsx)("button",{type:"button",className:"btn btn-primary",onClick:z,children:"Save changes"})]})]})})})),Te=Object(K.a)((function(){var e=i.a.useContext(i.a.createContext(xe.ui)),t=i.a.useContext(i.a.createContext(xe.book)),n=Object(a.useCallback)((function(e){e.stopPropagation()}),[]),o=Object(a.useCallback)((function(){e.toggleBookVisible()}),[e]),c=Object(a.useCallback)((function(e){var n=e.currentTarget;t.updateBookPageProperty("bookID",n.value)}),[t]),l=Object(a.useCallback)((function(e){var n=e.currentTarget;t.updateBookPageProperty("bookTitle",n.value)}),[t]),r=Object(a.useCallback)((function(e){var n=e.currentTarget.dataset.index,a=Object(ee.a)(Object($.q)(t.bookAuthors));a.splice(+n,1,a[+n],""),t.updateBookPageProperty("bookAuthors",a)}),[t]),b=Object(a.useCallback)((function(e){var n=e.currentTarget.dataset.index,a=Object(ee.a)(Object($.q)(t.bookAuthors));a.splice(+n,1),t.updateBookPageProperty("bookAuthors",a)}),[t]),p=Object(a.useCallback)((function(e){var n=e.currentTarget,a=n.dataset.index,i=Object(ee.a)(Object($.q)(t.bookAuthors));i.splice(+a,1,n.value),t.updateBookPageProperty("bookAuthors",i)}),[t]),u=Object(a.useCallback)((function(e){var n=e.currentTarget;t.updateBookPageProperty("bookSubject",n.value)}),[t]),d=Object(a.useCallback)((function(e){var n=e.currentTarget;t.updateBookPageProperty("bookPublisher",n.value)}),[t]);return Object(s.jsx)("div",{className:"modal-dialog modal-md",onClick:n,children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",children:"Book"}),Object(s.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o})]}),Object(s.jsxs)("div",{className:"modal-body",children:[Object(s.jsxs)("div",{className:"mb-3 row",children:[Object(s.jsx)("label",{htmlFor:"input-book-id",className:"col-sm-2 col-form-label",children:"id"}),Object(s.jsx)("div",{className:"col-sm-10",children:Object(s.jsx)("input",{type:"text",className:"form-control",id:"input-book-id",value:t.bookID,onInput:c})})]}),Object(s.jsxs)("div",{className:"mb-3 row",children:[Object(s.jsx)("label",{htmlFor:"input-book-title",className:"col-sm-2 col-form-label",children:"title"}),Object(s.jsx)("div",{className:"col-sm-10",children:Object(s.jsx)("input",{type:"text",className:"form-control",id:"input-book-title",value:t.bookTitle,onInput:l})})]}),Object(s.jsxs)("div",{className:"mb-3 row",children:[Object(s.jsx)("label",{htmlFor:"input-book-author",className:"col-sm-2 col-form-label",children:"author"}),Object(s.jsx)("div",{className:"col-sm-10",children:t.bookAuthors.map((function(e,n){return Object(s.jsxs)("div",{className:"input-group"+(n+1===t.bookAuthors.length?"":" mb-3"),children:[Object(s.jsx)("input",{type:"text",className:"form-control","data-index":n,value:e,onInput:p}),Object(s.jsx)("button",{className:"btn btn-outline-secondary d-flex justify-content-center align-items-center",type:"button","data-index":n,onClick:r,children:Object(s.jsx)(L,{name:"plus"})}),Object(s.jsx)("button",{className:"btn btn-outline-secondary d-flex justify-content-center align-items-center",type:"button","data-index":n,disabled:1===t.bookAuthors.length,onClick:b,children:Object(s.jsx)(L,{name:"minus"})})]},n)}))})]}),Object(s.jsxs)("div",{className:"mb-3 row",children:[Object(s.jsx)("label",{htmlFor:"input-book-subject",className:"col-sm-2 col-form-label",children:"subject"}),Object(s.jsxs)("div",{className:"col-sm-10",children:[Object(s.jsx)("input",{type:"text",className:"form-control",list:"dl-subject",id:"input-book-subject",value:t.bookSubject,onInput:u}),Object(s.jsxs)("datalist",{id:"dl-subject",children:[Object(s.jsx)("option",{value:"\u5c11\u5e74"}),Object(s.jsx)("option",{value:"\u5c11\u5973"}),Object(s.jsx)("option",{value:"\u9752\u5e74"}),Object(s.jsx)("option",{value:"\u540c\u4eba\u8a8c"}),Object(s.jsx)("option",{value:"\u6f2b\u753b"}),Object(s.jsx)("option",{value:"\u6210\u5e74\u30b3\u30df\u30c3\u30af"})]})]})]}),Object(s.jsxs)("div",{className:"mb-3 row",children:[Object(s.jsx)("label",{htmlFor:"input-book-publisher",className:"col-sm-2 col-form-label",children:"publisher"}),Object(s.jsxs)("div",{className:"col-sm-10",children:[Object(s.jsx)("input",{type:"text",className:"form-control",list:"dl-publisher",id:"input-book-publisher",value:t.bookPublisher,onInput:d}),Object(s.jsxs)("datalist",{id:"dl-publisher",children:[Object(s.jsx)("option",{value:"KADOKAWA"}),Object(s.jsx)("option",{value:"\u8b1b\u8ac7\u793e"}),Object(s.jsx)("option",{value:"\u96c6\u82f1\u793e"}),Object(s.jsx)("option",{value:"\u5c0f\u5b66\u9928"}),Object(s.jsx)("option",{value:"\u5c0f\u5b66\u9928\u96c6\u82f1\u793e\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3"}),Object(s.jsx)("option",{value:"\u5c11\u5e74\u753b\u5831\u793e"}),Object(s.jsx)("option",{value:"\u677e\u6587\u9928"}),Object(s.jsx)("option",{value:"\u65e5\u672c\u6587\u82b8\u793e"}),Object(s.jsx)("option",{value:"\u767d\u6cc9\u793e"}),Object(s.jsx)("option",{value:"\u82b3\u6587\u793e"}),Object(s.jsx)("option",{value:"\u30ef\u30cb\u30de\u30ac\u30b8\u30f3\u793e"}),Object(s.jsx)("option",{value:"FAKKU"})]})]})]})]})]})})})),Ve=function(){var e=i.a.useContext(i.a.createContext(xe.ui)),t=Object(a.useState)(!1),n=Object(_.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)([]),r=Object(_.a)(l,2),b=r[0],p=r[1],u=Object(a.useState)(""),d=Object(_.a)(u,2),m=d[0],j=d[1],h=b.length-1,x=Object(a.useCallback)((function(e){e.stopPropagation()}),[]),g=Object(a.useCallback)((function(){e.toggleContentVisible()}),[e]),O=Object(a.useCallback)((function(){if(o){var e=[];m.split("\n").forEach((function(t){var n=t.split(". "),a=Object(Be.a)(n),i=a[0],o=a.slice(1);!isNaN(i)&&o.length?e.push({pageIndex:Math.abs(+i-1),title:o.join("")}):e.push({pageIndex:998,title:i})})),p(e)}else{var t=b.map((function(e){return(e.pageIndex||0)+1+". "+e.title})).join("\n");j(t)}c(!o)}),[b,o,m]),f=Object(a.useCallback)((function(e){var t=+e.currentTarget.dataset.index,n=e.currentTarget.value,a=ae(b);a[t].pageIndex=+n-1||0,p(a)}),[b]),v=Object(a.useCallback)((function(e){var t=+e.currentTarget.dataset.index,n=e.currentTarget.value,a=ae(b);a[t].title=n,p(a)}),[b]),y=Object(a.useCallback)((function(e){var t=+e.currentTarget.dataset.index,n=ae(b),a=n[t];n.splice(t,1,a,{pageIndex:0,title:""}),p(n)}),[b]),k=Object(a.useCallback)((function(e){var t=+e.currentTarget.dataset.index,n=ae(b);n.splice(t,1),p(n)}),[b]),w=Object(a.useCallback)((function(){var e=ae(b);e.sort((function(e,t){return isNaN(e.pageIndex)||isNaN(t.pageIndex)?1:e.pageIndex-t.pageIndex})),p(e)}),[b]),N=Object(a.useCallback)((function(e){e.currentTarget.select()}),[]),P=Object(a.useCallback)((function(e){j(e.currentTarget.value)}),[]),C=Object(a.useCallback)((function(){xe.contents.updateList(b),e.toggleContentVisible()}),[e,b]);return Object(a.useEffect)((function(){e.modalContentVisible&&p(ae(Object($.q)(xe.contents.list)))}),[e.modalContentVisible]),Object(s.jsx)("div",{className:"modal-dialog modal-lg",onClick:x,children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",children:"Content"}),Object(s.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:g})]}),Object(s.jsx)("div",{className:"modal-body",children:o?Object(s.jsx)("textarea",{cols:30,rows:10,placeholder:"eg: \\n 1. cover \\n 2. xxxx \\n 3.xxxx",className:"form-control",style:{resize:"none"},value:m,onInput:P}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"row mb-2",children:[Object(s.jsx)("div",{className:"col-2",children:Object(s.jsx)("h6",{children:"index"})}),Object(s.jsx)("div",{className:"col-6",children:Object(s.jsx)("h6",{children:"title"})}),Object(s.jsx)("div",{className:"col-auto"})]}),b.map((function(e,t){return Object(s.jsxs)("div",{className:"row mb-"+(t===h?"2":"4"),children:[Object(s.jsx)("div",{className:"col-2",children:Object(s.jsx)("input",{type:"number",className:"form-control","data-index":t,value:(e.pageIndex||0)+1,onFocus:N,onInput:f})}),Object(s.jsx)("div",{className:"col-8",children:Object(s.jsx)("input",{type:"text",className:"form-control","data-index":t,value:e.title,onInput:v})}),Object(s.jsx)("div",{className:"col-auto",children:Object(s.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:[Object(s.jsx)("button",{type:"button",className:"btn btn btn-secondary d-flex justify-content-center align-items-center","data-index":t,onClick:y,children:Object(s.jsx)(L,{name:"plus"})}),Object(s.jsx)("button",{type:"button",className:"btn btn btn-secondary d-flex justify-content-center align-items-center","data-index":t,onClick:k,children:Object(s.jsx)(L,{name:"minus"})})]})})]},t)}))]})}),Object(s.jsxs)("div",{className:"modal-footer justify-content-start",children:[Object(s.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:O,children:o?"form mode":"plain text mode"}),Object(s.jsx)("button",{type:"button",disabled:o,className:"btn btn-outline-primary me-auto",onClick:w,children:"sort"}),Object(s.jsx)("button",{type:"button",disabled:o,className:"btn btn-primary",onClick:C,children:"Save"})]})]})})},Ae=function(e){var t=Object(a.useCallback)((function(){e.onClick(e.value)}),[e]),n=e.value===e.current?"btn btn-sm btn-primary me-2":"btn btn-sm btn-outline-primary me-2";return Object(s.jsx)("button",{type:"button",className:n,onClick:t,children:e.label})},Fe=Object(K.a)((function(){var e=i.a.useContext(i.a.createContext(xe.ui)),t=i.a.useContext(i.a.createContext(xe.book)),n=Object(a.useCallback)((function(e){e.stopPropagation()}),[]),o=Object(a.useCallback)((function(){e.togglePageVisible()}),[e]),c=Object(a.useCallback)((function(e){t.updateBookPageProperty("pageSize",[+e.currentTarget.value||1,t.pageSize[1]])}),[t]),l=Object(a.useCallback)((function(e){t.updateBookPageProperty("pageSize",[t.pageSize[0],+e.currentTarget.value||1])}),[t]),r=Object(a.useCallback)((function(){t.updateBookPageProperty("pageSize",[t.pageSize[1],t.pageSize[0]])}),[t]),b=Object(a.useCallback)((function(e){var n=Me[e];t.updateBookPageProperty("pageSize",n())}),[t]),p=Object(a.useCallback)((function(e){t.updateBookPageProperty("pagePosition",e)}),[t]),u=Object(a.useCallback)((function(e){t.updateBookPageProperty("pageShow",e)}),[t]),d=Object(a.useCallback)((function(e){t.updateBookPageProperty("pageFit",e)}),[t]),m=Object(a.useCallback)((function(e){t.updateBookPageProperty("pageDirection",e)}),[t]);return Object(s.jsx)("div",{className:"modal-dialog modal-md",onClick:n,children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",children:"Page"}),Object(s.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:o})]}),Object(s.jsxs)("div",{className:"modal-body",children:[Object(s.jsxs)("div",{className:"mb-2 row",children:[Object(s.jsx)("label",{className:"col-3 col-form-label text-end",children:"size"}),Object(s.jsx)("div",{className:"col-9 d-flex align-items-center",children:Object(s.jsxs)("div",{className:"row justify-content-between",children:[Object(s.jsx)("div",{className:"col-5 d-flex align-items-center",children:Object(s.jsxs)("div",{className:"input-group input-group-sm",children:[Object(s.jsx)("span",{className:"input-group-text",children:"w"}),Object(s.jsx)("input",{type:"number",className:"form-control",min:"1",max:"9999",value:t.pageSize[0],onInput:c})]})}),Object(s.jsx)("div",{className:"col-2 d-flex justify-content-center",children:Object(s.jsx)("button",{type:"button",className:"btn btn-sm btn-secondary d-flex justify-content-center align-items-center",onClick:r,children:Object(s.jsx)(L,{name:"cycle"})})}),Object(s.jsx)("div",{className:"col-5 d-flex align-items-center",children:Object(s.jsxs)("div",{className:"input-group input-group-sm",children:[Object(s.jsx)("span",{className:"input-group-text",children:"h"}),Object(s.jsx)("input",{type:"number",className:"form-control",min:"1",max:"9999",value:t.pageSize[1],onInput:l})]})})]})})]}),Object(s.jsxs)("div",{className:"mb-2 row",children:[Object(s.jsx)("div",{className:"col-3"}),Object(s.jsxs)("div",{className:"col-9 d-flex align-items-center",children:[Object(s.jsx)(Ae,{current:"x",value:"B4",label:"B4",onClick:b}),Object(s.jsx)(Ae,{current:"x",value:"B5",label:"B5",onClick:b}),Object(s.jsx)(Ae,{current:"x",value:"A4",label:"A4",onClick:b}),Object(s.jsx)(Ae,{current:"x",value:"A5",label:"A5",onClick:b}),Object(s.jsx)(Ae,{current:"x",value:"CG 16:9",label:"CG 16:9",onClick:b}),Object(s.jsx)(Ae,{current:"x",value:"CG 16:10",label:"CG 16:10",onClick:b})]})]}),Object(s.jsxs)("div",{className:"mb-2 row",children:[Object(s.jsx)("label",{htmlFor:"input-page-position",className:"col-3 col-form-label text-end",children:"position"}),Object(s.jsxs)("div",{className:"col-9 d-flex align-items-center",children:[Object(s.jsx)(Ae,{current:t.pagePosition,value:"center",label:"center",onClick:p}),Object(s.jsx)(Ae,{current:t.pagePosition,value:"between",label:"between",onClick:p})]})]}),Object(s.jsxs)("div",{className:"mb-2 row",children:[Object(s.jsx)("label",{className:"col-3 col-form-label text-end",children:"show"}),Object(s.jsxs)("div",{className:"col-9 d-flex align-items-center",children:[Object(s.jsx)(Ae,{current:t.pageShow,value:"two",label:"two pages",onClick:u}),Object(s.jsx)(Ae,{current:t.pageShow,value:"one",label:"one page",onClick:u})]})]}),Object(s.jsxs)("div",{className:"mb-2 row",children:[Object(s.jsx)("label",{className:"col-3 col-form-label text-end",children:"fit"}),Object(s.jsxs)("div",{className:"col-9 d-flex align-items-center",children:[Object(s.jsx)(Ae,{current:t.pageFit,value:"stretch",label:"stretch",onClick:d}),Object(s.jsx)(Ae,{current:t.pageFit,value:"fit",label:"fit",onClick:d}),Object(s.jsx)(Ae,{current:t.pageFit,value:"fill",label:"fill",onClick:d})]})]}),Object(s.jsxs)("div",{className:"mb-2 row",children:[Object(s.jsx)("label",{className:"col-3 col-form-label text-end",children:"direction"}),Object(s.jsxs)("div",{className:"col-9 d-flex align-items-center",children:[Object(s.jsx)(Ae,{current:t.pageDirection,value:"right",label:"right (japanese style)",onClick:m}),Object(s.jsx)(Ae,{current:t.pageDirection,value:"left",label:"left",onClick:m})]})]})]})]})})})),Ee=Object(K.a)((function(){var e=i.a.useContext(i.a.createContext(xe.ui));return e.modalAnalyzeVisible||e.modalBookVisible||e.modalContentVisible||e.modalPageVisible?Object(s.jsx)("div",{className:"modal-backdrop fade show"},"modal-backdrop"):null})),Le=Object(K.a)((function(){var e=i.a.useContext(i.a.createContext(xe.ui));return e.modalAnalyzeVisible||e.modalBookVisible||e.modalContentVisible||e.modalPageVisible?Object(s.jsxs)("div",{id:"modal",className:"modal fade show",style:{display:"block"},children:[e.modalAnalyzeVisible?Object(s.jsx)(Se,{}):null,e.modalBookVisible?Object(s.jsx)(Te,{}):null,e.modalContentVisible?Object(s.jsx)(Ve,{}):null,e.modalPageVisible?Object(s.jsx)(Fe,{}):null]}):null}));function Re(e){var t=document.createElement("div"),n=function(){return c.a.createPortal(e,document.body)};c.a.render(Object(s.jsx)(n,{}),t)}Re(Object(s.jsx)(ye,{})),Re(Object(s.jsx)(ze,{})),Re(Object(s.jsx)(Le,{})),Re(Object(s.jsx)(Ee,{})),l()}},[[40,1,2]]]);
//# sourceMappingURL=main.3643098a.chunk.js.map