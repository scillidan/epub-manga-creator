{"version":3,"sources":["reportWebVitals.ts","components/icon.tsx","utils/get-uuid.ts","store/book.ts","store/ui.ts","store/contents.ts","store/blobs.ts","template/container.xml.js","template/mimetype","template/page.xhtml.js","template/fixed-layout-jp.css.js","template/standard.opf.js","template/navigation-documents.xhtml.js","store/main.ts","components/header.tsx","components/main.tsx","utils/deep-clone.js","components/modal/index.tsx","index.tsx"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","document","body","insertAdjacentHTML","Icon","props","className","xlinkHref","name","generateRandomUUID","uuid","i","String","Math","ceil","random","Store","makeAutoObservable","this","blobUUIDs","newPages","map","index","blobID","sticky","blank","pages","toJS","newPageItem1","newPageItem2","splice","key","value","Object","assign","targetIndex","pageItem","maxIndex","length","part1","slice","part2","filter","item","newPageItem","push","currentIndex","newSet","bookTitle","bookAuthors","bookSubject","bookPublisher","savedSets","observable","action","firstImport","fileName","modalBookVisible","modalContentVisible","modalPageVisible","selectedPageIndex","cloneState","list","indexMap","listIndex","call","pageIndex","contentItems","forEach","newIndexMap","originListIndex","contentItem","title","0","getImageWithBlobURL","blobURL","Promise","resolve","reject","image","Image","onerror","e","onload","src","formatBlobItem","blob","a","URL","createObjectURL","originImage","canvas","createElement","width","height","context","getContext","imageSmoothingQuality","drawImage","toBlob","thumbnailBlob","thumbnailURL","blobs","uuids","formatBlobs","all","console","error","alert","runInAction","getText","htmlToEscape","str","replace","$0","c","charCodeAt","r","join","getNumberStr","num","zeroCount","store","ui","Ui","book","Book","contents","Contents","storeBlobs","bookSets","JSON","parse","localStorage","getItem","contentSets","fileList","pushNewPage","switchIndex","selectPageIndex","updateList","updatePageItemIndex","blobItem","mime","type","w1","w2","canvas1","canvas2","ctx1","ctx2","splitPage","pageDirection","reverse","insertBlankPage","removePage","templateContainerXml","getTemplateContainerXml","templatePageXhtml","getTemplatePageXhtml","templateFixedLayoutJpCss","getTemplateFixedLayoutJpCss","templateStandardOpf","getTemplateStandardOpf","templateNavigationDocumentsXhtml","getTemplateNavigationDocumentsXhtml","Zip","JSZip","folder","keys","imageItemStr","pageItemStr","itemRefStr","spread","coverPosition","numStr","imageFileName","mimeType","unshift","viewPortWidth","pageSize","viewPortHeight","fitMode","pageFit","trim","file","RegExp","par","pagePosition","authorsStr","bookID","pageShow","Date","toISOString","generateAsync","anchor","objectURL","window","download","href","click","revokeObjectURL","autorun","setItem","stringify","PageControl","observer","onUseImageSizeToPage","useCallback","storeMain","updateBookPageProperty","onChangePageIndex","max","inputValue","prompt","parseInt","isNaN","replacePageIndex","onSetContentq","setPageIndexToTitle","currentTarget","dataset","onSplitPage","onRemovePage","confirm","disabled","blankPage","onClick","style","top","left","data-index","AcceptMap","zip","epub","MultipleAttrMap","blobToFile","theBlob","b","lastModifiedDate","React","useContext","createContext","inputRef","useRef","useState","inputType","setInputType","onClickToggleBookVisible","toggleBookVisible","onClickToggleContentVisible","toggleContentVisible","onClickTogglePageVisible","togglePageVisible","onClickImport","newType","current","handleGetFile","input","files","loadAsync","zipContent","promises","sort","filename","zipItem","dir","async","uint8Array","Array","from","Uint8Array","subarray","toString","Blob","importPageFromImages","onClickInsertBlankPage","onClickGenerate","generateBook","useLayoutEffect","setTimeout","id","data-type","ref","accept","multiple","onChange","display","PageCard","storeUI","storeBook","storeContent","onClickImage","pageItemIndex","preserveAspectRatio","imageFocus","viewBox","x","y","fill","pageBackgroundColor","stroke","strokeWidth","role","DoublePageCard","leftSidePageIndex","rightSidePageIndex","leftSidePage","rightSidePage","computedStyle","getComputedStyle","documentElement","CARD_BOX_WIDTH","getPropertyValue","CARD_BOX_MARGIN","mainRef","showPages","setShowPages","pageResizeCallback","pageWidth","clientWidth","boxCountInOneRow","floor","rowCount","j","len","getElementById","useEffect","useMount","addEventListener","row","frameBorder","scrolling","deepClone","target","newObj","val","PAGE_SIZE","KeywordPicker","keywords","ModalBook","setsSeletRef","setFileName","setKeywords","selectedSetIndex","setSelectedSetIndex","keywordsLength","onClickModal","stopPropagation","onClickClose","onClickAnalyze","reg","suffix0","exec","suffix1","suffix2","suffix3","suffix","author","match","pop","indexOf","titleAndPrefix","onChangeFileName","log","onChangeBookID","eventTarget","onChangeBookTitle","onAddAuthor","newValue","onRemoveAuthor","onChangeBookAuthors","onChangeBookSubject","onChangeBookPublisher","onChangeTitleFromPicker","onChangeAuthorsFromPicker","authors","onChangePublisherFromPicker","onClickModalBody","onClickSaveSet","saveBookInfoToSet","onClickRemoveSet","removeBookInfoSet","onApplySet","applySet","firstUploaded","data-bs-dismiss","aria-label","htmlFor","onInput","defaultChecked","set","ModalContents","plainMode","setPlainMode","tempList","setTempList","textAreaInput","setTextAreaInput","togglePlainMode","split","abs","onInputPageIndex","newList","onInputTitle","onClickAdd","onClickRemove","onSortList","onFocusNumberInput","select","onTextareaInput","onSave","saveSet","removeSet","cols","rows","placeholder","resize","onFocus","ButtonRadio","label","ModalPage","onChangePageWidth","onChangePageHeight","onSwitchPageSize","onChangeSizeWithDefaultValue","func","onChangePagePosition","onChangePageShow","onChangePageFit","onChangePageDirection","onChangeCoverPosition","min","ModalBackDrop","modalVisible","hideModal","renderComponent","reactComponent","container","Portal","ReactDOM","createPortal","render"],"mappings":"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","file":"static/js/main.1052fecb.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const iconString = `<svg aria-hidden=\"true\" style=\"position: absolute; width: 0; height: 0; overflow: hidden;\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<defs>\n<symbol id=\"icon-price-tag\" viewBox=\"0 0 20 20\"><path d=\"M19.388 0.405c-0.111-0.314-0.454-0.48-0.769-0.371s-0.481 0.455-0.372 0.77c0.929 2.67-0.915 4.664-2.321 5.732l-0.568-0.814c-0.191-0.273-0.618-0.5-0.95-0.504l-3.188 0.014c-0.332-0.006-0.825 0.146-1.097 0.338l-9.394 6.587c-0.455 0.32-0.565 0.947-0.247 1.404l4.269 6.108c0.32 0.455 0.831 0.4 1.287 0.082l9.394-6.588c0.27-0.191 0.582-0.603 0.692-0.918l0.998-3.145c0.11-0.314 0.043-0.793-0.148-1.066l-0.346-0.496c1.888-1.447 3.848-4.004 2.76-7.133zM15.017 9.763c-0.727 0.51-1.731 0.332-2.24-0.396-0.511-0.73-0.333-1.734 0.395-2.246 0.578-0.405 1.328-0.376 1.868 0.017-0.272 0.164-0.459 0.26-0.494 0.275-0.301 0.143-0.43 0.504-0.288 0.805 0.104 0.219 0.321 0.348 0.547 0.348 0.086 0 0.174-0.020 0.257-0.059 0.194-0.092 0.402-0.201 0.619-0.33 0.097 0.594-0.139 1.217-0.664 1.586z\"></path></symbol>\n<symbol id=\"icon-heart\" viewBox=\"0 0 20 20\"><path d=\"M17.19 4.155c-1.672-1.534-4.383-1.534-6.055 0l-1.135 1.042-1.136-1.042c-1.672-1.534-4.382-1.534-6.054 0-1.881 1.727-1.881 4.52 0 6.246l7.19 6.599 7.19-6.599c1.88-1.726 1.88-4.52 0-6.246z\"></path></symbol>\n<symbol id=\"icon-star\" viewBox=\"0 0 20 20\"><path d=\"M10 1.3l2.388 6.722h6.412l-5.232 3.948 1.871 6.928-5.439-4.154-5.438 4.154 1.87-6.928-5.233-3.948h6.412l2.389-6.722z\"></path></symbol>\n<symbol id=\"icon-save\" viewBox=\"0 0 20 20\"><path d=\"M15.173 2h-11.173c-1.101 0-2 0.9-2 2v12c0 1.1 0.899 2 2 2h12c1.101 0 2-0.9 2-2v-10.873l-2.827-3.127zM14 8c0 0.549-0.45 1-1 1h-6c-0.55 0-1-0.451-1-1v-5h8v5zM13 4h-2v4h2v-4z\"></path></symbol>\n<symbol id=\"icon-retweet\" viewBox=\"0 0 20 20\"><path d=\"M5 13v-5h2l-3.5-4-3.5 4h2v6c0 1.104 0.895 2 2 2h9.482l-2.638-3h-5.844zM9.156 7l-2.638-3h9.482c1.104 0 2 0.897 2 2v6h2l-3.5 4-3.5-4h2v-5h-5.844z\"></path></symbol>\n<symbol id=\"icon-notification\" viewBox=\"0 0 20 20\"><path d=\"M15 8.38v8.62h-12v-12h8.62c-0.073-0.322-0.12-0.655-0.12-1s0.047-0.678 0.12-1h-8.62c-1.102 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12c1.1 0 2-0.9 2-2v-8.62c-0.322 0.073-0.655 0.12-1 0.12s-0.678-0.047-1-0.12zM16 1c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3z\"></path></symbol>\n<symbol id=\"icon-chevron-down\" viewBox=\"0 0 20 20\"><path d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path></symbol>\n<symbol id=\"icon-chevron-left\" viewBox=\"0 0 20 20\"><path d=\"M12.452 4.516c0.446 0.436 0.481 1.043 0 1.576l-3.747 3.908 3.747 3.908c0.481 0.533 0.446 1.141 0 1.574-0.445 0.436-1.197 0.408-1.615 0-0.418-0.406-4.502-4.695-4.502-4.695-0.223-0.217-0.335-0.502-0.335-0.787s0.112-0.57 0.335-0.789c0 0 4.084-4.287 4.502-4.695s1.17-0.436 1.615 0z\"></path></symbol>\n<symbol id=\"icon-chevron-right\" viewBox=\"0 0 20 20\"><path d=\"M9.163 4.516c0.418 0.408 4.502 4.695 4.502 4.695 0.223 0.219 0.335 0.504 0.335 0.789s-0.112 0.57-0.335 0.787c0 0-4.084 4.289-4.502 4.695-0.418 0.408-1.17 0.436-1.615 0-0.446-0.434-0.481-1.041 0-1.574l3.747-3.908-3.747-3.908c-0.481-0.533-0.446-1.141 0-1.576s1.197-0.409 1.615 0z\"></path></symbol>\n<symbol id=\"icon-chevron-up\" viewBox=\"0 0 20 20\"><path d=\"M15.484 12.452c-0.436 0.446-1.043 0.481-1.576 0l-3.908-3.747-3.908 3.747c-0.533 0.481-1.141 0.446-1.574 0-0.436-0.445-0.408-1.197 0-1.615 0.406-0.418 4.695-4.502 4.695-4.502 0.217-0.223 0.502-0.335 0.787-0.335s0.57 0.112 0.789 0.335c0 0 4.287 4.084 4.695 4.502s0.436 1.17 0 1.615z\"></path></symbol>\n<symbol id=\"icon-minus\" viewBox=\"0 0 20 20\"><path d=\"M16 10c0 0.553-0.048 1-0.601 1h-10.798c-0.552 0-0.601-0.447-0.601-1s0.049-1 0.601-1h10.799c0.552 0 0.6 0.447 0.6 1z\"></path></symbol>\n<symbol id=\"icon-plus\" viewBox=\"0 0 20 20\"><path d=\"M16 10c0 0.553-0.048 1-0.601 1h-4.399v4.399c0 0.552-0.447 0.601-1 0.601s-1-0.049-1-0.601v-4.399h-4.399c-0.552 0-0.601-0.447-0.601-1s0.049-1 0.601-1h4.399v-4.399c0-0.553 0.447-0.601 1-0.601s1 0.048 1 0.601v4.399h4.399c0.553 0 0.601 0.447 0.601 1z\"></path></symbol>\n<symbol id=\"icon-tools\" viewBox=\"0 0 20 20\"><path d=\"M3.135 6.89c0.933-0.725 1.707-0.225 2.74 0.971 0.116 0.135 0.272-0.023 0.361-0.1 0.088-0.078 1.451-1.305 1.518-1.361 0.066-0.059 0.146-0.169 0.041-0.292-0.107-0.123-0.494-0.625-0.743-0.951-1.808-2.365 4.946-3.969 3.909-3.994-0.528-0.014-2.646-0.039-2.963-0.004-1.283 0.135-2.894 1.334-3.705 1.893-1.061 0.726-1.457 1.152-1.522 1.211-0.3 0.262-0.048 0.867-0.592 1.344-0.575 0.503-0.934 0.122-1.267 0.414-0.165 0.146-0.627 0.492-0.759 0.607-0.133 0.117-0.157 0.314-0.021 0.471 0 0 1.264 1.396 1.37 1.52 0.105 0.122 0.391 0.228 0.567 0.071 0.177-0.156 0.632-0.553 0.708-0.623 0.078-0.066-0.050-0.861 0.358-1.177zM8.843 7.407c-0.12-0.139-0.269-0.143-0.397-0.029l-1.434 1.252c-0.113 0.1-0.129 0.283-0.027 0.4l8.294 9.439c0.194 0.223 0.53 0.246 0.751 0.053l0.97-0.813c0.222-0.195 0.245-0.533 0.052-0.758l-8.209-9.544zM19.902 3.39c-0.074-0.494-0.33-0.391-0.463-0.182-0.133 0.211-0.721 1.102-0.963 1.506-0.24 0.4-0.832 1.191-1.934 0.41-1.148-0.811-0.749-1.377-0.549-1.758 0.201-0.383 0.818-1.457 0.907-1.59 0.089-0.135-0.015-0.527-0.371-0.363s-2.523 1.025-2.823 2.26c-0.307 1.256 0.257 2.379-0.85 3.494l-1.343 1.4 1.349 1.566 1.654-1.57c0.394-0.396 1.236-0.781 1.998-0.607 1.633 0.369 2.524-0.244 3.061-1.258 0.482-0.906 0.402-2.814 0.327-3.308zM2.739 17.053c-0.208 0.209-0.208 0.549 0 0.758l0.951 0.93c0.208 0.209 0.538 0.121 0.746-0.088l4.907-4.824-1.503-1.714-5.101 4.938z\"></path></symbol>\n<symbol id=\"icon-bookmark\" viewBox=\"0 0 20 20\"><path d=\"M14 2v17l-4-4-4 4v-17c0-0.553 0.585-1.020 1-1h6c0.689-0.020 1 0.447 1 1z\"></path></symbol>\n<symbol id=\"icon-bookmarks\" viewBox=\"0 0 20 20\"><path d=\"M15 0h-4c-0.553 0-1 0.447-1 1l0.023 0.222c1.102 0 2 0.897 2 2v11.359l0.977-1.181 3 3.6v-16c0-0.553-0.447-1-1-1zM9.023 3h-4.023c-0.553 0-1 0.447-1 1v16l3-3.6 3 3.6v-16c0-0.553-0.424-1-0.977-1z\"></path></symbol>\n<symbol id=\"icon-document\" viewBox=\"0 0 20 20\"><path d=\"M16 1h-12c-0.553 0-1 0.447-1 1v16c0 0.552 0.447 1 1 1h12c0.553 0 1-0.448 1-1v-16c0-0.552-0.447-1-1-1zM15 17h-10v-14h10v14z\"></path></symbol>\n<symbol id=\"icon-upload\" viewBox=\"0 0 20 20\"><path d=\"M8 12h4v-6h3l-5-5-5 5h3v6zM19.338 13.532c-0.21-0.224-1.611-1.723-2.011-2.114-0.265-0.259-0.644-0.418-1.042-0.418h-1.757l3.064 2.994h-3.544c-0.102 0-0.194 0.052-0.24 0.133l-0.816 1.873h-5.984l-0.816-1.873c-0.046-0.081-0.139-0.133-0.24-0.133h-3.544l3.063-2.994h-1.756c-0.397 0-0.776 0.159-1.042 0.418-0.4 0.392-1.801 1.891-2.011 2.114-0.489 0.521-0.758 0.936-0.63 1.449l0.561 3.074c0.128 0.514 0.691 0.936 1.252 0.936h16.312c0.561 0 1.124-0.422 1.252-0.936l0.561-3.074c0.126-0.513-0.142-0.928-0.632-1.449z\"></path></symbol>\n<symbol id=\"icon-cross\" viewBox=\"0 0 20 20\"><path d=\"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z\"></path></symbol>\n<symbol id=\"icon-list\" viewBox=\"0 0 20 20\"><path d=\"M14.4 9h-5.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h5.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM16.4 14h-7.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h7.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM8.6 6h7.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1h-7.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1zM5.4 9h-1.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h1.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM5.4 14h-1.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h1.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM5.4 4h-1.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h1.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1z\"></path></symbol>\n<symbol id=\"icon-menu\" viewBox=\"0 0 20 20\"><path d=\"M16.4 9h-12.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h12.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM16.4 13h-12.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h12.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM3.6 7h12.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1h-12.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1z\"></path></symbol>\n<symbol id=\"icon-ruler\" viewBox=\"0 0 20 20\"><path d=\"M14.249 0.438l-13.811 13.813c-0.584 0.584-0.584 1.538 0.002 2.124l3.185 3.187c0.584 0.584 1.541 0.586 2.124 0.002l13.813-13.813c0.584-0.585 0.584-1.541 0-2.125l-3.186-3.188c-0.587-0.586-1.542-0.583-2.127 0zM3.929 15.312l-0.759 0.759-1.896-1.897 0.759-0.759 1.896 1.897zM6.965 15.312l-0.759 0.759-3.415-3.415 0.759-0.76 3.415 3.416zM6.965 12.276l-0.759 0.759-1.898-1.896 0.76-0.76 1.897 1.897zM8.483 10.758l-0.759 0.759-1.896-1.896 0.759-0.76 1.896 1.897zM11.518 10.758l-0.759 0.759-3.414-3.414 0.759-0.759 3.414 3.414zM11.518 7.723l-0.759 0.759-1.896-1.896 0.759-0.759 1.896 1.896zM13.036 6.206l-0.759 0.759-1.897-1.897 0.759-0.759 1.897 1.897zM16.072 6.206l-0.76 0.759-3.414-3.415 0.759-0.76 3.415 3.416zM16.071 3.171l-0.759 0.759-1.896-1.898 0.759-0.758 1.896 1.897z\"></path></symbol>\n<symbol id=\"icon-scissors\" viewBox=\"0 0 20 20\"><path d=\"M8.38 5.59c0-2.038-1.652-3.69-3.69-3.69s-3.69 1.652-3.69 3.69c0 2.038 1.652 3.69 3.69 3.69 0.96 0 1.826-0.376 2.483-0.976l1.827 1.687 0.012 0.009-0.004 0.003-1.836 1.693c-0.656-0.6-1.522-0.976-2.482-0.976-2.038 0-3.69 1.652-3.69 3.69s1.652 3.69 3.69 3.69 3.69-1.652 3.69-3.69c0-0.297-0.044-0.582-0.111-0.858l2.844-1.991 4.127 3.065c2.212 1.549 3.76-0.663 3.76-0.663l-10.731-7.515c0.066-0.276 0.111-0.561 0.111-0.858zM4.69 7.39c-0.994 0-1.8-0.806-1.8-1.8s0.806-1.8 1.8-1.8 1.8 0.806 1.8 1.8-0.806 1.8-1.8 1.8zM4.69 16.21c-0.994 0-1.8-0.806-1.8-1.8s0.806-1.8 1.8-1.8 1.8 0.806 1.8 1.8-0.806 1.8-1.8 1.8zM19 6.038c0 0-1.548-2.212-3.76-0.663l-3.205 2.235 2.354 1.648 4.611-3.22z\"></path></symbol>\n<symbol id=\"icon-swap\" viewBox=\"0 0 20 20\"><path d=\"M14 5h-10v-2l-4 3.5 4 3.5v-2h10v-3zM20 13.5l-4-3.5v2h-10v3h10v2l4-3.5z\"></path></symbol>\n<symbol id=\"icon-install\" viewBox=\"0 0 20 20\"><path d=\"M19.059 10.898l-3.171-7.927c-0.234-0.587-0.802-0.971-1.434-0.971h-2.434l0.38 4.065h2.7l-5.1 4.228-5.1-4.228h2.7l0.38-4.065h-2.434c-0.632 0-1.2 0.384-1.434 0.971l-3.171 7.927c-0.288 0.721-0.373 1.507-0.246 2.272l0.59 3.539c0.124 0.745 0.768 1.291 1.523 1.291h14.383c0.755 0 1.399-0.546 1.523-1.291l0.59-3.539c0.129-0.765 0.044-1.551-0.245-2.272zM16.959 15.245c-0.072 0.436-0.449 0.755-0.891 0.755h-12.136c-0.442 0-0.819-0.319-0.891-0.755l-0.365-2.193c-0.093-0.551 0.332-1.052 0.891-1.052h12.867c0.558 0 0.983 0.501 0.891 1.052l-0.366 2.193z\"></path></symbol>\n<symbol id=\"icon-book\" viewBox=\"0 0 20 20\"><path d=\"M17 5.95v10.351c0 0.522-0.452 0.771-1 1.16-0.44 0.313-1-0.075-1-0.587 0 0 0-9.905 0-10.114 0-0.211-0.074-0.412-0.314-0.535s-7.738-4.065-7.738-4.065c-0.121-0.045-0.649-0.378-1.353-0.016-0.669 0.344-1.033 0.718-1.126 0.894l8.18 4.482c0.217 0.114 0.351 0.29 0.351 0.516v10.802c0 0.23-0.142 0.476-0.369 0.585-0.104 0.052-0.219 0.077-0.333 0.077-0.135 0-0.271-0.033-0.386-0.104-0.215-0.131-7.774-4.766-8.273-5.067-0.24-0.144-0.521-0.439-0.527-0.658l-0.112-10.286c0-0.198-0.023-0.547 0.289-1.032 0.697-1.084 3.129-2.317 4.36-1.678l8.999 4.555c0.217 0.112 0.352 0.336 0.352 0.72z\"></path></symbol>\n<symbol id=\"icon-cycle\" viewBox=\"0 0 20 20\"><path d=\"M5.516 14.224c-2.262-2.432-2.222-6.244 0.128-8.611 0.962-0.969 2.164-1.547 3.414-1.736l-0.069-2.077c-1.755 0.213-3.452 0.996-4.797 2.351-3.149 3.17-3.187 8.289-0.123 11.531l-1.741 1.752 5.51 0.301-0.015-5.834-2.307 2.323zM12.163 2.265l0.015 5.834 2.307-2.322c2.262 2.434 2.222 6.246-0.128 8.611-0.961 0.969-2.164 1.547-3.414 1.736l0.069 2.076c1.755-0.213 3.452-0.996 4.798-2.35 3.148-3.172 3.186-8.291 0.122-11.531l1.741-1.754-5.51-0.3z\"></path></symbol>\n<symbol id=\"icon-tag\" viewBox=\"0 0 20 20\"><path d=\"M18.662 5.521l-13.425 13.479 0.707-4.967-4.945 0.709 13.425-13.479c0.391-0.392 1.133-0.308 1.412 0l2.826 2.839c0.5 0.473 0.391 1.026 0 1.419z\"></path></symbol>\n<symbol id=\"icon-rocket\" viewBox=\"0 0 640 640\"><path d=\"M381.856 418.208c0 0 225.888-163.008 200.832-349.568-0.544-4.064-1.888-6.816-3.584-8.576-1.728-1.76-4.384-3.136-8.416-3.68-182.304-25.632-341.568 205.504-341.568 205.504-138.176-16.544-128.128 11.008-191.168 162.432-12.064 28.864 7.488 38.816 28.928 30.688 21.44-8.064 68.736-25.952 68.736-25.952l82.88 84.736c0 0-17.472 48.448-25.376 70.368-7.936 21.952 1.76 41.952 30.016 29.632 147.968-64.512 174.912-54.208 158.72-195.584zM414.144 228.896c-19.136-19.616-19.136-51.328 0-70.944 19.136-19.552 50.144-19.552 69.312 0 19.136 19.552 19.136 51.296 0 70.944-19.168 19.552-50.208 19.552-69.312 0z\"></path></symbol>\n</defs>\n</svg>`\n\ndocument.body.insertAdjacentHTML('afterbegin', iconString)\n\ntype IconProps = ({ name: string; className?: string })\n\nconst Icon = function(props: IconProps) {\n  return (\n    <svg className={\"icon \" + (props.className || '')}>\n      <use xlinkHref={'#icon-' + props.name}></use>\n    </svg>\n  )\n}\n\nexport default Icon","const generateRandomUUID = () => {\n  const char = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n\n  let uuid = \"\"\n  let i = 36\n\n  while (i-- > 0) {\n    if (i === 27 || i === 22 || i === 17 || i === 12) {\n      uuid = uuid + \"-\"\n    } else {\n      uuid = uuid + String(char[Math.ceil(Math.random() * 35)])\n    }\n  }\n\n  return uuid\n}\n\nexport default generateRandomUUID","import { action, makeAutoObservable, observable, toJS } from \"mobx\"\nimport uuid from 'utils/get-uuid'\n\nexport declare namespace StoreBook {\n  export interface PageItem {\n    index: number,\n    blobID: string\n    sticky: 'auto' | 'left' | 'right',\n    blank: boolean\n  }\n\n  export interface BookInfoSet {\n    bookTitle: string\n    bookAuthors: string[]\n    bookSubject: string\n    bookPublisher: string\n  }\n}\n\ntype BookPageProperty = 'bookID' | 'bookTitle' | 'bookAuthors' | 'bookSubject' | 'bookPublisher' | 'pageSize' | 'pagePosition' | 'pageShow' | 'pageFit' | 'pageBackgroundColor' | 'pageDirection' | 'coverPosition'\n\nclass Store {\n  @observable bookID: string = uuid()\n  @observable bookTitle: string = ''\n  @observable bookAuthors: string[] = ['']\n  @observable bookSubject: string = ''\n  @observable bookPublisher: string = ''\n\n  @observable pageSize: [number, number] = [250, 353]\n  @observable pagePosition: ('center' | 'between') = 'between'\n  @observable pageShow: ('two' | 'one') = 'two'\n  @observable pageFit: ('stretch' | 'fit' | 'fill') = 'stretch'\n  @observable pageBackgroundColor: ('white' | 'black') = 'white'\n  @observable pageDirection: ('right' | 'left') = 'right'\n  @observable coverPosition: ('first-page' | 'alone') = 'first-page'\n\n  @observable pages: StoreBook.PageItem[] = []\n  @observable savedSets: StoreBook.BookInfoSet[] = []\n\n  constructor() {\n    makeAutoObservable(this)\n  }\n\n  @action\n  pushNewPage(blobUUIDs: string[]) {\n    const newPages: StoreBook.PageItem[] = blobUUIDs.map((uuid, index) => ({\n      index,\n      blobID: uuid,\n      sticky: 'auto',\n      blank: false\n    }))\n\n    const pages = toJS(this.pages)\n    this.pages = [...pages, ...newPages]\n  }\n\n  splitPage(index: number, blobUUIDs: string[]) {\n    const pages = toJS(this.pages)\n\n    const newPageItem1: StoreBook.PageItem = {\n      index,\n      blobID: blobUUIDs[0],\n      sticky: 'auto',\n      blank: false\n    }\n    const newPageItem2: StoreBook.PageItem = {\n      index: -1,\n      blobID: blobUUIDs[1],\n      sticky: 'auto',\n      blank: false\n    }\n\n    pages.splice(index, 1, newPageItem1, newPageItem2)\n\n    this.pages = pages\n  }\n\n  @action\n  updateBookPageProperty(key: BookPageProperty, value: any) {\n    Object.assign(this, {\n      [key]: value\n    })\n  }\n\n  @action\n  removePage(index: number) {\n    const pages = toJS(this.pages)\n    pages.splice(index, 1)\n    this.pages = pages\n  }\n\n  @action\n  switchIndex(index: number, targetIndex: number) {\n    let pages: (StoreBook.PageItem | null)[] = toJS(this.pages)\n    const pageItem = pages[index]\n    const maxIndex = pages.length - 1\n\n    pages[index] = null\n    const part1 = pages.slice(0, targetIndex)\n    const part2 = pages.slice(targetIndex, maxIndex + 1)\n    pages = [...part1, pageItem, ...part2].filter(item => item)\n\n    this.pages = pages as StoreBook.PageItem[]\n  }\n\n  @action\n  updatePageItemIndex() {\n    const pages = toJS(this.pages)\n\n    this.pages = pages.map((pageItem: StoreBook.PageItem, i: number) => {\n      pageItem.index = i\n      return pageItem\n    })\n  }\n\n  @action\n  insertBlankPage(index: number) {\n    const pages = toJS(this.pages)\n    const maxIndex = pages.length - 1\n\n    const newPageItem: StoreBook.PageItem = {\n      index: -1,\n      blobID: '',\n      sticky: 'auto',\n      blank: true\n    }\n\n    if (index >= maxIndex) {\n      pages.push(newPageItem)\n    } else {\n      const currentIndex = index < 0 ? 0 : index\n      const pageItem = pages[currentIndex]\n      pages.splice(currentIndex, 1, newPageItem, pageItem)\n    }\n\n    this.pages = pages\n  }\n\n  @action\n  saveBookInfoToSet() {\n    const newSet = {\n      bookTitle: this.bookTitle,\n      bookAuthors: this.bookAuthors,\n      bookSubject: this.bookSubject,\n      bookPublisher: this.bookPublisher,\n    }\n\n    this.savedSets.push(newSet)\n  }\n\n  @action\n  removeBookInfoSet(index: number) {\n    const savedSets = toJS(this.savedSets)\n    savedSets.splice(index, 1)\n    this.savedSets = savedSets\n  }\n\n  @action\n  applySet(index: number) {\n    this.bookTitle = this.savedSets[index].bookTitle\n    this.bookAuthors = this.savedSets[index].bookAuthors\n    this.bookSubject = this.savedSets[index].bookSubject\n    this.bookPublisher = this.savedSets[index].bookPublisher\n  }\n}\n\nexport default Store","import { makeAutoObservable, observable, action } from \"mobx\"\n\nclass Store {\n  @observable modalBookVisible = false\n  @observable modalContentVisible = false\n  @observable modalPageVisible = false\n  @observable maxCardBoxCountInOneRow = 0\n  @observable selectedPageIndex: number | null = null\n  @observable fileName = ``\n\n  firstImport = true\n\n  constructor() {\n    makeAutoObservable(this)\n  }\n\n  @action\n  toggleBookVisible(fileName?: string) {\n    this.modalBookVisible = !this.modalBookVisible\n    if (fileName && this.firstImport) {\n      this.fileName = fileName\n    }\n  }\n\n  @action\n  firstUploaded() {\n    this.firstImport = false\n  }\n\n  @action\n  toggleContentVisible() {\n    this.modalContentVisible = !this.modalContentVisible\n  }\n\n  @action\n  togglePageVisible() {\n    this.modalPageVisible = !this.modalPageVisible\n  }\n\n  @action\n  hideModal() {\n    Object.assign(this, {\n      modalBookVisible: false,\n      modalPageVisible: false,\n    })\n  }\n\n  @action\n  selectPageIndex(index: number | null) {\n    if (index === null) {\n      this.selectedPageIndex = null\n    } else if (this.selectedPageIndex === index) {\n      this.selectedPageIndex = null\n    } else {\n      this.selectedPageIndex = index\n    }\n  }\n}\n\nexport default Store","import { action, makeAutoObservable, observable, toJS } from \"mobx\"\n\ninterface ContentItem {\n  pageIndex: number | null\n  title: string\n}\n\ninterface IndexMap { [pageIndex: string]: number }\n\nconst cloneState = function(this: Store) {\n  return {\n    list: toJS(this.list),\n    indexMap: toJS(this.indexMap)\n  }\n}\n\nclass Store {\n  @observable list: ContentItem[] = [{\n    pageIndex: 0,\n    title: '表紙'\n  }]\n  @observable indexMap: IndexMap = {\n     0: 0\n  }\n  @observable savedSets: { title: string; list: ContentItem[] }[] = []\n\n  constructor() {\n    makeAutoObservable(this)\n  }\n\n  @action\n  removeTitle(listIndex: number) {\n    const { list, indexMap } = cloneState.call(this)\n\n    if (list.length === 1) {\n      return\n    }\n\n    const item = list[listIndex]\n\n    list.splice(listIndex, 1)\n    if (item.pageIndex && (item.pageIndex in indexMap)) {\n      delete indexMap[item.pageIndex]\n    }\n\n    this.list = list\n    this.indexMap = indexMap\n  }\n\n  @action\n  updateList(contentItems: ContentItem[]) {\n    const indexMap: IndexMap = {}\n\n    contentItems.forEach((item, index) => {\n      if (item.pageIndex !== null) {\n        indexMap[item.pageIndex] = index\n      }\n    })\n\n    this.list = contentItems\n    this.indexMap = indexMap\n  }\n\n  @action\n  setPageIndexToTitle(listIndex: number, pageIndex: number) {\n    const { list, indexMap } = cloneState.call(this)\n\n    if (indexMap[pageIndex] && indexMap[pageIndex] === listIndex) {\n      return\n    }\n\n    const newIndexMap: IndexMap = {}\n    const originListIndex = pageIndex in indexMap ? indexMap[pageIndex] : null\n\n    if (originListIndex !== null) {\n      list[originListIndex].pageIndex = null\n    }\n\n    list[listIndex].pageIndex = pageIndex\n\n    list.forEach((contentItem: ContentItem, index: number) => {\n      if (contentItem.pageIndex !== null) {\n        newIndexMap[contentItem.pageIndex] = index\n      }\n    })\n\n    this.list = list\n    this.indexMap = newIndexMap\n  }\n\n  @action\n  removePageIndex(listIndex: number) {\n    const { list, indexMap } = cloneState.call(this)\n\n    const item = list[listIndex]\n    list[listIndex].pageIndex = null\n    delete indexMap[item.pageIndex as number]\n\n    this.list = list\n    this.indexMap = indexMap\n  }\n\n  @action\n  saveSet(title: string) {\n    this.savedSets.push({\n      title,\n      list: toJS(this.list)\n    })\n  }\n\n  @action\n  removeSet(index: number) {\n    const savedSets = toJS(this.savedSets)\n    savedSets.splice(index, 1)\n    this.savedSets = savedSets\n  }\n}\n\nexport default Store","import { action, makeAutoObservable, observable, runInAction } from \"mobx\"\n\nexport declare namespace StoreBlobs {\n  export interface ImageBlob {\n    blob: Blob\n    blobURL: string\n    thumbnailURL: string\n    originImage: HTMLImageElement\n  }\n}\n\nconst getImageWithBlobURL = (blobURL: string): Promise<HTMLImageElement> => new Promise<HTMLImageElement>((resolve, reject) => {\n  const image = new Image()\n  image.onerror = (e) => reject(e)\n  image.onload = (e) => {\n    resolve(image)\n  }\n  image.src = blobURL\n})\n\nconst formatBlobItem = async (blob: Blob) => {\n  const blobURL = URL.createObjectURL(blob)\n\n  const originImage = await getImageWithBlobURL(blobURL)\n\n  const canvas = document.createElement(\"canvas\")\n  if (originImage.width < originImage.height) {\n    canvas.width = originImage.width / originImage.height * 200\n    canvas.height = 200\n  } else if (originImage.width > originImage.height) {\n    canvas.width = 200\n    canvas.height = originImage.height / originImage.width * 200\n  } else {\n    canvas.width = 200\n    canvas.height = 200\n  }\n\n  const context = canvas.getContext('2d') as CanvasRenderingContext2D\n  context.imageSmoothingQuality = 'high'\n  context.drawImage(originImage, 0, 0, canvas.width, canvas.height)\n\n  const thumbnailBlob = await new Promise<Blob>(\n    (resolve, reject) => canvas.toBlob(\n      blob => blob ? resolve(blob) : reject()\n    )\n  )\n\n  const item: StoreBlobs.ImageBlob = {\n    blob,\n    blobURL,\n    thumbnailURL: URL.createObjectURL(thumbnailBlob),\n    originImage\n  }\n\n  return item\n}\n\nclass Store {\n  @observable blobs: ({[id: string]: StoreBlobs.ImageBlob}) = {}\n\n  constructor() {\n    makeAutoObservable(this)\n  }\n\n  @action\n  async push(blobs: Blob[], uuids: string[]) {\n    let formatBlobs: StoreBlobs.ImageBlob[] = []\n\n    try {\n      formatBlobs = await Promise.all(blobs.map(formatBlobItem))\n    } catch (err) {\n      console.error(err)\n      alert('错误\\nError')\n      return\n    }\n\n    runInAction(() => {\n      const blobs: ({[id: string]: StoreBlobs.ImageBlob}) = {}\n\n      uuids.forEach((uuid, index) => {\n        blobs[uuid] = formatBlobs[index]\n      })\n\n      // Object.assign(this.blobs, blobs)\n      this.blobs = {\n        ...this.blobs,\n        ...blobs\n      }\n    })\n  }\n}\n\nexport { Store }\nexport default new Store()","const getText = () => `<?xml version=\"1.0\"?>\n<container\n version=\"1.0\"\n xmlns=\"urn:oasis:names:tc:opendocument:xmlns:container\"\n>\n<rootfiles>\n<rootfile\n full-path=\"OEBPS/standard.opf\"\n media-type=\"application/oebps-package+xml\"\n/>\n</rootfiles>\n</container>`\n\nexport default getText","export default __webpack_public_path__ + \"static/media/mimetype.163d0a1c.bin\";","const getText = () => `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html>\n<html\n xmlns=\"http://www.w3.org/1999/xhtml\"\n xmlns:epub=\"http://www.idpf.org/2007/ops\"\n xml:lang=\"ja\"\n>\n<head>\n<meta charset=\"UTF-8\" />\n<title>{{title}}</title>\n<link rel=\"stylesheet\" type=\"text/css\" href=\"../style/fixed-layout-jp.css\"/>\n<meta name=\"viewport\" content=\"width={{width}}, height={{height}}\"/>\n</head>\n<body>\n<div class=\"main\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"\n xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n width=\"100%\" height=\"100%\" viewBox=\"0 0 {{width}} {{height}}\">\n{{image}}\n</svg>\n</div>\n</body>\n</html>`\n\nexport default getText","const getText = () =>`@charset \"UTF-8\";\n\nhtml,\nbody {\n    margin:    0;\n    padding:   0;\n    font-size: 0;\n}\nsvg {\n    margin:    0;\n    padding:   0;\n}\n`\n\nexport default getText","const getText = () => `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<package\n  xmlns=\"http://www.idpf.org/2007/opf\"\n  version=\"3.0\"\n  xml:lang=\"ja\"\n  unique-identifier=\"unique-id\"\n  prefix=\"rendition: http://www.idpf.org/vocab/rendition/#\n          epub-bundle-tool: https://wing-kai.github.io/epub-manga-creator/\n          ebpaj: http://www.ebpaj.jp/\n          fixed-layout-jp: http://www.digital-comic.jp/\n          ibooks: http://vocabulary.itunes.apple.com/rdf/ibooks/vocabulary-extensions-1.0/\"\n>\n\n<metadata xmlns:dc=\"http://purl.org/dc/elements/1.1/\">\n\n<!-- 作品名 -->\n<dc:title id=\"title\">{{title}}</dc:title>\n<meta refines=\"#title\" property=\"file-as\"></meta>\n\n<!-- 著者名 -->\n<!-- creator-list -->\n\n<dc:subject>{{subject}}</dc:subject>\n\n<!-- 出版社名 -->\n<dc:publisher id=\"publisher\">{{publisher}}</dc:publisher>\n<meta refines=\"#publisher\" property=\"file-as\"></meta>\n\n<!-- 言語 -->\n<dc:language>ja</dc:language>\n\n<!-- ファイルid -->\n<dc:identifier id=\"unique-id\">urn:uuid:{{uuid}}</dc:identifier>\n\n<!-- 更新日 -->\n<meta property=\"dcterms:modified\">{{createTime}}</meta>\n\n<!-- Fixed-Layout Documents指定 -->\n<meta property=\"rendition:layout\">pre-paginated</meta>\n<meta property=\"rendition:spread\">{{spread}}</meta>\n\n<!-- etc. -->\n<meta property=\"ibooks:specified-fonts\">true</meta>\n<meta property=\"ibooks:binding\">false</meta>\n<meta property=\"ebpaj:guide-version\">1.1</meta>\n<meta name=\"cover\" content=\"cover\"></meta>\n<meta name=\"original-resolution\" content=\"{{width}}x{{height}}\"/>\n<meta name=\"orientation-lock\" content=\"none\"/>\n\n<meta property=\"fixed-layout-jp:viewport\">width={{width}}, height={{height}}</meta>\n\n</metadata>\n\n<manifest>\n\n<!-- navigation -->\n<item media-type=\"application/xhtml+xml\" id=\"toc\" href=\"navigation-documents.xhtml\" properties=\"nav\"></item>\n\n<!-- style -->\n<item media-type=\"text/css\" id=\"fixed-layout-jp\" href=\"style/fixed-layout-jp.css\"></item>\n\n<!-- image -->\n<!-- item-image -->\n\n<!-- text -->\n<!-- item-xhtml -->\n\n</manifest>\n\n<spine{{direction}}>\n\n<!-- itemref-xhtml -->\n\n</spine>\n\n</package>`\n\nexport default getText","const getText = () => `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html><html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:epub=\"http://www.idpf.org/2007/ops\" xml:lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\"></meta>\n<title>Navigation</title>\n</head>\n<body>\n<nav epub:type=\"toc\" id=\"toc\">\n<h1>Navigation</h1>\n<ol>\n<!-- navigation-list -->\n</ol>\n</nav>\n<nav epub:type=\"landmarks\">\n<ol>\n<li><a epub:type=\"bodymatter\" href=\"text/p_cover.xhtml\">Start of Content</a></li>\n</ol>\n</nav>\n</body>\n</html>\n`\n\nexport default getText","import { action, autorun, makeAutoObservable, observable, toJS } from \"mobx\"\nimport uuid from 'utils/get-uuid'\nimport Book from 'store/book'\nimport Ui from 'store/ui'\nimport Contents from 'store/contents'\nimport storeBlobs, { Store as Blobs } from 'store/blobs'\nimport JSZip from \"jszip\"\n\nimport 'template/mimetype'\nimport getTemplateContainerXml from 'template/container.xml'\nimport getTemplatePageXhtml from 'template/page.xhtml'\nimport getTemplateFixedLayoutJpCss from 'template/fixed-layout-jp.css'\nimport getTemplateStandardOpf from 'template/standard.opf'\nimport getTemplateNavigationDocumentsXhtml from 'template/navigation-documents.xhtml'\n\nconst htmlToEscape = (str: string): string => {\n  // eslint-disable-next-line no-control-regex\n  const reg = /\"|&|'|\\\\!|<|>|[\\x00-\\x20]|[\\x7F-\\xFF]|[\\u0100-\\u2700]/g\n\n  return str.replace(reg, ($0) => {\n    let c: any = $0.charCodeAt(0)\n    let r = ['&#']\n\n    c = (c === 0x20) ? 0xA0 : c\n    r.push(c)\n    r.push(';')\n    return r.join('')\n  })\n}\n\nconst getNumberStr = (num: number, zeroCount: number): string => {\n  let str = String(num)\n  let i = zeroCount - str.length\n  while (i-- > 0) {\n    str = '0' + str\n  }\n  return str\n}\n\nclass Store {\n  @observable ui: Ui\n  @observable book: Book\n  @observable contents: Contents\n  @observable blobs: Blobs\n\n  constructor() {\n    this.ui = new Ui()\n    this.book = new Book()\n    this.contents = new Contents()\n    this.blobs = storeBlobs\n\n    makeAutoObservable(this)\n\n    try {\n      const bookSets = JSON.parse(localStorage.getItem('EPUB_CREATOR_SAVED_SETS_BOOK') || '[]')\n      const contentSets = JSON.parse(localStorage.getItem('EPUB_CREATOR_SAVED_SETS_CONTENTS') || '[]')\n\n      this.book.savedSets = bookSets\n      this.contents.savedSets = contentSets\n    } catch {\n      // do nothing\n    }\n  }\n\n  @action\n  importPageFromImages(fileList: File[]) {\n    const uuids = fileList.map(() => uuid())\n\n    this.book.pushNewPage(uuids)\n    this.blobs.push(fileList, uuids)\n  }\n\n  @action\n  replacePageIndex(index: number, targetIndex: number) {\n    this.book.switchIndex(index, index > targetIndex ? targetIndex : targetIndex + 1)\n    this.ui.selectPageIndex(targetIndex)\n\n    const newIndexMap: Contents['indexMap'] = {}\n    const list = toJS(this.contents.list)\n\n    this.book.pages.forEach((pageItem, index) => {\n      if (pageItem.index in this.contents.indexMap) {\n        const listIndex = this.contents.indexMap[pageItem.index]\n        newIndexMap[index] = listIndex\n        list[listIndex].pageIndex = index\n      }\n    })\n\n    this.contents.updateList(list)\n    this.book.updatePageItemIndex()\n  }\n\n  @action\n  async splitPage(index: number) {\n    const pageItem = this.book.pages[index]\n    const blobItem = this.blobs.blobs[pageItem.blobID]\n    const uuids = [uuid(), uuid()]\n    const mime = blobItem.blob.type\n\n    const w1 = blobItem.originImage.width >> 1\n    const w2 = blobItem.originImage.width - w1\n\n    const canvas1 = document.createElement('canvas')\n    const canvas2 = document.createElement('canvas')\n\n    canvas1.width = w1\n    canvas1.height = blobItem.originImage.height\n\n    canvas2.width = w2\n    canvas2.height = blobItem.originImage.height\n\n    const ctx1 = canvas1.getContext('2d')\n    const ctx2 = canvas2.getContext('2d')\n\n    ctx1?.drawImage(blobItem.originImage, 0, 0)\n    ctx2?.drawImage(blobItem.originImage, 0 - w1, 0)\n\n    const blobs = await Promise.all([\n      new Promise<Blob>((resolve, reject) =>\n        canvas1.toBlob(\n          (blob) => blob ? resolve(blob) : reject(),\n          mime, 1\n        )\n      ),\n      new Promise<Blob>((resolve, reject) =>\n        canvas2.toBlob(\n          (blob) => blob ? resolve(blob) : reject(),\n          mime, 1\n        )\n      ),\n    ])\n\n    this.book.splitPage(index, uuids)\n    this.book.updatePageItemIndex()\n    this.blobs.push(blobs, this.book.pageDirection === 'left' ? uuids : uuids.reverse())\n\n    const list = toJS(this.contents.list)\n    list.forEach(contentItem => {\n      if (contentItem.pageIndex === null) {\n        return\n      }\n      if (contentItem.pageIndex > index) {\n        contentItem.pageIndex++\n      }\n    })\n\n    this.contents.updateList(list)\n  }\n\n  @action\n  insertBlankPage(index: number) {\n    this.book.insertBlankPage(index)\n    this.book.updatePageItemIndex()\n\n    const selectedPageIndex = this.ui.selectedPageIndex\n    if (selectedPageIndex && (selectedPageIndex >= index)) {\n      this.ui.selectPageIndex(selectedPageIndex + 1)\n    }\n\n    const list = toJS(this.contents.list)\n    list.forEach(contentItem => {\n      if (contentItem.pageIndex === null) {\n        return\n      }\n      if (contentItem.pageIndex > index) {\n        contentItem.pageIndex++\n      }\n    })\n\n    this.contents.updateList(list)\n  }\n\n  @action\n  removePage(index: number) {\n    this.book.removePage(index)\n    this.ui.selectPageIndex(null)\n\n    const list = toJS(this.contents.list)\n    list.forEach((contentItem) => {\n      if (contentItem.pageIndex === null) {\n        return\n      }\n      if (contentItem.pageIndex === index) {\n        contentItem.pageIndex = null\n        return\n      }\n      if (contentItem.pageIndex > index) {\n        contentItem.pageIndex--\n      }\n    })\n\n    this.contents.updateList(list)\n  }\n\n  @action\n  generateBook() {\n    let templateContainerXml = getTemplateContainerXml()\n    let templatePageXhtml = getTemplatePageXhtml()\n    let templateFixedLayoutJpCss = getTemplateFixedLayoutJpCss()\n    let templateStandardOpf = getTemplateStandardOpf()\n    let templateNavigationDocumentsXhtml = getTemplateNavigationDocumentsXhtml()\n\n    const Zip = new JSZip()\n\n    Zip.folder('META-INF')\n    Zip.folder('OEBPS/image')\n    Zip.folder('OEBPS/text')\n    Zip.folder('OEBPS/style')\n\n    templateNavigationDocumentsXhtml = templateNavigationDocumentsXhtml.replace(\n      '<!-- navigation-list -->',\n      Object.keys(this.contents.indexMap).map((pageIndex) => {\n        const listIndex = this.contents.indexMap[pageIndex]\n        const contentItem = this.contents.list[listIndex]\n        const title = htmlToEscape(contentItem.title)\n  \n        if (pageIndex === '0') {\n          return `<li><a href=\"text/p_cover.xhtml\">${title}</a></li>`\n        }\n  \n        return `<li><a href=\"text/p_${getNumberStr(+pageIndex - 1, 4)}.xhtml\">${title}</a></li>`\n      }).join('\\n')\n    )\n\n    let imageItemStr: string[] = []\n    let pageItemStr: string[] = []\n    let itemRefStr: string[] = []\n    let spread = this.book.coverPosition === 'first-page'\n      ? this.book.pageDirection\n      : this.book.pageDirection === 'left'\n        ? 'right'\n        : 'left'\n\n    this.book.pages.forEach((pageItem, i) => {\n      const numStr = i === 0 ? 'cover' : getNumberStr(i - 1, 4)\n      const imageFileName = (i === 0 ? '' : 'i_') + numStr\n\n      if (pageItem.blank) {\n        pageItemStr.push(`<item id=\"p_${numStr}\" href=\"text/p_${numStr}.xhtml\" media-type=\"application/xhtml+xml\" properties=\"svg\"></item>`)\n      } else {\n        const mimeType = this.blobs.blobs[pageItem.blobID].blob.type // image/xxxxx\n        pageItemStr.push(`<item id=\"p_${numStr}\" href=\"text/p_${numStr}.xhtml\" media-type=\"application/xhtml+xml\" properties=\"svg\" fallback=\"${imageFileName}\"></item>`)\n        imageItemStr.push(`<item id=\"${imageFileName}\" href=\"image/${imageFileName}.${mimeType.slice(6)}\" media-type=\"${mimeType}\"${i === 0 ? ' properties=\"cover-image\"' : ''}></item>`)\n      }\n\n      if (i !== 0) {\n        itemRefStr.push(`<itemref linear=\"yes\" idref=\"p_${numStr}\" properties=\"page-spread-${spread}\"></itemref>`)\n        spread = spread === 'left' ? 'right' : 'left'\n      }\n    })\n\n    if (this.book.coverPosition === 'alone') {\n      pageItemStr.splice(0, 1)\n    } else { // this.book.coverPosition === 'first-page'\n      itemRefStr.unshift(`<itemref linear=\"yes\" idref=\"p_cover\" properties=\"rendition:page-spread-center\"></itemref>`)\n    }\n\n    const viewPortWidth = this.book.pageSize[0] + ''\n    const viewPortHeight = this.book.pageSize[1] + ''\n    const fitMode = this.book.pageFit\n    const bookTitle = htmlToEscape(this.book.bookTitle.trim())\n\n    this.book.pages.forEach((pageItem, i) => {\n      const numStr = i === 0 ? 'cover' : getNumberStr(i - 1, 4)\n\n      if (pageItem.blank) {\n        Zip.file(\n          `OEBPS/text/p_${numStr}.xhtml`,\n          templatePageXhtml\n            .replace('{{title}}', bookTitle)\n            .replace(new RegExp('{{width}}', 'gm'), viewPortWidth)\n            .replace(new RegExp('{{height}}', 'gm'), viewPortHeight)\n            .replace('{{image}}', '')\n        )\n        return\n      }\n\n      const blob = this.blobs.blobs[pageItem.blobID].blob\n      const mimeType = blob.type.slice(6)\n      const imageFileName = (i === 0 ? '' : 'i_') + numStr + '.' + mimeType\n\n      let par = 'none'\n      if (fitMode !== 'stretch') {\n        par = this.book.pagePosition === 'center'\n          ? 'xMidYMid '\n          : this.book.pageDirection === 'left'\n            ? (i + 1) % 2 === 1 ? 'xMaxYMid ' : 'xMinYMid '\n            : (i + 1) % 2 === 1 ? 'xMinYMid ' : 'xMaxYMid '\n    \n        if (fitMode === 'fit') {\n          par += 'meet'\n        } else { // props.imageFit === 'fill'\n          par += 'slice'\n        }\n      }\n\n      Zip.file(\n        `OEBPS/text/p_${numStr}.xhtml`,\n        templatePageXhtml\n          .replace('{{title}}', bookTitle)\n          .replace(new RegExp('{{width}}', 'gm'), viewPortWidth)\n          .replace(new RegExp('{{height}}', 'gm'), viewPortHeight)\n          .replace('{{image}}', `<image width=\"100%\" height=\"100%\" preserveAspectRatio=\"${par}\" xlink:href=\"../image/${imageFileName}\" />`)\n      )\n\n      Zip.file(`OEBPS/image/${imageFileName}`, blob)\n    })\n\n    let authorsStr = this.book.bookAuthors.map((name, i) => {\n      return [\n        `<dc:creator id=\"creator${i + 1}\">${htmlToEscape(name)}</dc:creator>`,\n        `<meta refines=\"#creator${i + 1}\" property=\"role\" scheme=\"marc:relators\">aut</meta>`,\n        `<meta refines=\"#creator${i + 1}\" property=\"file-as\"></meta>`,\n        `<meta refines=\"#creator${i + 1}\" property=\"display-seq\">${i + 1}</meta>`\n      ].join('\\n')\n    }).join('\\n')\n\n    templateStandardOpf = templateStandardOpf\n      .replace('{{uuid}}', this.book.bookID)\n      .replace('{{title}}', bookTitle)\n      .replace('<!-- creator-list -->', authorsStr)\n      .replace('{{subject}}', htmlToEscape(this.book.bookSubject))\n      .replace('{{publisher}}', htmlToEscape(this.book.bookPublisher))\n      .replace('{{spread}}', this.book.pageShow === 'one' ? 'none' : 'landscape')\n      .replace('{{createTime}}', new Date().toISOString())\n      .replace(new RegExp('{{width}}', 'gm'), viewPortWidth)\n      .replace(new RegExp('{{height}}', 'gm'), viewPortHeight)\n      .replace('<!-- item-image -->', imageItemStr.join('\\n'))\n      .replace('<!-- item-xhtml -->', pageItemStr.join('\\n'))\n      .replace('<!-- itemref-xhtml -->', itemRefStr.join('\\n'))\n      .replace('{{direction}}', this.book.pageDirection === 'right' ? ' page-progression-direction=\"rtl\"' : '')\n\n    Zip.file('mimetype', 'application/epub+zip')\n    Zip.file('META-INF/container.xml', templateContainerXml)\n    Zip.file('OEBPS/style/fixed-layout-jp.css', templateFixedLayoutJpCss)\n    Zip.file('OEBPS/navigation-documents.xhtml', templateNavigationDocumentsXhtml)\n    Zip.file('OEBPS/standard.opf', templateStandardOpf)\n\n    Zip.generateAsync({\n      type: 'blob',\n      mimeType: 'application/epub+zip'\n    }).then(blob => {\n      const anchor = document.createElement('a')\n      const objectURL = window.URL.createObjectURL(blob)\n      anchor.download = this.book.bookTitle.trim() + '.epub'\n      anchor.href = objectURL\n      anchor.click()\n      window.URL.revokeObjectURL(objectURL)\n    })\n  }\n}\n\nconst store = new Store()\n\nautorun(() => {\n  localStorage.setItem('EPUB_CREATOR_SAVED_SETS_BOOK', JSON.stringify(toJS(store.book.savedSets)))\n  localStorage.setItem('EPUB_CREATOR_SAVED_SETS_CONTENTS', JSON.stringify(toJS(store.contents.savedSets)))\n})\n\nexport default store","import JSZip from 'jszip'\nimport { observer } from 'mobx-react'\nimport React, { useCallback, useLayoutEffect, useRef, useState } from 'react'\nimport Icon from 'components/icon'\nimport storeMain from 'store/main'\n// import storeBlobs from 'store/blobs'\n\ntype SupportType = 'image' | 'zip' | 'epub'\n\nconst PageControl = observer(function(props: { pageIndex: number | null }) {\n  const onUseImageSizeToPage = useCallback(() => {\n    const pageItem = storeMain.book.pages[props.pageIndex as number]\n    const image = storeMain.blobs.blobs[pageItem.blobID].originImage\n    storeMain.book.updateBookPageProperty('pageSize', [\n      image.width,\n      image.height\n    ])\n  }, [props.pageIndex])\n\n  const onChangePageIndex = useCallback(() => {\n    const max = storeMain.book.pages.length\n    const inputValue = window.prompt(`new page index (1 - ${max}):`)\n    let num = parseInt(inputValue || '')\n    \n    if (isNaN(num) || num < 1) {\n      return\n    } else if (num > max) {\n      num = max\n    }\n\n    storeMain.replacePageIndex(props.pageIndex as number, num - 1)\n  }, [props.pageIndex])\n\n  const onSetContentq = useCallback((e: React.MouseEvent<HTMLSpanElement>) => {\n    storeMain.contents.setPageIndexToTitle(\n      +(e.currentTarget.dataset.index as string),\n      props.pageIndex as number\n    )\n  }, [props.pageIndex])\n\n  const onSplitPage = useCallback(() => {\n    storeMain.splitPage(props.pageIndex as number)\n  }, [props.pageIndex])\n\n  const onRemovePage = useCallback(() => {\n    const res = window.confirm(`remove page index ${props.pageIndex as number + 1}?`)\n    res && storeMain.removePage(props.pageIndex as number)\n  }, [props.pageIndex])\n\n  if (props.pageIndex === null) {\n    return (\n      <>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"ruler\"/></button>\n        </div>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"menu\"/></button>\n        </div>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"bookmark\"/></button>\n        </div>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"scissors\"/></button>\n        </div>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"cross\"/></button>\n        </div>\n      </>\n    )\n  }\n\n  const blankPage = storeMain.book.pages[props.pageIndex].blank\n\n  return (\n    <>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-secondary\" disabled={blankPage} onClick={onUseImageSizeToPage}>\n            <Icon name=\"ruler\"/>\n          </button>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-secondary\" onClick={onChangePageIndex}>\n            <Icon name=\"menu\"/>\n          </button>\n      </div>\n      <div className=\"nav-item dropdown\">\n        <button type=\"button\" className=\"btn btn-secondary\"><Icon name=\"bookmark\"/></button>\n        <ul className=\"dropdown-menu\" style={{top: 0,left:'100%'}}>\n          {\n            storeMain.contents.list.map((contentItem, index) =>\n              <li key={index}>\n                <span\n                  className={\"dropdown-item\" + (contentItem.pageIndex === props.pageIndex ? ' active' : '')}\n                  data-index={index}\n                  onClick={onSetContentq}\n                >\n                  {contentItem.title}\n                </span>\n              </li>\n            )\n          }\n        </ul>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-secondary\" disabled={blankPage} onClick={onSplitPage}>\n          <Icon name=\"scissors\"/>\n        </button>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-secondary\" onClick={onRemovePage}>\n          <Icon name=\"cross\"/>\n        </button>\n      </div>\n    </>\n  )\n})\n\nconst AcceptMap = {\n  image: 'image/jpeg,image/png,image/webp,image/avif',\n  zip: 'application/zip',\n  epub: 'application/epub+zip',\n}\n\nconst MultipleAttrMap = {\n  image: true,\n  zip: false,\n  epub: false,\n}\n\nconst blobToFile = (theBlob: Blob, fileName:string): File => {\n  var b: any = theBlob\n  //A Blob() is almost a File() - it's just missing the two properties below which we will add\n  b.lastModifiedDate = new Date()\n  b.name = fileName\n\n  //Cast to a File() type\n  return theBlob as File\n}\n\nconst Header = function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n  const inputRef = useRef<HTMLInputElement>(null)\n  const [inputType, setInputType] = useState<SupportType>('zip') // 修改这个可以改默认格式\n\n  const onClickToggleBookVisible = useCallback(() => {\n    store.toggleBookVisible()\n  }, [store])\n  const onClickToggleContentVisible = useCallback(() => {\n    store.toggleContentVisible()\n  }, [store])\n  const onClickTogglePageVisible = useCallback(() => {\n    store.togglePageVisible()\n  }, [store])\n\n  const onClickImport = useCallback((e: React.MouseEvent<HTMLInputElement>) => {\n    const newType = e.currentTarget.dataset.type as SupportType\n\n    if (newType === inputType) {\n      inputRef.current?.click()\n    } else {\n      setInputType(newType)\n    }\n  }, [inputType])\n\n  const handleGetFile = useCallback(async () => {\n    const input: HTMLInputElement = inputRef.current as HTMLInputElement\n\n    // TODO\n    // if (inputType === 'epub') {\n    //   console.log(input.files?.[0])\n    //   return\n    // }\n\n    if (inputType === 'zip' && (input?.files?.[0])) {\n      const fileName = input.files[0].name \n      JSZip.loadAsync(input.files[0]).then(zipContent => {\n        const zipFiles = Object.keys(zipContent.files).sort().map((filename) => zipContent.files[filename])\n        const promises: Promise<File | null>[] = zipFiles.map(zipItem => {\n          if (zipItem.dir) {\n            return Promise.resolve(null)\n          }\n\n          return new Promise(resolve => {\n            zipItem.async('uint8array').then(uint8Array => {\n              // 检查 MIME type 的方法参考自：\n              // https://stackoverflow.com/questions/18299806/how-to-check-file-mime-type-with-javascript-before-upload\n              const header = Array.from(new Uint8Array(uint8Array).subarray(0, 4)).map(item => item.toString(16)).join('')\n              let mimeType = null\n  \n              switch (header) {\n                case '89504e47':\n                  mimeType = 'image/png'\n                  break\n                case '52494646':\n                  mimeType = 'image/webp'\n                  break\n                case 'ffd8ffe0':\n                case 'ffd8ffe1':\n                case 'ffd8ffe2':\n                case 'ffd8ffe3':\n                case 'ffd8ffe8':\n                  mimeType = 'image/jpeg'\n                  break\n                case '00020': // todo: 不确定是不是这个\n                  mimeType = 'image/avif'\n                  break\n                default:\n                  break\n              }\n\n              if (mimeType) {\n                const b = new Blob([uint8Array], { type: mimeType })\n                resolve(\n                  blobToFile(\n                    b,\n                    zipItem.name.replace(/^.+\\/(.+)$/, '$1')\n                  )\n                )\n              } else {\n                resolve(null)\n              }\n            })\n          })\n        })\n\n        return Promise.all(promises) as Promise<File[]>\n      }).then((files: (File | null)[]) => {\n        storeMain.importPageFromImages(files.filter(b => b !== null) as File[])\n        if (storeMain.ui.firstImport) {\n          storeMain.ui.toggleBookVisible(fileName)\n        }\n      })\n      return\n    }\n\n    // inputType === jpg png webp\n    storeMain.importPageFromImages(Array.from(input.files as FileList))\n  }, [inputType])\n\n  const onClickInsertBlankPage = useCallback(() => {\n    const max = storeMain.book.pages.length\n    const inputValue = window.prompt(`page index (1 - ${max}):`)\n    let num = parseInt(inputValue || '')\n    \n    if (isNaN(num) || num < 1) {\n      return\n    } else if (num > max) {\n      num = max\n    }\n\n    storeMain.insertBlankPage(num - 1)\n  }, [])\n\n  const onClickGenerate = useCallback(() => {\n    storeMain.generateBook()\n  }, [])\n\n  useLayoutEffect(() => {\n    setTimeout(() => {\n      inputRef.current?.click()\n    }, 0)\n  }, [inputType])\n\n  return (\n    <nav id=\"nav\" className=\"navbar bg-dark\">\n      <div className=\"nav-item dropdown\">\n        <button type=\"button\" className=\"btn btn-primary\">\n          <Icon name=\"upload\"/>\n        </button>\n        <ul className=\"dropdown-menu\" style={{top: 0,left:'100%'}}>\n          <li><span className=\"dropdown-item\" data-type=\"image\" onClick={onClickImport}>image</span></li>\n          <li><span className=\"dropdown-item\" data-type=\"zip\" onClick={onClickImport}>zip</span></li>\n          {/* <li><span className=\"dropdown-item\" data-type=\"epub\" onClick={onClickImport}>epub</span></li> */}\n        </ul>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-primary\" onClick={onClickToggleBookVisible}><Icon name=\"book\"/></button>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-primary\" onClick={onClickToggleContentVisible}><Icon name=\"list\"/></button>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-primary\" onClick={onClickTogglePageVisible}><Icon name=\"tools\"/></button>\n      </div>\n      <div className=\"nav-item\">\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          disabled={storeMain.book.pages.length === 0}\n          onClick={onClickInsertBlankPage}\n        >\n          <Icon name=\"notification\"/>\n        </button>\n      </div>\n      <div className=\"nav-item\">\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          disabled={storeMain.book.pages.length === 0}\n          onClick={onClickGenerate}\n        >\n          <Icon name=\"install\"/>\n        </button>\n      </div>\n      <PageControl pageIndex={store.selectedPageIndex}/>\n      <input\n        key={inputType}\n        id=\"input-upload\"\n        ref={inputRef}\n        type=\"file\"\n        value=\"\"\n        accept={AcceptMap[inputType]}\n        multiple={MultipleAttrMap[inputType]}\n        onChange={handleGetFile}\n        style={{display:\"none\"}}\n      />\n    </nav>\n  )\n}\n\nexport default observer(Header)","import { observer } from 'mobx-react'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { useMount } from 'react-use'\nimport storeMain from 'store/main'\nimport storeBlobs, { StoreBlobs } from 'store/blobs'\nimport Icon from './icon'\n\nconst PageCard = observer(function(props: {\n  pageItemIndex: number | null\n  blobItem?: StoreBlobs.ImageBlob | null\n  pagePosition: 'center' | 'left' | 'right'\n  blank: boolean\n}) {\n  const storeUI = React.useContext(React.createContext(storeMain.ui))\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n  const storeContent = React.useContext(React.createContext(storeMain.contents))\n\n  const onClickImage = useCallback(() => {\n    storeMain.ui.selectPageIndex(props.pageItemIndex)\n  }, [props.pageItemIndex])\n\n  if (props.pageItemIndex === null) {\n    return (\n      <div className=\"card\"><div className=\"card-image\"></div></div>\n    )\n  }\n\n  let preserveAspectRatio = 'none'\n\n  if (storeBook.pageFit !== 'stretch') {\n    preserveAspectRatio = props.pagePosition === 'center'\n      ? 'xMidYMid '\n      : props.pagePosition === 'left'\n        ? 'xMinYMid '\n        : 'xMaxYMid '\n\n    if (storeBook.pageFit === 'fit') {\n      preserveAspectRatio += 'meet'\n    } else { // props.imageFit === 'fill'\n      preserveAspectRatio += 'slice'\n    }\n  }\n\n  const imageFocus = props.pageItemIndex !== null && (storeUI.selectedPageIndex === props.pageItemIndex)\n\n  return (\n    <div className=\"card\">\n      {\n        props.pageItemIndex in storeContent.indexMap\n          ? <Icon name=\"bookmark\"></Icon>\n          : null\n      }\n      {\n        (props.blobItem || (!props.blobItem && props.blank)) ? (\n          <svg\n            className=\"card-image\"\n            viewBox={'0 0 ' + storeBook.pageSize.join(' ')} onClick={onClickImage}\n          >\n            <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill={storeBook.pageBackgroundColor === 'white' ? '#fff' : '#000'}/>\n            {\n              props.blobItem ? (\n                <image\n                  width=\"100%\"\n                  height=\"100%\"\n                  preserveAspectRatio={preserveAspectRatio}\n                  xlinkHref={props.blobItem.thumbnailURL}\n                />\n              ) : null\n            }\n            {\n              !imageFocus ? null :\n                <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"none\" stroke=\"rgba(49,132,253,.5)\" strokeWidth=\"8%\"/>\n            }\n          </svg>\n        ) : (\n          <div className=\"card-image\">\n            <div className=\"spinner-border text-primary\" role=\"status\"></div>\n          </div>\n        )\n      }\n      {\n        props.pageItemIndex === null\n          ? null\n          : <div className=\"page-num\">{props.pageItemIndex + 1}</div>\n      }\n    </div>\n  )\n})\n\nconst DoublePageCard = observer(function(props: {\n  pages: [number | null, number | null]\n}) {\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n\n  const leftSidePageIndex = storeBook.pageDirection === 'right' ? props.pages[1] : props.pages[0]\n  const rightSidePageIndex = storeBook.pageDirection === 'right' ? props.pages[0] : props.pages[1]\n  const leftSidePage = leftSidePageIndex === null ? null : storeBook.pages[leftSidePageIndex]\n  const rightSidePage = rightSidePageIndex === null ? null : storeBook.pages[rightSidePageIndex]\n  const coverPosition = storeBook.coverPosition === 'alone' ? 1 : 0\n\n  return (\n    <div className=\"card-group\">\n      <PageCard\n        pageItemIndex={leftSidePageIndex === null ? null : (leftSidePageIndex - coverPosition)}\n        blobItem={leftSidePage ? storeBlobs.blobs[leftSidePage.blobID] : null}\n        pagePosition={storeBook.pagePosition === 'between' ? 'left' : 'center'}\n        blank={leftSidePage?.blank || false}\n      />\n      <PageCard\n        pageItemIndex={rightSidePageIndex === null ? null : (rightSidePageIndex - coverPosition)}\n        blobItem={rightSidePage ? storeBlobs.blobs[rightSidePage.blobID] : null}\n        pagePosition={storeBook.pagePosition === 'between' ? 'right' : 'center'}\n        blank={rightSidePage?.blank || false}\n      />\n    </div>\n  )\n})\n\nconst computedStyle = getComputedStyle(document.documentElement)\nconst CARD_BOX_WIDTH = +computedStyle.getPropertyValue('--card-box-width').slice(0, -2)\nconst CARD_BOX_MARGIN = +computedStyle.getPropertyValue('--card-box-margin').slice(0, -2)\n\nconst Main = function() {\n  const mainRef = useRef<HTMLElement>(null)\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n  // const storeUI = React.useContext(React.createContext(storeMain.ui))\n  const [showPages, setShowPages] = useState<[any, any][][]>([])\n  // const [maxCardBoxCountInOneRow, setMaxCardBoxCountInOneRow] = useState(0)\n\n  const pageResizeCallback = useCallback(() => {\n    const pageWidth = mainRef.current?.clientWidth\n    if (!pageWidth) {\n      return\n    }\n\n    const boxCountInOneRow = Math.floor(pageWidth / (CARD_BOX_WIDTH + CARD_BOX_MARGIN * 2))\n    const rowCount = Math.ceil((1 + storeBook.pages.length) / boxCountInOneRow / 2)\n\n    // if (maxCardBoxCountInOneRow === boxCountInOneRow) {\n    //   return\n    // }\n\n    if (storeBook.pages.length === 0) {\n      // setMaxCardBoxCountInOneRow(boxCountInOneRow)\n      setShowPages([])\n      return\n    }\n\n    let i = 0\n    let j = 0\n    let x = -1\n\n    const pages: [any, any][][] = []\n    const len = storeBook.pages.length\n\n    while(i++ < rowCount) {\n      const r: [number | null, number | null][] = []\n      while(j++ < boxCountInOneRow) {\n        r.push([\n          storeBook.coverPosition === 'first-page'\n            ? x === -1 ? null : ++x < len ? x : null\n            : ++x < len ? x : null,\n          ++x < len ? x : null\n        ])\n      }\n      j = 0\n      pages.push(storeBook.pageDirection === 'right' ? r.reverse() : r)\n    }\n\n    // setMaxCardBoxCountInOneRow(boxCountInOneRow)\n    setShowPages(pages)\n  }, [storeBook.coverPosition, storeBook.pageDirection, storeBook.pages.length])\n\n  const onClickImport = useCallback(() => {\n    document.getElementById('input-upload')?.click()\n  }, [])\n\n  useEffect(() => {\n    pageResizeCallback()\n  }, [storeBook.pages, pageResizeCallback])\n\n  useMount(() => {\n    pageResizeCallback()\n    // TODO: 需要throttle优化\n    window.addEventListener('resize', pageResizeCallback)\n  })\n\n  return (\n    <main id=\"main\" className=\"pt-4 pb-4\" ref={mainRef}>\n      {\n        showPages.length === 0 ? (\n          process.env.NODE_ENV === 'development'\n            ? <div className=\"btn btn-secondary main-input-upload\" onClick={onClickImport}>Import</div>\n            : <div className=\"alert alert-secondary text-center\" role=\"alert\">ready 🚀</div>\n        ) : (\n          showPages.map((row, i) => (\n            <div key={i} className=\"row page-row justify-content-evenly\">\n              {\n                row.map((pages, j) => (<DoublePageCard key={`${i}-${j}-${pages[0]}-${pages[1]}`} pages={pages}/>))\n              }\n            </div>\n          ))\n        )\n      }\n      <div className=\"row d-flex justify-content-end align-items-center mt-auto author-info\">\n        <div>2023 wing-kai@Github</div>\n        <iframe\n          title=\"ghbtns\"\n          className=\"ghbtns\"\n          src=\"https://ghbtns.com/github-btn.html?user=wing-kai&amp;repo=epub-manga-creator&amp;type=star&amp;count=true\"\n          frameBorder=\"0\"\n          scrolling=\"0\"\n          width=\"80px\"\n          height=\"20px\"\n        />\n      </div>\n    </main>\n  )\n}\n\nexport default observer(Main)","const deepClone = (target) => {\n  if (target && typeof target === 'object') {\n    const newObj = target instanceof Array ? [] : target instanceof Date ? new Date(+target) : {}\n    for (const key in target) {\n      const val = target[key]\n      newObj[key] = deepClone(val)\n    }\n    return newObj\n  }\n\n  return target\n}\n\nexport default deepClone\n","import React, { FormEvent, useCallback, useEffect, useState } from 'react'\nimport storeMain from 'store/main'\nimport { observer } from 'mobx-react'\nimport { toJS } from 'mobx'\nimport deepClone from 'utils/deep-clone'\nimport Icon from 'components/icon'\n\nimport 'components/modal/index.css'\n\nconst PAGE_SIZE: { [name: string]: () => [number, number] } = {\n  'B4': () => [1250, 1765],\n  'B5': () => [880, 1250],\n  'A4': () => [1050, 1485],\n  'A5': () => [1480, 2100],\n  'CG 16:9': () => [1600, 900],\n  'CG 16:10': () => [1600, 1000],\n}\n\nconst KeywordPicker = function(props: { keywords: string[], onClick: (str: string) => void }) {\n  const onClick = useCallback((e: FormEvent<HTMLButtonElement>) => {\n    const index = e.currentTarget.dataset.index as string\n\n    props.onClick(props.keywords[+index])\n  }, [props])\n\n  return (\n    <>\n      {\n        props.keywords.map((str, index) =>\n          <button\n            type=\"button\"\n            key={index}\n            data-index={index}\n            className=\"btn btn-outline-primary btn-sm me-2\"\n            onClick={onClick}\n          >{str}</button>\n        )\n      }\n    </>\n  )\n}\n\nconst ModalBook = observer(function() {\n  const storeUI = React.useContext(React.createContext(storeMain.ui))\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n  const setsSeletRef = React.useRef<HTMLSelectElement>(null)\n\n  const [fileName, setFileName] = useState('')\n  const [keywords, setKeywords] = useState<string[]>([])\n  const [selectedSetIndex, setSelectedSetIndex] = useState(-1)\n\n  const keywordsLength = keywords.length\n\n  const onClickModal = useCallback((e) => {\n    e.stopPropagation()\n    return\n  }, [])\n  const onClickClose = useCallback(() => {\n    storeUI.toggleBookVisible()\n  }, [storeUI])\n\n  const onClickAnalyze = useCallback(() => {\n    const reg = [\n      /\\[.*?\\(.*\\)\\]/, // [xxx(xxx)]\n      /\\[.*?\\]\\s?\\[.*?\\]/, // [xxx][xxx]\n      /\\[.*?\\]/, // [xxx]\n      /\\(.*?\\)/, // (xxx)\n      /\\([^[\\]()]*?\\)|\\[[^[\\]()]*?\\]/g,\n    ]\n\n    let suffix0 = reg[0].exec(fileName)\n    let suffix1 = reg[1].exec(fileName)\n    let suffix2 = reg[2].exec(fileName)\n    let suffix3 = reg[3].exec(fileName)\n\n    if (suffix0) {\n      let suffix = suffix0[0]\n      let author = Array.from(suffix.match(/\\(.*?\\)/g) || []).pop()\n      const i = fileName.indexOf(suffix[0])\n      const titleAndPrefix = fileName.slice(i === 0 ? suffix.length : i + suffix.length).trim()\n\n      storeBook.updateBookPageProperty('bookTitle', titleAndPrefix)\n      storeBook.updateBookPageProperty('bookAuthors', [author?.slice(1, -1)?.trim() || ''])\n      setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n      return\n    }\n\n    if (suffix1) {\n      let suffix = suffix1[0]\n      let author = Array.from(suffix.match(/\\[.*?\\]/g) || []).pop()\n      const i = fileName.indexOf(suffix[0])\n      const titleAndPrefix = fileName.slice(i === 0 ? suffix.length : i + suffix.length).trim()\n\n      storeBook.updateBookPageProperty('bookTitle', titleAndPrefix)\n      storeBook.updateBookPageProperty('bookAuthors', [author?.slice(1, -1)?.trim() || ''])\n      setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n      return\n    }\n\n    if (suffix2) {\n      let suffix = suffix2[0]\n      let author = suffix.slice(1, -1)\n      const i = fileName.indexOf(suffix[0])\n      const titleAndPrefix = fileName.slice(i === 0 ? suffix.length : i + suffix.length).trim()\n\n      storeBook.updateBookPageProperty('bookTitle', titleAndPrefix)\n      storeBook.updateBookPageProperty('bookAuthors', [author])\n      setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n      return\n    }\n\n    if (suffix3) {\n      let suffix = suffix3[0]\n      let author = suffix.slice(1, -1)\n      const i = fileName.indexOf(suffix[0])\n      const titleAndPrefix = fileName.slice(i === 0 ? suffix.length : i + suffix.length).trim()\n\n      storeBook.updateBookPageProperty('bookTitle', titleAndPrefix)\n      storeBook.updateBookPageProperty('bookAuthors', [author])\n      setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n      return\n    }\n\n    storeBook.updateBookPageProperty('bookTitle', fileName)\n    setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n  }, [storeBook, fileName])\n\n  const onChangeFileName = useCallback((e: FormEvent<HTMLInputElement>) => {\n    console.log(e.currentTarget.value)\n    setFileName(e.currentTarget.value)\n  }, [])\n  const onChangeBookID = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    storeBook.updateBookPageProperty('bookID', eventTarget.value)\n  }, [storeBook])\n  const onChangeBookTitle = useCallback((e: FormEvent<HTMLInputElement>) => {\n    storeBook.updateBookPageProperty('bookTitle', e.currentTarget.value)\n  }, [storeBook])\n  const onAddAuthor = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    const index = eventTarget.dataset.index as string\n    const newValue = [...toJS(storeBook.bookAuthors)]\n    newValue.splice(+index, 1, newValue[+index], '')\n    storeBook.updateBookPageProperty('bookAuthors', newValue)\n  }, [storeBook])\n  const onRemoveAuthor = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    const index = eventTarget.dataset.index as string\n    const newValue = [...toJS(storeBook.bookAuthors)]\n    newValue.splice(+index, 1)\n    storeBook.updateBookPageProperty('bookAuthors', newValue)\n  }, [storeBook])\n  const onChangeBookAuthors = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    const index = eventTarget.dataset.index as string\n    const newValue = [...toJS(storeBook.bookAuthors)]\n    newValue.splice(+index, 1, eventTarget.value)\n    storeBook.updateBookPageProperty('bookAuthors', newValue)\n  }, [storeBook])\n  const onChangeBookSubject = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    storeBook.updateBookPageProperty('bookSubject', eventTarget.value)\n  }, [storeBook])\n  const onChangeBookPublisher = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    storeBook.updateBookPageProperty('bookPublisher', eventTarget.value)\n  }, [storeBook])\n\n  const onChangeTitleFromPicker = useCallback((value: string) => {\n    storeBook.updateBookPageProperty('bookTitle', value)\n  }, [storeBook])\n  const onChangeAuthorsFromPicker = useCallback((value: string) => {\n    const authors = toJS(storeBook.bookAuthors)\n\n    if (authors.slice(-1)[0] === '') {\n      authors[authors.length - 1] = value\n    } else {\n      authors.push(value)\n    }\n\n    storeBook.updateBookPageProperty('bookAuthors', authors)\n  }, [storeBook])\n  const onChangePublisherFromPicker = useCallback((value: string) => {\n    storeBook.updateBookPageProperty('bookPublisher', value)\n  }, [storeBook])\n\n  const onClickModalBody = useCallback(() => {\n    setSelectedSetIndex(-1)\n  }, [])\n\n  const onClickSaveSet = useCallback(() => {\n    storeBook.saveBookInfoToSet()\n    setSelectedSetIndex(-1)\n    setTimeout(() => {\n      if (setsSeletRef.current) {\n        setsSeletRef.current.value = '-1'\n      }\n    }, 0)\n  }, [storeBook])\n\n  const onClickRemoveSet = useCallback(() => {\n    storeBook.removeBookInfoSet(selectedSetIndex)\n    setSelectedSetIndex(-1)\n    setTimeout(() => {\n      if (setsSeletRef.current) {\n        setsSeletRef.current.value = '-1'\n      }\n    }, 0)\n  }, [selectedSetIndex, storeBook])\n\n  const onApplySet = useCallback((e: React.ChangeEvent<HTMLSelectElement>) => {\n    const index = +e.currentTarget.value\n    setSelectedSetIndex(index)\n    storeBook.applySet(index)\n  }, [storeBook])\n\n  useEffect(() => {\n    setFileName(storeUI.fileName)\n  }, [storeUI.fileName])\n\n  useEffect(() => {\n    if (fileName && storeUI.firstImport) {\n      onClickAnalyze()\n      storeUI.firstUploaded()\n    }\n  }, [fileName, onClickAnalyze, storeUI])\n\n  useEffect(() => {\n    if (selectedSetIndex !== -1) {\n      return\n    }\n    setTimeout(() => {\n      if (setsSeletRef.current) {\n        setsSeletRef.current.value = selectedSetIndex + ''\n      }\n    }, 0)\n  })\n\n  return (\n    <div className=\"modal-dialog modal-lg\" onClick={onClickModal}>\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">Book</h5>\n          <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" onClick={onClickClose}></button>\n        </div>\n        <div className=\"modal-body\" onClick={onClickModalBody}>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-filename\" className=\"col-sm-2 col-form-label text-end\">filename</label>\n            <div className=\"col-sm-10\">\n              <div className=\"input-group\">\n                <input type=\"text\" className=\"form-control\" id=\"input-filename\" value={fileName} onInput={onChangeFileName}/>\n                <button\n                  className=\"btn btn-outline-secondary d-flex justify-content-center align-items-center\"\n                  type=\"button\"\n                  onClick={onClickAnalyze}\n                >\n                  <Icon name=\"rocket\"></Icon>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-id\" className=\"col-sm-2 col-form-label text-end\">id</label>\n            <div className=\"col-sm-10\">\n              <input type=\"text\" className=\"form-control\" id=\"input-book-id\" value={storeBook.bookID} onInput={onChangeBookID}/>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-title\" className=\"col-sm-2 col-form-label text-end\">title</label>\n            <div className=\"col-sm-10\">\n              <input type=\"text\" className=\"form-control\" id=\"input-book-title\" value={storeBook.bookTitle} onInput={onChangeBookTitle}/>\n              <div className={keywordsLength ? \"mt-3\" : ''}>\n                <KeywordPicker keywords={keywords} onClick={onChangeTitleFromPicker}/>\n              </div>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-author\" className=\"col-sm-2 col-form-label text-end\">author</label>\n            <div className=\"col-sm-10\">\n              {\n                storeBook.bookAuthors.map((name: string, index: number) => (\n                  <div key={index} className={\"input-group\" + ((index + 1) === storeBook.bookAuthors.length ? '' : ' mb-3')}>\n                    <input type=\"text\" className=\"form-control\" data-index={index} value={name} onInput={onChangeBookAuthors}/>\n                    <button\n                      className=\"btn btn-outline-secondary d-flex justify-content-center align-items-center\"\n                      type=\"button\"\n                      data-index={index}\n                      onClick={onAddAuthor}\n                    >\n                      <Icon name=\"plus\"></Icon>\n                    </button>\n                    <button\n                      className=\"btn btn-outline-secondary d-flex justify-content-center align-items-center\"\n                      type=\"button\"\n                      data-index={index}\n                      disabled={storeBook.bookAuthors.length === 1}\n                      onClick={onRemoveAuthor}\n                    >\n                      <Icon name=\"minus\"></Icon>\n                    </button>\n                  </div>\n                ))\n              }\n              <div className={keywordsLength ? \"mt-3\" : ''}>\n                <KeywordPicker keywords={keywords} onClick={onChangeAuthorsFromPicker}/>\n              </div>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-subject\" className=\"col-sm-2 col-form-label text-end\">subject</label>\n            <div className=\"col-sm-10\">\n              <input type=\"text\" className=\"form-control\" list=\"dl-subject\" id=\"input-book-subject\" value={storeBook.bookSubject} onInput={onChangeBookSubject}/>\n              <datalist id=\"dl-subject\">\n                <option value=\"少年\" />\n                <option value=\"少女\" />\n                <option value=\"青年\" />\n                <option value=\"同人誌\" />\n                <option value=\"漫画\" />\n                <option value=\"成年コミック\" />\n              </datalist>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-publisher\" className=\"col-sm-2 col-form-label text-end\">publisher</label>\n            <div className=\"col-sm-10\">\n              <input type=\"text\" className=\"form-control\" list=\"dl-publisher\" id=\"input-book-publisher\" value={storeBook.bookPublisher} onInput={onChangeBookPublisher}/>\n              <datalist id=\"dl-publisher\">\n                <option value=\"KADOKAWA\" />\n                <option value=\"講談社\" />\n                <option value=\"集英社\" />\n                <option value=\"小学館\" />\n                <option value=\"小学館集英社プロダクション\" />\n                <option value=\"少年画報社\" />\n                <option value=\"松文館\" />\n                <option value=\"日本文芸社\" />\n                <option value=\"白泉社\" />\n                <option value=\"芳文社\" />\n                <option value=\"ワニマガジン社\" />\n                <option value=\"FAKKU\" />\n              </datalist>\n              <div className={keywordsLength ? \"mt-3\" : ''}>\n                <KeywordPicker keywords={keywords} onClick={onChangePublisherFromPicker}/>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"modal-footer justify-content-start\">\n          <button type=\"button\" className=\"btn btn-sm btn-outline-primary\" onClick={onClickSaveSet}>save set</button>\n          <select className=\"form-select form-select-sm\" value={selectedSetIndex + ''} defaultChecked={false} ref={setsSeletRef} style={{width: '200px'}} onChange={onApplySet}>\n            {\n              storeBook.savedSets.map((set, index) =>\n                <option defaultChecked={false} key={index} value={index}>title: {set.bookTitle}, author: {set.bookAuthors[0]}, subject: {set.bookSubject}</option>\n              )\n            }\n          </select>\n          <button type=\"button\" disabled={selectedSetIndex === -1} className=\"btn btn-sm btn-outline-danger\" onClick={onClickRemoveSet}>remove set</button>\n        </div>\n      </div>\n    </div>\n  )\n})\n\nconst ModalContents = observer(function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n  const setsSeletRef = React.useRef<HTMLSelectElement>(null)\n  const [plainMode, setPlainMode] = useState(false)\n  const [tempList, setTempList] = useState<typeof storeMain.contents.list>([])\n  const [textAreaInput, setTextAreaInput] = useState('')\n  const [selectedSetIndex, setSelectedSetIndex] = useState(-1)\n  const maxIndex = tempList.length - 1\n\n  const onClickModal = useCallback((e) => {\n    e.stopPropagation()\n    return\n  }, [])\n\n  const onClickClose = useCallback(() => {\n    store.toggleContentVisible()\n  }, [store])\n\n  const togglePlainMode = useCallback(() => {\n    if (plainMode) {\n      const list: typeof storeMain.contents.list = []\n      const items = textAreaInput.split('\\n')\n      items.forEach(item => {\n        const [pageIndex, ...title] = item.split('. ')\n\n        if (!isNaN(pageIndex as any) && title.length) {\n          list.push({\n            pageIndex: Math.abs(+pageIndex - 1),\n            title: title.join('')\n          })\n        } else {\n          list.push({\n            pageIndex: 998,\n            title: pageIndex\n          })\n        }\n      })\n\n      setTempList(list)\n    } else {\n      let value = tempList.map(contentItem => {\n        return ((contentItem.pageIndex || 0) + 1) + '. ' + contentItem.title\n      }).join('\\n')\n\n      setTextAreaInput(value)\n    }\n\n    setPlainMode(!plainMode)\n  }, [tempList, plainMode, textAreaInput])\n\n  const onInputPageIndex = useCallback((e: FormEvent<HTMLInputElement>) => {\n    const listIndex = +(e.currentTarget.dataset.index as string)\n    const value = e.currentTarget.value as string\n    const newList = deepClone(tempList) as typeof storeMain.contents.list\n    const item = newList[listIndex]\n    item.pageIndex = (+value - 1) || 0\n    setTempList(newList)\n  }, [tempList])\n\n  const onInputTitle = useCallback((e: FormEvent<HTMLInputElement>) => {\n    const listIndex = +(e.currentTarget.dataset.index as string)\n    const value = e.currentTarget.value as string\n    const newList = deepClone(tempList) as typeof storeMain.contents.list\n    const item = newList[listIndex]\n    item.title = value\n    setTempList(newList)\n  }, [tempList])\n\n  const onClickAdd = useCallback((e: FormEvent<HTMLButtonElement>) => {\n    const listIndex = +(e.currentTarget.dataset.index as string)\n    const list = deepClone(tempList) as typeof storeMain.contents.list\n    const item = list[listIndex]\n    list.splice(listIndex, 1, item, {\n      pageIndex: 0,\n      title: ''\n    })\n    setTempList(list)\n  }, [tempList])\n\n  const onClickRemove = useCallback((e: FormEvent<HTMLButtonElement>) => {\n    const listIndex = +(e.currentTarget.dataset.index as string)\n    const list = deepClone(tempList) as typeof storeMain.contents.list\n    list.splice(listIndex, 1)\n    setTempList(list)\n  }, [tempList])\n\n  const onSortList = useCallback(() => {\n    const list = deepClone(tempList) as typeof storeMain.contents.list\n\n    list.sort((a, b) => {\n      if (isNaN(a.pageIndex as number)) {\n        return 1\n      }\n      if (isNaN(b.pageIndex as number)) {\n        return 1\n      }\n      return (a.pageIndex as number) - (b.pageIndex as number)\n    })\n\n    setTempList(list)\n  }, [tempList])\n\n  const onFocusNumberInput = useCallback((e: FormEvent<HTMLInputElement>) => {\n    e.currentTarget.select()\n  }, [])\n\n  const onTextareaInput = useCallback((e: FormEvent<HTMLTextAreaElement>) => {\n    setTextAreaInput(e.currentTarget.value)\n  }, [])\n\n  const onSave = useCallback(() => {\n    storeMain.contents.updateList(tempList)\n    store.toggleContentVisible()\n  }, [store, tempList])\n\n  const onClickSaveSet = useCallback(() => {\n    storeMain.contents.saveSet(storeMain.book.bookTitle)\n    setSelectedSetIndex(-1)\n    setTimeout(() => {\n      if (setsSeletRef.current) {\n        setsSeletRef.current.value = '-1'\n      }\n    }, 0)\n  }, [])\n\n  const onClickRemoveSet = useCallback(() => {\n    storeMain.contents.removeSet(selectedSetIndex)\n    setSelectedSetIndex(-1)\n    setTimeout(() => {\n      if (setsSeletRef.current) {\n        setsSeletRef.current.value = '-1'\n      }\n    }, 0)\n  }, [selectedSetIndex])\n\n  const onApplySet = useCallback((e: React.ChangeEvent<HTMLSelectElement>) => {\n    const index = +e.currentTarget.value\n    setSelectedSetIndex(index)\n    setTempList(toJS(storeMain.contents.savedSets[index].list))\n  }, [])\n\n  const onClickModalBody = useCallback(() => {\n    setSelectedSetIndex(-1)\n  }, [])\n\n  useEffect(() => {\n    if (selectedSetIndex !== -1) {\n      return\n    }\n    setTimeout(() => {\n      if (setsSeletRef.current) {\n        setsSeletRef.current.value = selectedSetIndex + ''\n      }\n    }, 0)\n  })\n\n  useEffect(() => {\n    if (store.modalContentVisible) {\n      setTempList(toJS(storeMain.contents.list))\n    }\n  }, [store.modalContentVisible])\n\n  return (\n    <div className=\"modal-dialog modal-lg\" onClick={onClickModal}>\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">Content</h5>\n          <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" onClick={onClickClose}></button>\n        </div>\n        <div className=\"modal-body\" onClick={onClickModalBody}>\n          {\n            plainMode ? (\n              <textarea\n                cols={30}\n                rows={10}\n                placeholder=\"eg: \\n 1. cover \\n 2. xxxx \\n 3.xxxx\"\n                className=\"form-control\"\n                style={{resize: 'none'}}\n                value={textAreaInput}\n                onInput={onTextareaInput}\n              />\n            ) : (\n              <>\n                <div className=\"row mb-2\">\n                  <div className=\"col-2\">\n                    <h6>index</h6>\n                  </div>\n                  <div className=\"col-6\">\n                    <h6>title</h6>\n                  </div>\n                  <div className=\"col-auto\"></div>\n                </div>\n                {\n                  tempList.map((contentItem, index) => (\n                    <div className={'row mb-' + (index === maxIndex ? '2' : '4')} key={index}>\n                      <div className=\"col-2\">\n                        <input\n                          type=\"number\"\n                          className=\"form-control\"\n                          data-index={index}\n                          value={(contentItem.pageIndex || 0) + 1}\n                          onFocus={onFocusNumberInput}\n                          onInput={onInputPageIndex}\n                        />\n                      </div>\n                      <div className=\"col-8\">\n                        <input type=\"text\" className=\"form-control\" data-index={index} value={contentItem.title} onInput={onInputTitle}/>\n                      </div>\n                      <div className=\"col-auto\">\n                        <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                          <button type=\"button\" className=\"btn btn btn-secondary d-flex justify-content-center align-items-center\" data-index={index} onClick={onClickAdd}>\n                            <Icon name=\"plus\"></Icon>\n                          </button>\n                          <button type=\"button\" className=\"btn btn btn-secondary d-flex justify-content-center align-items-center\" data-index={index} onClick={onClickRemove}>\n                            <Icon name=\"minus\"></Icon>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                }\n              </>\n            )\n          }\n        </div>\n        {\n          plainMode ? null : (\n            <div className=\"modal-footer justify-content-start\">\n              <button type=\"button\" className=\"btn btn-sm btn-outline-primary\" onClick={onClickSaveSet}>save set</button>\n              <select className=\"form-select form-select-sm\" key={selectedSetIndex} value={selectedSetIndex + ''} defaultChecked={false} ref={setsSeletRef} style={{width: '200px'}} onChange={onApplySet}>\n                {\n                  storeMain.contents.savedSets.map((set, index) =>\n                    <option defaultChecked={false} key={index} value={index}>{set.title}</option>\n                  )\n                }\n              </select>\n              <button type=\"button\" disabled={selectedSetIndex === -1} className=\"btn btn-sm btn-outline-danger\" onClick={onClickRemoveSet}>remove set</button>\n            </div>\n          )\n        }\n        <div className=\"modal-footer justify-content-start\">\n          <button type=\"button\" className=\"btn btn-outline-primary\" onClick={togglePlainMode}>\n            {plainMode ? 'form mode' : 'plain text mode'}\n          </button>\n          <button type=\"button\" disabled={plainMode} className=\"btn btn-outline-primary me-auto\" onClick={onSortList}>\n            sort\n          </button>\n          <button type=\"button\" disabled={plainMode} className=\"btn btn-primary\" onClick={onSave}>\n            Save\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n})\n\nconst ButtonRadio = function(props: { value: any; current: any; label: string; onClick: (val: any) => void }) {\n  const onClick = useCallback(() => {\n    props.onClick(props.value)\n  }, [props])\n\n  const className = props.value === props.current\n    ? 'btn btn-sm btn-primary me-2'\n    : 'btn btn-sm btn-outline-primary me-2'\n\n  return (\n    <button\n      type=\"button\"\n      className={className}\n      onClick={onClick}\n    >{props.label}</button>\n  )\n}\n\nconst ModalPage = observer(function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n\n  const onClickModal = useCallback((e) => {\n    e.stopPropagation()\n    return\n  }, [])\n\n  const onClickClose = useCallback(() => {\n    store.togglePageVisible()\n  }, [store])\n\n  const onChangePageWidth = useCallback((e: FormEvent<HTMLInputElement>) => {\n    storeBook.updateBookPageProperty('pageSize', [\n      +e.currentTarget.value || 1,\n      storeBook.pageSize[1]\n    ])\n  }, [storeBook])\n  const onChangePageHeight = useCallback((e: FormEvent<HTMLInputElement>) => {\n    storeBook.updateBookPageProperty('pageSize', [\n      storeBook.pageSize[0],\n      +e.currentTarget.value || 1\n    ])\n  }, [storeBook])\n  const onSwitchPageSize = useCallback(() => {\n    storeBook.updateBookPageProperty('pageSize', [\n      storeBook.pageSize[1],\n      storeBook.pageSize[0]\n    ])\n  }, [storeBook])\n  const onChangeSizeWithDefaultValue = useCallback((key: string) => {\n    let func = PAGE_SIZE[key]\n    storeBook.updateBookPageProperty('pageSize', func())\n  }, [storeBook])\n  const onChangePagePosition = useCallback((value) => {\n    storeBook.updateBookPageProperty('pagePosition', value)\n  }, [storeBook])\n  const onChangePageShow = useCallback((value) => {\n    storeBook.updateBookPageProperty('pageShow', value)\n  }, [storeBook])\n  const onChangePageFit = useCallback((value) => {\n    storeBook.updateBookPageProperty('pageFit', value)\n  }, [storeBook])\n  // const onChangePageBackgroundColor = useCallback((value) => {\n  //   storeBook.updateBookPageProperty('pageBackgroundColor', value)\n  // }, [storeBook])\n  const onChangePageDirection = useCallback((value) => {\n    storeBook.updateBookPageProperty('pageDirection', value)\n  }, [storeBook])\n  const onChangeCoverPosition = useCallback((value) => {\n    storeBook.updateBookPageProperty('coverPosition', value)\n  }, [storeBook])\n\n  return (\n    <div className=\"modal-dialog modal-md\" onClick={onClickModal}>\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">Page</h5>\n          <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" onClick={onClickClose}></button>\n        </div>\n        <div className=\"modal-body\">\n          <div className=\"mb-2 row\">\n            <label className=\"col-3 col-form-label text-end\">size</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <div className=\"row justify-content-between\">\n                <div className=\"col-5 d-flex align-items-center\">\n                  <div className=\"input-group input-group-sm\">\n                    <span className=\"input-group-text\">w</span>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      min=\"1\"\n                      max=\"9999\"\n                      value={storeBook.pageSize[0]}\n                      onInput={onChangePageWidth}\n                    />\n                  </div>\n                </div>\n                <div className=\"col-2 d-flex justify-content-center\">\n                  <button type=\"button\" className=\"btn btn-sm btn-secondary d-flex justify-content-center align-items-center\" onClick={onSwitchPageSize}>\n                    <Icon name=\"cycle\"/>\n                  </button>\n                </div>\n                <div className=\"col-5 d-flex align-items-center\">\n                  <div className=\"input-group input-group-sm\">\n                    <span className=\"input-group-text\">h</span>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      min=\"1\"\n                      max=\"9999\"\n                      value={storeBook.pageSize[1]}\n                      onInput={onChangePageHeight}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"mb-2 row\">\n            <div className=\"col-3\"></div>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current=\"x\" value=\"B4\" label=\"B4\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"B5\" label=\"B5\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"A4\" label=\"A4\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"A5\" label=\"A5\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"CG 16:9\" label=\"CG 16:9\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"CG 16:10\" label=\"CG 16:10\" onClick={onChangeSizeWithDefaultValue}/>\n            </div>\n          </div>\n          <div className=\"mb-2 row\">\n            <label htmlFor=\"input-page-position\" className=\"col-3 col-form-label text-end\">position</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current={storeBook.pagePosition} value=\"center\" label=\"center\" onClick={onChangePagePosition} />\n              <ButtonRadio current={storeBook.pagePosition} value=\"between\" label=\"between\" onClick={onChangePagePosition} />\n            </div>\n          </div>\n          <div className=\"mb-2 row\">\n            <label className=\"col-3 col-form-label text-end\">show</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current={storeBook.pageShow} value=\"two\" label=\"two pages\" onClick={onChangePageShow} />\n              <ButtonRadio current={storeBook.pageShow} value=\"one\" label=\"one page\" onClick={onChangePageShow} />\n            </div>\n          </div>\n          <div className=\"mb-2 row\">\n            <label className=\"col-3 col-form-label text-end\">fit</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current={storeBook.pageFit} value=\"stretch\" label=\"stretch\" onClick={onChangePageFit} />\n              <ButtonRadio current={storeBook.pageFit} value=\"fit\" label=\"fit\" onClick={onChangePageFit} />\n              <ButtonRadio current={storeBook.pageFit} value=\"fill\" label=\"fill\" onClick={onChangePageFit} />\n            </div>\n          </div>\n          {\n            // <div className=\"mb-2 row\">\n            //   <label className=\"col-3 col-form-label text-end\">background</label>\n            //   <div className=\"col-9 d-flex align-items-center\">\n            //     <ButtonRadio current={storeBook.pageBackgroundColor} value=\"white\" label=\"white\" onClick={onChangePageBackgroundColor} />\n            //     <ButtonRadio current={storeBook.pageBackgroundColor} value=\"black\" label=\"black\" onClick={onChangePageBackgroundColor} />\n            //   </div>\n            // </div>\n          }\n          <div className=\"mb-2 row\">\n            <label className=\"col-3 col-form-label text-end\">direction</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current={storeBook.pageDirection} value=\"right\" label=\"right (japanese style)\" onClick={onChangePageDirection} />\n              <ButtonRadio current={storeBook.pageDirection} value=\"left\" label=\"left\" onClick={onChangePageDirection} />\n            </div>\n          </div>\n          <div className=\"mb-2 row\">\n            <label className=\"col-3 col-form-label text-end\">cover</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current={storeBook.coverPosition} value=\"first-page\" label=\"first page\" onClick={onChangeCoverPosition} />\n              <ButtonRadio current={storeBook.coverPosition} value=\"alone\" label=\"alone\" onClick={onChangeCoverPosition} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n})\n\nconst Modal = function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n\n  const modalVisible = store.modalBookVisible || store.modalContentVisible || store.modalPageVisible\n\n  const onClickClose = useCallback(() => {\n    store.hideModal()\n  }, [store])\n\n  return modalVisible ? (\n    <div id=\"modal\" className=\"modal fade show\" style={{display:'block'}} onClick={onClickClose}>\n      {\n        !store.modalBookVisible ? null : <ModalBook />\n      }\n      {\n        !store.modalContentVisible ? null : <ModalContents />\n      }\n      {\n        !store.modalPageVisible ? null : <ModalPage />\n      }\n    </div>\n  ) : null\n}\n\nconst ModalBackDrop = observer(function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n  const modalVisible = store.modalBookVisible || store.modalContentVisible || store.modalPageVisible\n\n  return modalVisible\n    ? <div key=\"modal-backdrop\" className=\"modal-backdrop fade show\"/>\n    : null\n})\n\nexport { ModalBackDrop }\nexport default observer(Modal)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\nimport 'components/icon'\nimport './index.css'\n\nimport Header from 'components/header'\nimport Main from 'components/main'\nimport Modal, { ModalBackDrop } from 'components/modal'\n\nfunction renderComponent(reactComponent: React.ReactElement) {\n  const container = document.createElement('div')\n  const Portal = () => {\n    return ReactDOM.createPortal(reactComponent, document.body)\n  }\n  ReactDOM.render(<Portal/>, container)\n}\n\nrenderComponent(<Header />)\nrenderComponent(<Main />)\nrenderComponent(<Modal />)\nrenderComponent(<ModalBackDrop />)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}