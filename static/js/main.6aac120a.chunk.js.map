{"version":3,"sources":["reportWebVitals.ts","components/icon.tsx","utils/get-uuid.ts","store/book.ts","store/ui.ts","utils/deep-clone.js","store/contents.ts","store/blobs.ts","template/container.xml.js","template/mimetype","template/page.xhtml.js","template/fixed-layout-jp.css.js","template/standard.opf.js","template/navigation-documents.xhtml.js","store/main.ts","components/header.tsx","components/main.tsx","components/modal/index.tsx","index.tsx"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","document","body","insertAdjacentHTML","Icon","props","className","xlinkHref","name","generateRandomUUID","uuid","i","String","Math","ceil","random","Store","makeAutoObservable","this","blobUUIDs","newPages","map","index","blobID","sticky","blank","pages","toJS","newPageItem1","newPageItem2","splice","key","value","Object","assign","targetIndex","pageItem","maxIndex","length","part1","slice","part2","filter","item","newPageItem","push","currentIndex","observable","action","fileName","firstImport","modalAnalyzeVisible","modalBookVisible","modalContentVisible","modalPageVisible","selectedPageIndex","deepClone","target","newObj","Array","Date","val","cloneState","list","indexMap","listIndex","call","pageIndex","contentItems","forEach","newIndexMap","originListIndex","contentItem","title","0","getImageWithBlobURL","blobURL","Promise","resolve","reject","image","Image","onerror","e","onload","src","formatBlobItem","blob","a","URL","createObjectURL","originImage","canvas","createElement","width","height","context","getContext","imageSmoothingQuality","drawImage","toBlob","thumbnailBlob","thumbnailURL","blobs","uuids","formatBlobs","all","console","error","alert","runInAction","getText","htmlToEscape","str","replace","$0","c","charCodeAt","r","join","getNumberStr","num","zeroCount","store","ui","Ui","book","Book","contents","Contents","storeBlobs","fileList","pushNewPage","switchIndex","selectPageIndex","updateList","updatePageItemIndex","blobItem","mime","type","w1","w2","canvas1","canvas2","ctx1","ctx2","splitPage","pageDirection","reverse","insertBlankPage","removePage","templateContainerXml","getTemplateContainerXml","templatePageXhtml","getTemplatePageXhtml","templateFixedLayoutJpCss","getTemplateFixedLayoutJpCss","templateStandardOpf","getTemplateStandardOpf","templateNavigationDocumentsXhtml","getTemplateNavigationDocumentsXhtml","Zip","JSZip","folder","keys","imageItemStr","pageItemStr","itemRefStr","spread","numStr","imageFileName","mimeType","viewPortWidth","pageSize","viewPortHeight","fitMode","pageFit","bookTitle","trim","file","RegExp","par","pagePosition","authorsStr","bookAuthors","bookID","bookSubject","bookPublisher","pageShow","toISOString","generateAsync","anchor","objectURL","window","download","href","click","revokeObjectURL","PageControl","observer","onUseImageSizeToPage","useCallback","storeMain","updateBookPageProperty","onChangePageIndex","max","inputValue","prompt","parseInt","isNaN","replacePageIndex","onSetContentq","setPageIndexToTitle","currentTarget","dataset","onSplitPage","onRemovePage","confirm","disabled","blankPage","onClick","style","top","left","data-index","AcceptMap","zip","epub","MultipleAttrMap","blobToFile","theBlob","b","lastModifiedDate","React","useContext","createContext","inputRef","useRef","useState","inputType","setInputType","onClickToggleBookVisible","toggleBookVisible","onClickToggleContentVisible","toggleContentVisible","onClickTogglePageVisible","togglePageVisible","onClickImport","newType","current","handleGetFile","input","files","loadAsync","zipContent","promises","values","zipItem","dir","async","uint8Array","from","Uint8Array","subarray","toString","Blob","importPageFromImages","toggleAnalyzeVisible","onClickInsertBlankPage","onClickGenerate","generateBook","useLayoutEffect","setTimeout","id","data-type","ref","accept","multiple","onChange","display","PageCard","storeUI","storeBook","storeContent","onClickImage","pageItemIndex","preserveAspectRatio","imageFocus","viewBox","x","y","fill","pageBackgroundColor","stroke","strokeWidth","role","DoublePageCard","leftSidePageIndex","rightSidePageIndex","leftSidePage","rightSidePage","computedStyle","getComputedStyle","documentElement","CARD_BOX_WIDTH","getPropertyValue","CARD_BOX_MARGIN","mainRef","showPages","setShowPages","pageResizeCallback","pageWidth","clientWidth","boxCountInOneRow","floor","rowCount","j","len","getElementById","useEffect","useMount","addEventListener","row","PAGE_SIZE","KeywordPicker","keywords","ModalAnalyzeFileName","setFileName","formTitle","setFormTitle","formAuthors","setFormAuthors","formPublisher","setFormPublisher","setKeywords","onClickModal","stopPropagation","onClickClose","onChangeFormTitle","onChangeFormAuthors","onChangeFormPublisher","onClickSave","reg","suffix0","exec","suffix1","suffix2","suffix3","suffix","author","match","pop","indexOf","titleAndPrefix","split","data-bs-dismiss","aria-label","htmlFor","ModalBook","onChangeBookID","eventTarget","onChangeBookTitle","onAddAuthor","newValue","onRemoveAuthor","onChangeBookAuthors","onChangeBookSubject","onChangeBookPublisher","onInput","ModalContents","plainMode","setPlainMode","tempList","setTempList","textAreaInput","setTextAreaInput","togglePlainMode","abs","onInputPageIndex","newList","onInputTitle","onClickAdd","onClickRemove","onSortList","sort","onFocusNumberInput","select","onTextareaInput","onSave","cols","rows","placeholder","resize","onFocus","ButtonRadio","label","ModalPage","onChangePageWidth","onChangePageHeight","onSwitchPageSize","onChangeSizeWithDefaultValue","func","onChangePagePosition","onChangePageShow","onChangePageFit","onChangePageDirection","min","ModalBackDrop","renderComponent","reactComponent","container","Portal","ReactDOM","createPortal","render"],"mappings":"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","file":"static/js/main.6aac120a.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const iconString = `<svg aria-hidden=\"true\" style=\"position: absolute; width: 0; height: 0; overflow: hidden;\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<defs>\n<symbol id=\"icon-price-tag\" viewBox=\"0 0 20 20\"><path d=\"M19.388 0.405c-0.111-0.314-0.454-0.48-0.769-0.371s-0.481 0.455-0.372 0.77c0.929 2.67-0.915 4.664-2.321 5.732l-0.568-0.814c-0.191-0.273-0.618-0.5-0.95-0.504l-3.188 0.014c-0.332-0.006-0.825 0.146-1.097 0.338l-9.394 6.587c-0.455 0.32-0.565 0.947-0.247 1.404l4.269 6.108c0.32 0.455 0.831 0.4 1.287 0.082l9.394-6.588c0.27-0.191 0.582-0.603 0.692-0.918l0.998-3.145c0.11-0.314 0.043-0.793-0.148-1.066l-0.346-0.496c1.888-1.447 3.848-4.004 2.76-7.133zM15.017 9.763c-0.727 0.51-1.731 0.332-2.24-0.396-0.511-0.73-0.333-1.734 0.395-2.246 0.578-0.405 1.328-0.376 1.868 0.017-0.272 0.164-0.459 0.26-0.494 0.275-0.301 0.143-0.43 0.504-0.288 0.805 0.104 0.219 0.321 0.348 0.547 0.348 0.086 0 0.174-0.020 0.257-0.059 0.194-0.092 0.402-0.201 0.619-0.33 0.097 0.594-0.139 1.217-0.664 1.586z\"></path></symbol>\n<symbol id=\"icon-heart\" viewBox=\"0 0 20 20\"><path d=\"M17.19 4.155c-1.672-1.534-4.383-1.534-6.055 0l-1.135 1.042-1.136-1.042c-1.672-1.534-4.382-1.534-6.054 0-1.881 1.727-1.881 4.52 0 6.246l7.19 6.599 7.19-6.599c1.88-1.726 1.88-4.52 0-6.246z\"></path></symbol>\n<symbol id=\"icon-star\" viewBox=\"0 0 20 20\"><path d=\"M10 1.3l2.388 6.722h6.412l-5.232 3.948 1.871 6.928-5.439-4.154-5.438 4.154 1.87-6.928-5.233-3.948h6.412l2.389-6.722z\"></path></symbol>\n<symbol id=\"icon-save\" viewBox=\"0 0 20 20\"><path d=\"M15.173 2h-11.173c-1.101 0-2 0.9-2 2v12c0 1.1 0.899 2 2 2h12c1.101 0 2-0.9 2-2v-10.873l-2.827-3.127zM14 8c0 0.549-0.45 1-1 1h-6c-0.55 0-1-0.451-1-1v-5h8v5zM13 4h-2v4h2v-4z\"></path></symbol>\n<symbol id=\"icon-retweet\" viewBox=\"0 0 20 20\"><path d=\"M5 13v-5h2l-3.5-4-3.5 4h2v6c0 1.104 0.895 2 2 2h9.482l-2.638-3h-5.844zM9.156 7l-2.638-3h9.482c1.104 0 2 0.897 2 2v6h2l-3.5 4-3.5-4h2v-5h-5.844z\"></path></symbol>\n<symbol id=\"icon-notification\" viewBox=\"0 0 20 20\"><path d=\"M15 8.38v8.62h-12v-12h8.62c-0.073-0.322-0.12-0.655-0.12-1s0.047-0.678 0.12-1h-8.62c-1.102 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12c1.1 0 2-0.9 2-2v-8.62c-0.322 0.073-0.655 0.12-1 0.12s-0.678-0.047-1-0.12zM16 1c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3-1.343-3-3-3z\"></path></symbol>\n<symbol id=\"icon-chevron-down\" viewBox=\"0 0 20 20\"><path d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path></symbol>\n<symbol id=\"icon-chevron-left\" viewBox=\"0 0 20 20\"><path d=\"M12.452 4.516c0.446 0.436 0.481 1.043 0 1.576l-3.747 3.908 3.747 3.908c0.481 0.533 0.446 1.141 0 1.574-0.445 0.436-1.197 0.408-1.615 0-0.418-0.406-4.502-4.695-4.502-4.695-0.223-0.217-0.335-0.502-0.335-0.787s0.112-0.57 0.335-0.789c0 0 4.084-4.287 4.502-4.695s1.17-0.436 1.615 0z\"></path></symbol>\n<symbol id=\"icon-chevron-right\" viewBox=\"0 0 20 20\"><path d=\"M9.163 4.516c0.418 0.408 4.502 4.695 4.502 4.695 0.223 0.219 0.335 0.504 0.335 0.789s-0.112 0.57-0.335 0.787c0 0-4.084 4.289-4.502 4.695-0.418 0.408-1.17 0.436-1.615 0-0.446-0.434-0.481-1.041 0-1.574l3.747-3.908-3.747-3.908c-0.481-0.533-0.446-1.141 0-1.576s1.197-0.409 1.615 0z\"></path></symbol>\n<symbol id=\"icon-chevron-up\" viewBox=\"0 0 20 20\"><path d=\"M15.484 12.452c-0.436 0.446-1.043 0.481-1.576 0l-3.908-3.747-3.908 3.747c-0.533 0.481-1.141 0.446-1.574 0-0.436-0.445-0.408-1.197 0-1.615 0.406-0.418 4.695-4.502 4.695-4.502 0.217-0.223 0.502-0.335 0.787-0.335s0.57 0.112 0.789 0.335c0 0 4.287 4.084 4.695 4.502s0.436 1.17 0 1.615z\"></path></symbol>\n<symbol id=\"icon-minus\" viewBox=\"0 0 20 20\"><path d=\"M16 10c0 0.553-0.048 1-0.601 1h-10.798c-0.552 0-0.601-0.447-0.601-1s0.049-1 0.601-1h10.799c0.552 0 0.6 0.447 0.6 1z\"></path></symbol>\n<symbol id=\"icon-plus\" viewBox=\"0 0 20 20\"><path d=\"M16 10c0 0.553-0.048 1-0.601 1h-4.399v4.399c0 0.552-0.447 0.601-1 0.601s-1-0.049-1-0.601v-4.399h-4.399c-0.552 0-0.601-0.447-0.601-1s0.049-1 0.601-1h4.399v-4.399c0-0.553 0.447-0.601 1-0.601s1 0.048 1 0.601v4.399h4.399c0.553 0 0.601 0.447 0.601 1z\"></path></symbol>\n<symbol id=\"icon-tools\" viewBox=\"0 0 20 20\"><path d=\"M3.135 6.89c0.933-0.725 1.707-0.225 2.74 0.971 0.116 0.135 0.272-0.023 0.361-0.1 0.088-0.078 1.451-1.305 1.518-1.361 0.066-0.059 0.146-0.169 0.041-0.292-0.107-0.123-0.494-0.625-0.743-0.951-1.808-2.365 4.946-3.969 3.909-3.994-0.528-0.014-2.646-0.039-2.963-0.004-1.283 0.135-2.894 1.334-3.705 1.893-1.061 0.726-1.457 1.152-1.522 1.211-0.3 0.262-0.048 0.867-0.592 1.344-0.575 0.503-0.934 0.122-1.267 0.414-0.165 0.146-0.627 0.492-0.759 0.607-0.133 0.117-0.157 0.314-0.021 0.471 0 0 1.264 1.396 1.37 1.52 0.105 0.122 0.391 0.228 0.567 0.071 0.177-0.156 0.632-0.553 0.708-0.623 0.078-0.066-0.050-0.861 0.358-1.177zM8.843 7.407c-0.12-0.139-0.269-0.143-0.397-0.029l-1.434 1.252c-0.113 0.1-0.129 0.283-0.027 0.4l8.294 9.439c0.194 0.223 0.53 0.246 0.751 0.053l0.97-0.813c0.222-0.195 0.245-0.533 0.052-0.758l-8.209-9.544zM19.902 3.39c-0.074-0.494-0.33-0.391-0.463-0.182-0.133 0.211-0.721 1.102-0.963 1.506-0.24 0.4-0.832 1.191-1.934 0.41-1.148-0.811-0.749-1.377-0.549-1.758 0.201-0.383 0.818-1.457 0.907-1.59 0.089-0.135-0.015-0.527-0.371-0.363s-2.523 1.025-2.823 2.26c-0.307 1.256 0.257 2.379-0.85 3.494l-1.343 1.4 1.349 1.566 1.654-1.57c0.394-0.396 1.236-0.781 1.998-0.607 1.633 0.369 2.524-0.244 3.061-1.258 0.482-0.906 0.402-2.814 0.327-3.308zM2.739 17.053c-0.208 0.209-0.208 0.549 0 0.758l0.951 0.93c0.208 0.209 0.538 0.121 0.746-0.088l4.907-4.824-1.503-1.714-5.101 4.938z\"></path></symbol>\n<symbol id=\"icon-bookmark\" viewBox=\"0 0 20 20\"><path d=\"M14 2v17l-4-4-4 4v-17c0-0.553 0.585-1.020 1-1h6c0.689-0.020 1 0.447 1 1z\"></path></symbol>\n<symbol id=\"icon-bookmarks\" viewBox=\"0 0 20 20\"><path d=\"M15 0h-4c-0.553 0-1 0.447-1 1l0.023 0.222c1.102 0 2 0.897 2 2v11.359l0.977-1.181 3 3.6v-16c0-0.553-0.447-1-1-1zM9.023 3h-4.023c-0.553 0-1 0.447-1 1v16l3-3.6 3 3.6v-16c0-0.553-0.424-1-0.977-1z\"></path></symbol>\n<symbol id=\"icon-document\" viewBox=\"0 0 20 20\"><path d=\"M16 1h-12c-0.553 0-1 0.447-1 1v16c0 0.552 0.447 1 1 1h12c0.553 0 1-0.448 1-1v-16c0-0.552-0.447-1-1-1zM15 17h-10v-14h10v14z\"></path></symbol>\n<symbol id=\"icon-upload\" viewBox=\"0 0 20 20\"><path d=\"M8 12h4v-6h3l-5-5-5 5h3v6zM19.338 13.532c-0.21-0.224-1.611-1.723-2.011-2.114-0.265-0.259-0.644-0.418-1.042-0.418h-1.757l3.064 2.994h-3.544c-0.102 0-0.194 0.052-0.24 0.133l-0.816 1.873h-5.984l-0.816-1.873c-0.046-0.081-0.139-0.133-0.24-0.133h-3.544l3.063-2.994h-1.756c-0.397 0-0.776 0.159-1.042 0.418-0.4 0.392-1.801 1.891-2.011 2.114-0.489 0.521-0.758 0.936-0.63 1.449l0.561 3.074c0.128 0.514 0.691 0.936 1.252 0.936h16.312c0.561 0 1.124-0.422 1.252-0.936l0.561-3.074c0.126-0.513-0.142-0.928-0.632-1.449z\"></path></symbol>\n<symbol id=\"icon-cross\" viewBox=\"0 0 20 20\"><path d=\"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z\"></path></symbol>\n<symbol id=\"icon-list\" viewBox=\"0 0 20 20\"><path d=\"M14.4 9h-5.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h5.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM16.4 14h-7.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h7.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM8.6 6h7.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1h-7.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1zM5.4 9h-1.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h1.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM5.4 14h-1.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h1.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM5.4 4h-1.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h1.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1z\"></path></symbol>\n<symbol id=\"icon-menu\" viewBox=\"0 0 20 20\"><path d=\"M16.4 9h-12.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h12.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM16.4 13h-12.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1h12.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1zM3.6 7h12.8c0.552 0 0.6-0.447 0.6-1s-0.048-1-0.6-1h-12.8c-0.552 0-0.6 0.447-0.6 1s0.048 1 0.6 1z\"></path></symbol>\n<symbol id=\"icon-ruler\" viewBox=\"0 0 20 20\"><path d=\"M14.249 0.438l-13.811 13.813c-0.584 0.584-0.584 1.538 0.002 2.124l3.185 3.187c0.584 0.584 1.541 0.586 2.124 0.002l13.813-13.813c0.584-0.585 0.584-1.541 0-2.125l-3.186-3.188c-0.587-0.586-1.542-0.583-2.127 0zM3.929 15.312l-0.759 0.759-1.896-1.897 0.759-0.759 1.896 1.897zM6.965 15.312l-0.759 0.759-3.415-3.415 0.759-0.76 3.415 3.416zM6.965 12.276l-0.759 0.759-1.898-1.896 0.76-0.76 1.897 1.897zM8.483 10.758l-0.759 0.759-1.896-1.896 0.759-0.76 1.896 1.897zM11.518 10.758l-0.759 0.759-3.414-3.414 0.759-0.759 3.414 3.414zM11.518 7.723l-0.759 0.759-1.896-1.896 0.759-0.759 1.896 1.896zM13.036 6.206l-0.759 0.759-1.897-1.897 0.759-0.759 1.897 1.897zM16.072 6.206l-0.76 0.759-3.414-3.415 0.759-0.76 3.415 3.416zM16.071 3.171l-0.759 0.759-1.896-1.898 0.759-0.758 1.896 1.897z\"></path></symbol>\n<symbol id=\"icon-scissors\" viewBox=\"0 0 20 20\"><path d=\"M8.38 5.59c0-2.038-1.652-3.69-3.69-3.69s-3.69 1.652-3.69 3.69c0 2.038 1.652 3.69 3.69 3.69 0.96 0 1.826-0.376 2.483-0.976l1.827 1.687 0.012 0.009-0.004 0.003-1.836 1.693c-0.656-0.6-1.522-0.976-2.482-0.976-2.038 0-3.69 1.652-3.69 3.69s1.652 3.69 3.69 3.69 3.69-1.652 3.69-3.69c0-0.297-0.044-0.582-0.111-0.858l2.844-1.991 4.127 3.065c2.212 1.549 3.76-0.663 3.76-0.663l-10.731-7.515c0.066-0.276 0.111-0.561 0.111-0.858zM4.69 7.39c-0.994 0-1.8-0.806-1.8-1.8s0.806-1.8 1.8-1.8 1.8 0.806 1.8 1.8-0.806 1.8-1.8 1.8zM4.69 16.21c-0.994 0-1.8-0.806-1.8-1.8s0.806-1.8 1.8-1.8 1.8 0.806 1.8 1.8-0.806 1.8-1.8 1.8zM19 6.038c0 0-1.548-2.212-3.76-0.663l-3.205 2.235 2.354 1.648 4.611-3.22z\"></path></symbol>\n<symbol id=\"icon-swap\" viewBox=\"0 0 20 20\"><path d=\"M14 5h-10v-2l-4 3.5 4 3.5v-2h10v-3zM20 13.5l-4-3.5v2h-10v3h10v2l4-3.5z\"></path></symbol>\n<symbol id=\"icon-install\" viewBox=\"0 0 20 20\"><path d=\"M19.059 10.898l-3.171-7.927c-0.234-0.587-0.802-0.971-1.434-0.971h-2.434l0.38 4.065h2.7l-5.1 4.228-5.1-4.228h2.7l0.38-4.065h-2.434c-0.632 0-1.2 0.384-1.434 0.971l-3.171 7.927c-0.288 0.721-0.373 1.507-0.246 2.272l0.59 3.539c0.124 0.745 0.768 1.291 1.523 1.291h14.383c0.755 0 1.399-0.546 1.523-1.291l0.59-3.539c0.129-0.765 0.044-1.551-0.245-2.272zM16.959 15.245c-0.072 0.436-0.449 0.755-0.891 0.755h-12.136c-0.442 0-0.819-0.319-0.891-0.755l-0.365-2.193c-0.093-0.551 0.332-1.052 0.891-1.052h12.867c0.558 0 0.983 0.501 0.891 1.052l-0.366 2.193z\"></path></symbol>\n<symbol id=\"icon-book\" viewBox=\"0 0 20 20\"><path d=\"M17 5.95v10.351c0 0.522-0.452 0.771-1 1.16-0.44 0.313-1-0.075-1-0.587 0 0 0-9.905 0-10.114 0-0.211-0.074-0.412-0.314-0.535s-7.738-4.065-7.738-4.065c-0.121-0.045-0.649-0.378-1.353-0.016-0.669 0.344-1.033 0.718-1.126 0.894l8.18 4.482c0.217 0.114 0.351 0.29 0.351 0.516v10.802c0 0.23-0.142 0.476-0.369 0.585-0.104 0.052-0.219 0.077-0.333 0.077-0.135 0-0.271-0.033-0.386-0.104-0.215-0.131-7.774-4.766-8.273-5.067-0.24-0.144-0.521-0.439-0.527-0.658l-0.112-10.286c0-0.198-0.023-0.547 0.289-1.032 0.697-1.084 3.129-2.317 4.36-1.678l8.999 4.555c0.217 0.112 0.352 0.336 0.352 0.72z\"></path></symbol>\n<symbol id=\"icon-cycle\" viewBox=\"0 0 20 20\"><path d=\"M5.516 14.224c-2.262-2.432-2.222-6.244 0.128-8.611 0.962-0.969 2.164-1.547 3.414-1.736l-0.069-2.077c-1.755 0.213-3.452 0.996-4.797 2.351-3.149 3.17-3.187 8.289-0.123 11.531l-1.741 1.752 5.51 0.301-0.015-5.834-2.307 2.323zM12.163 2.265l0.015 5.834 2.307-2.322c2.262 2.434 2.222 6.246-0.128 8.611-0.961 0.969-2.164 1.547-3.414 1.736l0.069 2.076c1.755-0.213 3.452-0.996 4.798-2.35 3.148-3.172 3.186-8.291 0.122-11.531l1.741-1.754-5.51-0.3z\"></path></symbol>\n<symbol id=\"icon-tag\" viewBox=\"0 0 20 20\"><path d=\"M18.662 5.521l-13.425 13.479 0.707-4.967-4.945 0.709 13.425-13.479c0.391-0.392 1.133-0.308 1.412 0l2.826 2.839c0.5 0.473 0.391 1.026 0 1.419z\"></path></symbol>\n</defs>\n</svg>`\n\ndocument.body.insertAdjacentHTML('afterbegin', iconString)\n\ntype IconProps = ({ name: string; className?: string })\n\nconst Icon = function(props: IconProps) {\n  return (\n    <svg className={\"icon \" + (props.className || '')}>\n      <use xlinkHref={'#icon-' + props.name}></use>\n    </svg>\n  )\n}\n\nexport default Icon","const generateRandomUUID = () => {\n  const char = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n\n  let uuid = \"\"\n  let i = 36\n\n  while (i-- > 0) {\n    if (i === 27 || i === 22 || i === 17 || i === 12) {\n      uuid = uuid + \"-\"\n    } else {\n      uuid = uuid + String(char[Math.ceil(Math.random() * 35)])\n    }\n  }\n\n  return uuid\n}\n\nexport default generateRandomUUID","import { action, makeAutoObservable, observable, toJS } from \"mobx\"\nimport uuid from 'utils/get-uuid'\n\nexport declare namespace StoreBook {\n  export interface PageItem {\n    index: number,\n    blobID: string\n    sticky: 'auto' | 'left' | 'right',\n    blank: boolean\n  }\n}\n\ntype BookPageProperty = 'bookID' | 'bookTitle' | 'bookAuthors' | 'bookSubject' | 'bookPublisher' | 'pageSize' | 'pagePosition' | 'pageShow' | 'pageFit' | 'pageBackgroundColor' | 'pageDirection'\n\nclass Store {\n  @observable bookID: string = uuid()\n  @observable bookTitle: string = ''\n  @observable bookAuthors: string[] = ['']\n  @observable bookSubject: string = ''\n  @observable bookPublisher: string = ''\n\n  @observable pageSize: [number, number] = [250, 353]\n  @observable pagePosition: ('center' | 'between') = 'between'\n  @observable pageShow: ('two' | 'one') = 'two'\n  @observable pageFit: ('stretch' | 'fit' | 'fill') = 'stretch'\n  @observable pageBackgroundColor: ('white' | 'black') = 'white'\n  @observable pageDirection: ('right' | 'left') = 'right'\n\n  @observable pages: StoreBook.PageItem[] = []\n\n  constructor() {\n    makeAutoObservable(this)\n  }\n\n  @action\n  pushNewPage(blobUUIDs: string[]) {\n    const newPages: StoreBook.PageItem[] = blobUUIDs.map((uuid, index) => ({\n      index,\n      blobID: uuid,\n      sticky: 'auto',\n      blank: false\n    }))\n\n    const pages = toJS(this.pages)\n    this.pages = [...pages, ...newPages]\n  }\n\n  splitPage(index: number, blobUUIDs: string[]) {\n    const pages = toJS(this.pages)\n\n    const newPageItem1: StoreBook.PageItem = {\n      index,\n      blobID: blobUUIDs[0],\n      sticky: 'auto',\n      blank: false\n    }\n    const newPageItem2: StoreBook.PageItem = {\n      index: -1,\n      blobID: blobUUIDs[1],\n      sticky: 'auto',\n      blank: false\n    }\n\n    pages.splice(index, 1, newPageItem1, newPageItem2)\n\n    this.pages = pages\n  }\n\n  @action\n  updateBookPageProperty(key: BookPageProperty, value: any) {\n    Object.assign(this, {\n      [key]: value\n    })\n  }\n\n  @action\n  removePage(index: number) {\n    const pages = toJS(this.pages)\n    pages.splice(index, 1)\n    this.pages = pages\n  }\n\n  @action\n  switchIndex(index: number, targetIndex: number) {\n    let pages: (StoreBook.PageItem | null)[] = toJS(this.pages)\n    const pageItem = pages[index]\n    const maxIndex = pages.length - 1\n\n    pages[index] = null\n    const part1 = pages.slice(0, targetIndex)\n    const part2 = pages.slice(targetIndex, maxIndex + 1)\n    pages = [...part1, pageItem, ...part2].filter(item => item)\n\n    this.pages = pages as StoreBook.PageItem[]\n  }\n\n  @action\n  updatePageItemIndex() {\n    const pages = toJS(this.pages)\n\n    this.pages = pages.map((pageItem: StoreBook.PageItem, i: number) => {\n      pageItem.index = i\n      return pageItem\n    })\n  }\n\n  @action\n  insertBlankPage(index: number) {\n    const pages = toJS(this.pages)\n    const maxIndex = pages.length - 1\n\n    const newPageItem: StoreBook.PageItem = {\n      index: -1,\n      blobID: '',\n      sticky: 'auto',\n      blank: true\n    }\n\n    if (index >= maxIndex) {\n      pages.push(newPageItem)\n    } else {\n      const currentIndex = index < 0 ? 0 : index\n      const pageItem = pages[currentIndex]\n      pages.splice(currentIndex, 1, newPageItem, pageItem)\n    }\n\n    this.pages = pages\n  }\n}\n\nexport default Store","import { makeAutoObservable, observable, action } from \"mobx\"\n\nclass Store {\n  @observable modalAnalyzeVisible = false\n  @observable modalBookVisible = false\n  @observable modalContentVisible = false\n  @observable modalPageVisible = false\n  @observable maxCardBoxCountInOneRow = 0\n  @observable selectedPageIndex: number | null = null\n\n  fileName = ``\n  firstImport = true\n\n  constructor() {\n    makeAutoObservable(this)\n  }\n\n  @action\n  toggleAnalyzeVisible(fileName?: string) {\n    if (fileName) {\n      this.fileName = fileName\n    }\n    this.modalAnalyzeVisible = !this.modalAnalyzeVisible\n  }\n\n  @action\n  toggleBookVisible() {\n    this.firstImport = false\n    this.modalBookVisible = !this.modalBookVisible\n  }\n\n  @action\n  toggleContentVisible() {\n    this.modalContentVisible = !this.modalContentVisible\n  }\n\n  @action\n  togglePageVisible() {\n    this.modalPageVisible = !this.modalPageVisible\n  }\n\n  @action\n  hideModal() {\n    Object.assign(this, {\n      modalBookVisible: false,\n      modalContentVisible: false,\n      modalPageVisible: false,\n    })\n  }\n\n  @action\n  selectPageIndex(index: number | null) {\n    if (index === null) {\n      this.selectedPageIndex = null\n    } else if (this.selectedPageIndex === index) {\n      this.selectedPageIndex = null\n    } else {\n      this.selectedPageIndex = index\n    }\n  }\n}\n\nexport default Store","const deepClone = (target) => {\n  if (target && typeof target === 'object') {\n    const newObj = target instanceof Array ? [] : target instanceof Date ? new Date(+target) : {}\n    for (const key in target) {\n      const val = target[key]\n      newObj[key] = deepClone(val)\n    }\n    return newObj\n  }\n\n  return target\n}\n\nexport default deepClone\n","import { action, makeAutoObservable, observable, toJS } from \"mobx\"\nimport deepClone from \"utils/deep-clone\"\n\ninterface ContentItem {\n  pageIndex: number | null\n  title: string\n}\n\ninterface IndexMap { [pageIndex: string]: number }\n\nconst cloneState = function(this: Store) {\n  return {\n    list: deepClone(toJS(this.list)),\n    indexMap: deepClone(toJS(this.indexMap))\n  }\n}\n\nclass Store {\n  @observable list: ContentItem[] = [{\n    pageIndex: 0,\n    title: '表紙'\n  }]\n\n  @observable indexMap: IndexMap = {\n     0: 0\n  }\n\n  constructor() {\n    makeAutoObservable(this)\n  }\n\n  @action\n  removeTitle(listIndex: number) {\n    const { list, indexMap } = cloneState.call(this)\n\n    if (list.length === 1) {\n      return\n    }\n\n    const item = list[listIndex]\n\n    list.splice(listIndex, 1)\n    if (item.pageIndex && (item.pageIndex in indexMap)) {\n      delete indexMap[item.pageIndex]\n    }\n\n    this.list = list\n    this.indexMap = indexMap\n  }\n\n  @action\n  updateList(contentItems: ContentItem[]) {\n    const indexMap: IndexMap = {}\n\n    contentItems.forEach((item, index) => {\n      if (item.pageIndex !== null) {\n        indexMap[item.pageIndex] = index\n      }\n    })\n\n    this.list = contentItems\n    this.indexMap = indexMap\n  }\n\n  @action\n  setPageIndexToTitle(listIndex: number, pageIndex: number) {\n    const { list, indexMap } = cloneState.call(this)\n\n    if (indexMap[pageIndex] && indexMap[pageIndex] === listIndex) {\n      return\n    }\n\n    const newIndexMap: IndexMap = {}\n    const originListIndex = pageIndex in indexMap ? indexMap[pageIndex] : null\n\n    if (originListIndex !== null) {\n      list[originListIndex].pageIndex = null\n    }\n\n    list[listIndex].pageIndex = pageIndex\n\n    list.forEach((contentItem: ContentItem, index: number) => {\n      if (contentItem.pageIndex !== null) {\n        newIndexMap[contentItem.pageIndex] = index\n      }\n    })\n\n    this.list = list\n    this.indexMap = newIndexMap\n  }\n\n  @action\n  removePageIndex(listIndex: number) {\n    const { list, indexMap } = cloneState.call(this)\n\n    const item = list[listIndex]\n    list[listIndex].pageIndex = null\n    delete indexMap[item.pageIndex as number]\n\n    this.list = list\n    this.indexMap = indexMap\n  }\n}\n\nexport default Store","import { action, makeAutoObservable, observable, runInAction } from \"mobx\"\n\nexport declare namespace StoreBlobs {\n  export interface ImageBlob {\n    blob: Blob\n    blobURL: string\n    thumbnailURL: string\n    originImage: HTMLImageElement\n  }\n}\n\nconst getImageWithBlobURL = (blobURL: string): Promise<HTMLImageElement> => new Promise<HTMLImageElement>((resolve, reject) => {\n  const image = new Image()\n  image.onerror = (e) => reject(e)\n  image.onload = (e) => {\n    resolve(image)\n  }\n  image.src = blobURL\n})\n\nconst formatBlobItem = async (blob: Blob) => {\n  const blobURL = URL.createObjectURL(blob)\n\n  const originImage = await getImageWithBlobURL(blobURL)\n\n  const canvas = document.createElement(\"canvas\")\n  if (originImage.width < originImage.height) {\n    canvas.width = originImage.width / originImage.height * 200\n    canvas.height = 200\n  } else if (originImage.width > originImage.height) {\n    canvas.width = 200\n    canvas.height = originImage.height / originImage.width * 200\n  } else {\n    canvas.width = 200\n    canvas.height = 200\n  }\n\n  const context = canvas.getContext('2d') as CanvasRenderingContext2D\n  context.imageSmoothingQuality = 'high'\n  context.drawImage(originImage, 0, 0, canvas.width, canvas.height)\n\n  const thumbnailBlob = await new Promise<Blob>(\n    (resolve, reject) => canvas.toBlob(\n      blob => blob ? resolve(blob) : reject()\n    )\n  )\n\n  const item: StoreBlobs.ImageBlob = {\n    blob,\n    blobURL,\n    thumbnailURL: URL.createObjectURL(thumbnailBlob),\n    originImage\n  }\n\n  return item\n}\n\nclass Store {\n  @observable blobs: ({[id: string]: StoreBlobs.ImageBlob}) = {}\n\n  constructor() {\n    makeAutoObservable(this)\n  }\n\n  @action\n  async push(blobs: Blob[], uuids: string[]) {\n    let formatBlobs: StoreBlobs.ImageBlob[] = []\n\n    try {\n      formatBlobs = await Promise.all(blobs.map(formatBlobItem))\n    } catch (err) {\n      console.error(err)\n      alert('错误\\nError')\n      return\n    }\n\n    runInAction(() => {\n      const blobs: ({[id: string]: StoreBlobs.ImageBlob}) = {}\n\n      uuids.forEach((uuid, index) => {\n        blobs[uuid] = formatBlobs[index]\n      })\n\n      // Object.assign(this.blobs, blobs)\n      this.blobs = {\n        ...this.blobs,\n        ...blobs\n      }\n    })\n  }\n}\n\nexport { Store }\nexport default new Store()","const getText = () => `<?xml version=\"1.0\"?>\n<container\n version=\"1.0\"\n xmlns=\"urn:oasis:names:tc:opendocument:xmlns:container\"\n>\n<rootfiles>\n<rootfile\n full-path=\"OEBPS/standard.opf\"\n media-type=\"application/oebps-package+xml\"\n/>\n</rootfiles>\n</container>`\n\nexport default getText","export default __webpack_public_path__ + \"static/media/mimetype.163d0a1c.bin\";","const getText = () => `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html>\n<html\n xmlns=\"http://www.w3.org/1999/xhtml\"\n xmlns:epub=\"http://www.idpf.org/2007/ops\"\n xml:lang=\"ja\"\n>\n<head>\n<meta charset=\"UTF-8\" />\n<title>{{title}}</title>\n<link rel=\"stylesheet\" type=\"text/css\" href=\"../style/fixed-layout-jp.css\"/>\n<meta name=\"viewport\" content=\"width={{width}}, height={{height}}\"/>\n</head>\n<body>\n<div class=\"main\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"\n xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n width=\"100%\" height=\"100%\" viewBox=\"0 0 {{width}} {{height}}\">\n{{image}}\n</svg>\n</div>\n</body>\n</html>`\n\nexport default getText","const getText = () =>`@charset \"UTF-8\";\n\nhtml,\nbody {\n    margin:    0;\n    padding:   0;\n    font-size: 0;\n}\nsvg {\n    margin:    0;\n    padding:   0;\n}\n`\n\nexport default getText","const getText = () => `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<package xmlns=\"http://www.idpf.org/2007/opf\" version=\"3.0\" xml:lang=\"ja\" unique-identifier=\"unique-id\" prefix=\"rendition: http://www.idpf.org/vocab/rendition/#         epub-bundle-tool: https://wing-kai.github.io/epub-manga-creator/         ebpaj: http://www.ebpaj.jp/         fixed-layout-jp: http://www.digital-comic.jp/\">\n\n<metadata xmlns:dc=\"http://purl.org/dc/elements/1.1/\">\n\n<!-- 作品名 -->\n<dc:title id=\"title\">{{title}}</dc:title>\n<meta refines=\"#title\" property=\"file-as\"></meta>\n\n<!-- 著者名 -->\n<!-- creator-list -->\n\n<dc:subject>{{subject}}</dc:subject>\n\n<!-- 出版社名 -->\n<dc:publisher id=\"publisher\">{{publisher}}</dc:publisher>\n<meta refines=\"#publisher\" property=\"file-as\"></meta>\n\n<!-- 言語 -->\n<dc:language>ja</dc:language>\n\n<!-- ファイルid -->\n<dc:identifier id=\"unique-id\">urn:uuid:{{uuid}}</dc:identifier>\n\n<!-- 更新日 -->\n<meta property=\"dcterms:modified\">{{createTime}}</meta>\n\n<!-- Fixed-Layout Documents指定 -->\n<meta property=\"rendition:layout\">pre-paginated</meta>\n<meta property=\"rendition:spread\">{{spread}}</meta>\n\n<!-- etc. -->\n<meta property=\"ebpaj:guide-version\">1.1</meta>\n<meta name=\"SpineColor\" content=\"#FFFFFF\"></meta>\n<meta name=\"cover\" content=\"cover\"></meta>\n\n</metadata>\n\n<manifest>\n\n<!-- navigation -->\n<item media-type=\"application/xhtml+xml\" id=\"toc\" href=\"navigation-documents.xhtml\" properties=\"nav\"></item>\n\n<!-- style -->\n<item media-type=\"text/css\" id=\"fixed-layout-jp\" href=\"style/fixed-layout-jp.css\"></item>\n\n<!-- image -->\n<!-- item-image -->\n\n<!-- text -->\n<item id=\"p_cover\" href=\"text/p_cover.xhtml\" media-type=\"application/xhtml+xml\" properties=\"svg\" fallback=\"cover\"></item>\n<!-- item-xhtml -->\n\n</manifest>\n\n<spine{{direction}}>\n\n<itemref linear=\"yes\" idref=\"p_cover\" properties=\"rendition:page-spread-center\"></itemref>\n<!-- itemref-xhtml -->\n\n</spine>\n\n</package>`\n\nexport default getText","const getText = () => `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html><html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:epub=\"http://www.idpf.org/2007/ops\" xml:lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\"></meta>\n<title>Navigation</title>\n</head>\n<body>\n<nav epub:type=\"toc\" id=\"toc\">\n<h1>Navigation</h1>\n<ol>\n<!-- navigation-list -->\n</ol>\n</nav>\n<nav epub:type=\"landmarks\">\n<ol>\n<li><a epub:type=\"bodymatter\" href=\"text/p_cover.xhtml\">Start of Content</a></li>\n</ol>\n</nav>\n</body>\n</html>\n`\n\nexport default getText","import { action, makeAutoObservable, observable, toJS } from \"mobx\"\nimport uuid from 'utils/get-uuid'\nimport Book from 'store/book'\nimport Ui from 'store/ui'\nimport Contents from 'store/contents'\nimport storeBlobs, { Store as Blobs } from 'store/blobs'\nimport JSZip from \"jszip\"\n\nimport 'template/mimetype'\nimport getTemplateContainerXml from 'template/container.xml'\nimport getTemplatePageXhtml from 'template/page.xhtml'\nimport getTemplateFixedLayoutJpCss from 'template/fixed-layout-jp.css'\nimport getTemplateStandardOpf from 'template/standard.opf'\nimport getTemplateNavigationDocumentsXhtml from 'template/navigation-documents.xhtml'\n\nconst htmlToEscape = (str: string): string => {\n  // eslint-disable-next-line no-control-regex\n  const reg = /\"|&|'|\\\\!|<|>|[\\x00-\\x20]|[\\x7F-\\xFF]|[\\u0100-\\u2700]/g\n\n  return str.replace(reg, ($0) => {\n    let c: any = $0.charCodeAt(0)\n    let r = ['&#']\n\n    c = (c === 0x20) ? 0xA0 : c\n    r.push(c)\n    r.push(';')\n    return r.join('')\n  })\n}\n\nconst getNumberStr = (num: number, zeroCount: number): string => {\n  let str = String(num)\n  let i = zeroCount - str.length\n  while (i-- > 0) {\n    str = '0' + str\n  }\n  return str\n}\n\nclass Store {\n  @observable ui: Ui\n  @observable book: Book\n  @observable contents: Contents\n  @observable blobs: Blobs\n\n  constructor() {\n    this.ui = new Ui()\n    this.book = new Book()\n    this.contents = new Contents()\n    this.blobs = storeBlobs\n\n    makeAutoObservable(this)\n  }\n\n  @action\n  importPageFromImages(fileList: File[]) {\n    const uuids = fileList.map(() => uuid())\n\n    this.book.pushNewPage(uuids)\n    this.blobs.push(fileList, uuids)\n  }\n\n  @action\n  replacePageIndex(index: number, targetIndex: number) {\n    this.book.switchIndex(index, index > targetIndex ? targetIndex : targetIndex + 1)\n    this.ui.selectPageIndex(targetIndex)\n\n    const newIndexMap: Contents['indexMap'] = {}\n    const list = toJS(this.contents.list)\n\n    this.book.pages.forEach((pageItem, index) => {\n      if (pageItem.index in this.contents.indexMap) {\n        const listIndex = this.contents.indexMap[pageItem.index]\n        newIndexMap[index] = listIndex\n        list[listIndex].pageIndex = index\n      }\n    })\n\n    this.contents.updateList(list)\n    this.book.updatePageItemIndex()\n  }\n\n  @action\n  async splitPage(index: number) {\n    const pageItem = this.book.pages[index]\n    const blobItem = this.blobs.blobs[pageItem.blobID]\n    const uuids = [uuid(), uuid()]\n    const mime = blobItem.blob.type\n\n    const w1 = blobItem.originImage.width >> 1\n    const w2 = blobItem.originImage.width - w1\n\n    const canvas1 = document.createElement('canvas')\n    const canvas2 = document.createElement('canvas')\n\n    canvas1.width = w1\n    canvas1.height = blobItem.originImage.height\n\n    canvas2.width = w2\n    canvas2.height = blobItem.originImage.height\n\n    const ctx1 = canvas1.getContext('2d')\n    const ctx2 = canvas2.getContext('2d')\n\n    ctx1?.drawImage(blobItem.originImage, 0, 0)\n    ctx2?.drawImage(blobItem.originImage, 0 - w1, 0)\n\n    const blobs = await Promise.all([\n      new Promise<Blob>((resolve, reject) =>\n        canvas1.toBlob(\n          (blob) => blob ? resolve(blob) : reject(),\n          mime, 1\n        )\n      ),\n      new Promise<Blob>((resolve, reject) =>\n        canvas2.toBlob(\n          (blob) => blob ? resolve(blob) : reject(),\n          mime, 1\n        )\n      ),\n    ])\n\n    this.book.splitPage(index, uuids)\n    this.book.updatePageItemIndex()\n    this.blobs.push(blobs, this.book.pageDirection === 'left' ? uuids : uuids.reverse())\n\n    const list = toJS(this.contents.list)\n    list.forEach(contentItem => {\n      if (contentItem.pageIndex === null) {\n        return\n      }\n      if (contentItem.pageIndex > index) {\n        contentItem.pageIndex++\n      }\n    })\n\n    this.contents.updateList(list)\n  }\n\n  @action\n  insertBlankPage(index: number) {\n    this.book.insertBlankPage(index)\n    this.book.updatePageItemIndex()\n\n    const selectedPageIndex = this.ui.selectedPageIndex\n    if (selectedPageIndex && (selectedPageIndex >= index)) {\n      this.ui.selectPageIndex(selectedPageIndex + 1)\n    }\n\n    const list = toJS(this.contents.list)\n    list.forEach(contentItem => {\n      if (contentItem.pageIndex === null) {\n        return\n      }\n      if (contentItem.pageIndex > index) {\n        contentItem.pageIndex++\n      }\n    })\n\n    this.contents.updateList(list)\n  }\n\n  @action\n  removePage(index: number) {\n    this.book.removePage(index)\n    this.ui.selectPageIndex(null)\n\n    const list = toJS(this.contents.list)\n    list.forEach((contentItem) => {\n      if (contentItem.pageIndex === null) {\n        return\n      }\n      if (contentItem.pageIndex === index) {\n        contentItem.pageIndex = null\n        return\n      }\n      if (contentItem.pageIndex > index) {\n        contentItem.pageIndex--\n      }\n    })\n\n    this.contents.updateList(list)\n  }\n\n  @action\n  generateBook() {\n    let templateContainerXml = getTemplateContainerXml()\n    let templatePageXhtml = getTemplatePageXhtml()\n    let templateFixedLayoutJpCss = getTemplateFixedLayoutJpCss()\n    let templateStandardOpf = getTemplateStandardOpf()\n    let templateNavigationDocumentsXhtml = getTemplateNavigationDocumentsXhtml()\n\n    const Zip = new JSZip()\n\n    Zip.folder('META-INF')\n    Zip.folder('OEBPS/image')\n    Zip.folder('OEBPS/text')\n    Zip.folder('OEBPS/style')\n\n    templateNavigationDocumentsXhtml = templateNavigationDocumentsXhtml.replace(\n      '<!-- navigation-list -->',\n      Object.keys(this.contents.indexMap).map((pageIndex) => {\n        const listIndex = this.contents.indexMap[pageIndex]\n        const contentItem = this.contents.list[listIndex]\n        const title = htmlToEscape(contentItem.title)\n  \n        if (pageIndex === '0') {\n          return `<li><a href=\"text/p_cover.xhtml\">${title}</a></li>`\n        }\n  \n        return `<li><a href=\"text/p_${getNumberStr(+pageIndex - 1, 4)}.xhtml\">${title}</a></li>`\n      }).join('\\n')\n    )\n\n    let imageItemStr: string[] = []\n    let pageItemStr: string[] = []\n    let itemRefStr: string[] = []\n    let spread = this.book.pageDirection\n\n    this.book.pages.forEach((pageItem, i) => {\n      const numStr = i === 0 ? 'cover' : getNumberStr(i - 1, 4)\n      const imageFileName = (i === 0 ? '' : 'i_') + numStr\n\n      if (pageItem.blank) {\n        pageItemStr.push(`<item id=\"p_${numStr}\" href=\"text/p_${numStr}.xhtml\" media-type=\"application/xhtml+xml\" properties=\"svg\"></item>`)\n      } else {\n        const mimeType = this.blobs.blobs[pageItem.blobID].blob.type // image/xxxxx\n        pageItemStr.push(`<item id=\"p_${numStr}\" href=\"text/p_${numStr}.xhtml\" media-type=\"application/xhtml+xml\" properties=\"svg\" fallback=\"${imageFileName}\"></item>`)\n        imageItemStr.push(`<item id=\"${imageFileName}\" href=\"image/${imageFileName}.${mimeType.slice(6)}\" media-type=\"${mimeType}\"${i === 0 ? ' properties=\"cover-image\"' : ''}></item>`)\n      }\n\n      if (i !== 0) {\n        itemRefStr.push(`<itemref linear=\"yes\" idref=\"p_${numStr}\" properties=\"page-spread-${spread}\"></itemref>`)\n        spread = spread === 'left' ? 'right' : 'left'\n      }\n    })\n\n    const viewPortWidth = this.book.pageSize[0] + ''\n    const viewPortHeight = this.book.pageSize[1] + ''\n    const fitMode = this.book.pageFit\n    const bookTitle = htmlToEscape(this.book.bookTitle.trim())\n\n    this.book.pages.forEach((pageItem, i) => {\n      const numStr = i === 0 ? 'cover' : getNumberStr(i - 1, 4)\n\n      if (pageItem.blank) {\n        Zip.file(\n          `OEBPS/text/p_${numStr}.xhtml`,\n          templatePageXhtml\n            .replace('{{title}}', bookTitle)\n            .replace(new RegExp('{{width}}', 'gm'), viewPortWidth)\n            .replace(new RegExp('{{height}}', 'gm'), viewPortHeight)\n            .replace('{{image}}', '')\n        )\n        return\n      }\n\n      const blob = this.blobs.blobs[pageItem.blobID].blob\n      const mimeType = blob.type.slice(6)\n      const imageFileName = (i === 0 ? '' : 'i_') + numStr + '.' + mimeType\n\n      let par = 'none'\n      if (fitMode !== 'stretch') {\n        par = this.book.pagePosition === 'center'\n          ? 'xMidYMid '\n          : this.book.pageDirection === 'left'\n            ? (i + 1) % 2 === 1 ? 'xMaxYMid' : 'xMinYMid'\n            : (i + 1) % 2 === 1 ? 'xMinYMid' : 'xMaxYMid'\n    \n        if (fitMode === 'fit') {\n          par += 'meet'\n        } else { // props.imageFit === 'fill'\n          par += 'slice'\n        }\n      }\n\n      Zip.file(\n        `OEBPS/text/p_${numStr}.xhtml`,\n        templatePageXhtml\n          .replace('{{title}}', bookTitle)\n          .replace(new RegExp('{{width}}', 'gm'), viewPortWidth)\n          .replace(new RegExp('{{height}}', 'gm'), viewPortHeight)\n          .replace('{{image}}', `<image width=\"100%\" height=\"100%\" preserveAspectRatio=\"${par}\" xlink:href=\"../image/${imageFileName}\" />`)\n      )\n\n      Zip.file(`OEBPS/image/${imageFileName}`, blob)\n    })\n\n    let authorsStr = this.book.bookAuthors.map((name, i) => {\n      return [\n        `<dc:creator id=\"creator${i + 1}\">${htmlToEscape(name)}</dc:creator>`,\n        `<meta refines=\"#creator${i + 1}\" property=\"role\" scheme=\"marc:relators\">aut</meta>`,\n        `<meta refines=\"#creator${i + 1}\" property=\"file-as\"></meta>`,\n        `<meta refines=\"#creator${i + 1}\" property=\"display-seq\">${i + 1}</meta>`\n      ].join('\\n')\n    }).join('\\n')\n\n    templateStandardOpf = templateStandardOpf\n      .replace('{{uuid}}', this.book.bookID)\n      .replace('{{title}}', bookTitle)\n      .replace('<!-- creator-list -->', authorsStr)\n      .replace('{{subject}}', htmlToEscape(this.book.bookSubject))\n      .replace('{{publisher}}', htmlToEscape(this.book.bookPublisher))\n      .replace('{{spread}}', this.book.pageShow === 'one' ? 'none' : 'landscape')\n      .replace('{{createTime}}', new Date().toISOString())\n      .replace('<!-- item-image -->', imageItemStr.join('\\n'))\n      .replace('<!-- item-xhtml -->', pageItemStr.join('\\n'))\n      .replace('<!-- itemref-xhtml -->', itemRefStr.join('\\n'))\n      .replace('{{direction}}', this.book.pageDirection === 'right' ? ' page-progression-direction=\"rtl\"' : '')\n\n    // console.log(templateStandardOpf)\n    Zip.file('mimetype', 'application/epub+zip')\n    Zip.file('META-INF/container.xml', templateContainerXml)\n    Zip.file('OEBPS/style/fixed-layout-jp.css', templateFixedLayoutJpCss)\n    Zip.file('OEBPS/navigation-documents.xhtml', templateNavigationDocumentsXhtml)\n    Zip.file('OEBPS/standard.opf', templateStandardOpf)\n\n    Zip.generateAsync({\n      type: 'blob',\n      mimeType: 'application/epub+zip'\n    }).then(blob => {\n      const anchor = document.createElement('a')\n      const objectURL = window.URL.createObjectURL(blob)\n      anchor.download = this.book.bookTitle.trim() + '.epub'\n      anchor.href = objectURL\n      anchor.click()\n      window.URL.revokeObjectURL(objectURL)\n    })\n  }\n}\n\nconst store = new Store()\n\nexport default store","import JSZip from 'jszip'\nimport { observer } from 'mobx-react'\nimport React, { useCallback, useLayoutEffect, useRef, useState } from 'react'\nimport Icon from 'components/icon'\nimport storeMain from 'store/main'\n// import storeBlobs from 'store/blobs'\n\ntype SupportType = 'image' | 'zip' | 'epub'\n\nconst PageControl = observer(function(props: { pageIndex: number | null }) {\n  const onUseImageSizeToPage = useCallback(() => {\n    const pageItem = storeMain.book.pages[props.pageIndex as number]\n    const image = storeMain.blobs.blobs[pageItem.blobID].originImage\n    storeMain.book.updateBookPageProperty('pageSize', [\n      image.width,\n      image.height\n    ])\n  }, [props.pageIndex])\n\n  const onChangePageIndex = useCallback(() => {\n    const max = storeMain.book.pages.length\n    const inputValue = window.prompt(`new page index (1 - ${max}):`)\n    let num = parseInt(inputValue || '')\n    \n    if (isNaN(num) || num < 1) {\n      return\n    } else if (num > max) {\n      num = max\n    }\n\n    storeMain.replacePageIndex(props.pageIndex as number, num - 1)\n  }, [props.pageIndex])\n\n  const onSetContentq = useCallback((e: React.MouseEvent<HTMLSpanElement>) => {\n    storeMain.contents.setPageIndexToTitle(\n      +(e.currentTarget.dataset.index as string),\n      props.pageIndex as number\n    )\n  }, [props.pageIndex])\n\n  const onSplitPage = useCallback(() => {\n    storeMain.splitPage(props.pageIndex as number)\n  }, [props.pageIndex])\n\n  const onRemovePage = useCallback(() => {\n    const res = window.confirm(`remove page index ${props.pageIndex as number + 1}?`)\n    res && storeMain.removePage(props.pageIndex as number)\n  }, [props.pageIndex])\n\n  if (props.pageIndex === null) {\n    return (\n      <>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"ruler\"/></button>\n        </div>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"menu\"/></button>\n        </div>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"bookmark\"/></button>\n        </div>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"scissors\"/></button>\n        </div>\n        <div className=\"nav-item\">\n          <button type=\"button\" className=\"btn btn-outline-secondary disabled\" disabled><Icon name=\"cross\"/></button>\n        </div>\n      </>\n    )\n  }\n\n  const blankPage = storeMain.book.pages[props.pageIndex].blank\n\n  return (\n    <>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-secondary\" disabled={blankPage} onClick={onUseImageSizeToPage}>\n            <Icon name=\"ruler\"/>\n          </button>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-secondary\" onClick={onChangePageIndex}>\n            <Icon name=\"menu\"/>\n          </button>\n      </div>\n      <div className=\"nav-item dropdown\">\n        <button type=\"button\" className=\"btn btn-secondary\"><Icon name=\"bookmark\"/></button>\n        <ul className=\"dropdown-menu\" style={{top: 0,left:'100%'}}>\n          {\n            storeMain.contents.list.map((contentItem, index) =>\n              <li key={index}>\n                <span\n                  className={\"dropdown-item\" + (contentItem.pageIndex === props.pageIndex ? ' active' : '')}\n                  data-index={index}\n                  onClick={onSetContentq}\n                >\n                  {contentItem.title}\n                </span>\n              </li>\n            )\n          }\n        </ul>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-secondary\" disabled={blankPage} onClick={onSplitPage}>\n          <Icon name=\"scissors\"/>\n        </button>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-secondary\" onClick={onRemovePage}>\n          <Icon name=\"cross\"/>\n        </button>\n      </div>\n    </>\n  )\n})\n\nconst AcceptMap = {\n  image: 'image/jpeg,image/png,image/webp',\n  zip: 'application/zip',\n  epub: 'application/epub+zip',\n}\n\nconst MultipleAttrMap = {\n  image: true,\n  zip: false,\n  epub: false,\n}\n\nconst blobToFile = (theBlob: Blob, fileName:string): File => {\n  var b: any = theBlob\n  //A Blob() is almost a File() - it's just missing the two properties below which we will add\n  b.lastModifiedDate = new Date()\n  b.name = fileName\n\n  //Cast to a File() type\n  return theBlob as File\n}\n\nconst Header = function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n  const inputRef = useRef<HTMLInputElement>(null)\n  const [inputType, setInputType] = useState<SupportType>('zip') // 修改这个可以改默认格式\n\n  const onClickToggleBookVisible = useCallback(() => {\n    store.toggleBookVisible()\n  }, [store])\n  const onClickToggleContentVisible = useCallback(() => {\n    store.toggleContentVisible()\n  }, [store])\n  const onClickTogglePageVisible = useCallback(() => {\n    store.togglePageVisible()\n  }, [store])\n\n  const onClickImport = useCallback((e: React.MouseEvent<HTMLInputElement>) => {\n    const newType = e.currentTarget.dataset.type as SupportType\n\n    if (newType === inputType) {\n      inputRef.current?.click()\n    } else {\n      setInputType(newType)\n    }\n  }, [inputType])\n\n  const handleGetFile = useCallback(async () => {\n    const input: HTMLInputElement = inputRef.current as HTMLInputElement\n\n    // TODO\n    // if (inputType === 'epub') {\n    //   console.log(input.files?.[0])\n    //   return\n    // }\n\n    if (inputType === 'zip' && (input?.files?.[0])) {\n      const fileName = input.files[0].name \n      JSZip.loadAsync(input.files[0]).then(zipContent => {\n        const promises: Promise<File | null>[] = Object.values(zipContent.files).map(zipItem => {\n          if (zipItem.dir) {\n            return Promise.resolve(null)\n          }\n\n          return new Promise(resolve => {\n            zipItem.async('uint8array').then(uint8Array => {\n              // 检查 MIME type 的方法参考自：\n              // https://stackoverflow.com/questions/18299806/how-to-check-file-mime-type-with-javascript-before-upload\n              const header = Array.from(new Uint8Array(uint8Array).subarray(0, 4)).map(item => item.toString(16)).join('')\n              let mimeType = null\n  \n              switch (header) {\n                case '89504e47':\n                  mimeType = 'image/png'\n                  break\n                case '52494646':\n                  mimeType = 'image/webp'\n                  break\n                case 'ffd8ffe0':\n                case 'ffd8ffe1':\n                case 'ffd8ffe2':\n                case 'ffd8ffe3':\n                case 'ffd8ffe8':\n                  mimeType = 'image/jpeg'\n                  break\n                default:\n                  break\n              }\n\n              if (mimeType) {\n                const b = new Blob([uint8Array], { type: mimeType })\n                resolve(\n                  blobToFile(\n                    b,\n                    zipItem.name.replace(/^.+\\/(.+)$/, '$1')\n                  )\n                )\n              } else {\n                resolve(null)\n              }\n            })\n          })\n        })\n\n        return Promise.all(promises) as Promise<File[]>\n      }).then((files: (File | null)[]) => {\n        storeMain.importPageFromImages(files.filter(b => b !== null) as File[])\n        if (storeMain.ui.firstImport) {\n          storeMain.ui.toggleAnalyzeVisible(fileName)\n        }\n      })\n      return\n    }\n\n    // inputType === jpg png webp\n    storeMain.importPageFromImages(Array.from(input.files as FileList))\n  }, [inputType])\n\n  const onClickInsertBlankPage = useCallback(() => {\n    const max = storeMain.book.pages.length\n    const inputValue = window.prompt(`page index (1 - ${max}):`)\n    let num = parseInt(inputValue || '')\n    \n    if (isNaN(num) || num < 1) {\n      return\n    } else if (num > max) {\n      num = max\n    }\n\n    storeMain.insertBlankPage(num - 1)\n  }, [])\n\n  const onClickGenerate = useCallback(() => {\n    storeMain.generateBook()\n  }, [])\n\n  useLayoutEffect(() => {\n    setTimeout(() => {\n      inputRef.current?.click()\n    }, 0)\n  }, [inputType])\n\n  return (\n    <nav id=\"nav\" className=\"navbar bg-dark\">\n      <div className=\"nav-item dropdown\">\n        <button type=\"button\" className=\"btn btn-primary\">\n          <Icon name=\"upload\"/>\n        </button>\n        <ul className=\"dropdown-menu\" style={{top: 0,left:'100%'}}>\n          <li><span className=\"dropdown-item\" data-type=\"image\" onClick={onClickImport}>image</span></li>\n          <li><span className=\"dropdown-item\" data-type=\"zip\" onClick={onClickImport}>zip</span></li>\n          <li><span className=\"dropdown-item\" data-type=\"epub\" onClick={onClickImport}>epub</span></li>\n        </ul>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-primary\" onClick={onClickToggleBookVisible}><Icon name=\"book\"/></button>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-primary\" onClick={onClickToggleContentVisible}><Icon name=\"list\"/></button>\n      </div>\n      <div className=\"nav-item\">\n        <button type=\"button\" className=\"btn btn-primary\" onClick={onClickTogglePageVisible}><Icon name=\"tools\"/></button>\n      </div>\n      <div className=\"nav-item\">\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          disabled={storeMain.book.pages.length === 0}\n          onClick={onClickInsertBlankPage}\n        >\n          <Icon name=\"notification\"/>\n        </button>\n      </div>\n      <div className=\"nav-item\">\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          disabled={storeMain.book.pages.length === 0}\n          onClick={onClickGenerate}\n        >\n          <Icon name=\"install\"/>\n        </button>\n      </div>\n      <PageControl pageIndex={store.selectedPageIndex}/>\n      <input\n        key={inputType}\n        id=\"input-upload\"\n        ref={inputRef}\n        type=\"file\"\n        value=\"\"\n        accept={AcceptMap[inputType]}\n        multiple={MultipleAttrMap[inputType]}\n        onChange={handleGetFile}\n        style={{display:\"none\"}}\n      />\n    </nav>\n  )\n}\n\nexport default observer(Header)","import { observer } from 'mobx-react'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { useMount } from 'react-use'\nimport storeMain from 'store/main'\nimport storeBlobs, { StoreBlobs } from 'store/blobs'\nimport Icon from './icon'\n\nconst PageCard = observer(function(props: {\n  pageItemIndex: number | null\n  blobItem?: StoreBlobs.ImageBlob | null\n  pagePosition: 'center' | 'left' | 'right'\n  blank: boolean\n}) {\n  const storeUI = React.useContext(React.createContext(storeMain.ui))\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n  const storeContent = React.useContext(React.createContext(storeMain.contents))\n\n  const onClickImage = useCallback(() => {\n    storeMain.ui.selectPageIndex(props.pageItemIndex)\n  }, [props.pageItemIndex])\n\n  if (props.pageItemIndex === null) {\n    return (\n      <div className=\"card\"><div className=\"card-image\"></div></div>\n    )\n  }\n\n  let preserveAspectRatio = 'none'\n\n  if (storeBook.pageFit !== 'stretch') {\n    preserveAspectRatio = props.pagePosition === 'center'\n      ? 'xMidYMid '\n      : props.pagePosition === 'left'\n        ? 'xMinYMid '\n        : 'xMaxYMid '\n\n    if (storeBook.pageFit === 'fit') {\n      preserveAspectRatio += 'meet'\n    } else { // props.imageFit === 'fill'\n      preserveAspectRatio += 'slice'\n    }\n  }\n\n  const imageFocus = props.pageItemIndex !== null && (storeUI.selectedPageIndex === props.pageItemIndex)\n\n  return (\n    <div className=\"card\">\n      {\n        props.pageItemIndex in storeContent.indexMap\n          ? <Icon name=\"bookmark\"></Icon>\n          : null\n      }\n      {\n        (props.blobItem || (!props.blobItem && props.blank)) ? (\n          <svg\n            className=\"card-image\"\n            viewBox={'0 0 ' + storeBook.pageSize.join(' ')} onClick={onClickImage}\n          >\n            <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill={storeBook.pageBackgroundColor === 'white' ? '#fff' : '#000'}/>\n            {\n              props.blobItem ? (\n                <image\n                  width=\"100%\"\n                  height=\"100%\"\n                  preserveAspectRatio={preserveAspectRatio}\n                  xlinkHref={props.blobItem.thumbnailURL}\n                />\n              ) : null\n            }\n            {\n              !imageFocus ? null :\n                <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"none\" stroke=\"rgba(49,132,253,.5)\" strokeWidth=\"8%\"/>\n            }\n          </svg>\n        ) : (\n          <div className=\"card-image\">\n            <div className=\"spinner-border text-primary\" role=\"status\"></div>\n          </div>\n        )\n      }\n      {\n        props.pageItemIndex === null\n          ? null\n          : <div className=\"page-num\">{props.pageItemIndex + 1}</div>\n      }\n    </div>\n  )\n})\n\nconst DoublePageCard = observer(function(props: {\n  pages: [number | null, number | null]\n}) {\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n\n  const leftSidePageIndex = storeBook.pageDirection === 'right' ? props.pages[1] : props.pages[0]\n  const rightSidePageIndex = storeBook.pageDirection === 'right' ? props.pages[0] : props.pages[1]\n  const leftSidePage = leftSidePageIndex === null ? null : storeBook.pages[leftSidePageIndex]\n  const rightSidePage = rightSidePageIndex === null ? null : storeBook.pages[rightSidePageIndex]\n\n  return (\n    <div className=\"card-group\">\n      <PageCard\n        pageItemIndex={leftSidePageIndex}\n        blobItem={leftSidePage ? storeBlobs.blobs[leftSidePage.blobID] : null}\n        pagePosition={storeBook.pagePosition === 'between' ? 'left' : 'center'}\n        blank={leftSidePage?.blank || false}\n      />\n      <PageCard\n        pageItemIndex={rightSidePageIndex}\n        blobItem={rightSidePage ? storeBlobs.blobs[rightSidePage.blobID] : null}\n        pagePosition={storeBook.pagePosition === 'between' ? 'right' : 'center'}\n        blank={rightSidePage?.blank || false}\n      />\n    </div>\n  )\n})\n\nconst computedStyle = getComputedStyle(document.documentElement)\nconst CARD_BOX_WIDTH = +computedStyle.getPropertyValue('--card-box-width').slice(0, -2)\nconst CARD_BOX_MARGIN = +computedStyle.getPropertyValue('--card-box-margin').slice(0, -2)\n\nconst Main = function() {\n  const mainRef = useRef<HTMLElement>(null)\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n  // const storeUI = React.useContext(React.createContext(storeMain.ui))\n  const [showPages, setShowPages] = useState<[any, any][][]>([])\n  // const [maxCardBoxCountInOneRow, setMaxCardBoxCountInOneRow] = useState(0)\n\n  const pageResizeCallback = useCallback(() => {\n    const pageWidth = mainRef.current?.clientWidth\n    if (!pageWidth) {\n      return\n    }\n\n    const boxCountInOneRow = Math.floor(pageWidth / (CARD_BOX_WIDTH + CARD_BOX_MARGIN * 2))\n    const rowCount = Math.ceil((1 + storeBook.pages.length) / boxCountInOneRow / 2)\n\n    // if (maxCardBoxCountInOneRow === boxCountInOneRow) {\n    //   return\n    // }\n\n    if (storeBook.pages.length === 0) {\n      // setMaxCardBoxCountInOneRow(boxCountInOneRow)\n      setShowPages([])\n      return\n    }\n\n    let i = 0\n    let j = 0\n    let x = -1\n\n    const pages: [any, any][][] = []\n    const len = storeBook.pages.length\n\n    while(i++ < rowCount) {\n      const r: [any, any][] = []\n      while(j++ < boxCountInOneRow) {\n        r.push([\n          x === -1 ? null : ++x < len ? x : null,\n          ++x < len ? x : null\n        ])\n      }\n      j = 0\n      pages.push(storeBook.pageDirection === 'right' ? r.reverse() : r)\n    }\n\n    // setMaxCardBoxCountInOneRow(boxCountInOneRow)\n    setShowPages(pages)\n  }, [storeBook.pageDirection, storeBook.pages])\n\n  const onClickImport = useCallback(() => {\n    document.getElementById('input-upload')?.click()\n  }, [])\n\n  useEffect(() => {\n    pageResizeCallback()\n  }, [storeBook.pages, pageResizeCallback])\n\n  useMount(() => {\n    pageResizeCallback()\n    // TODO: 需要throttle优化\n    window.addEventListener('resize', pageResizeCallback)\n  })\n\n  return (\n    <main id=\"main\" className=\"pt-4 pb-4\" ref={mainRef}>\n      {\n        showPages.length === 0 ? (\n          process.env.NODE_ENV === 'production'\n            ? <div className=\"btn btn-secondary main-input-upload\" onClick={onClickImport}>Import</div>\n            : <div className=\"alert alert-secondary text-center\" role=\"alert\">ready 🚀</div>\n        ) : (\n          showPages.map((row, i) => (\n            <div key={i} className=\"row page-row justify-content-evenly\">\n              {\n                row.map((pages, j) => (<DoublePageCard key={`${i}-${j}-${pages[0]}-${pages[1]}`} pages={pages}/>))\n              }\n            </div>\n          ))\n        )\n      }\n    </main>\n  )\n}\n\nexport default observer(Main)","import React, { FormEvent, useCallback, useEffect, useState } from 'react'\nimport storeMain from 'store/main'\nimport { observer } from 'mobx-react'\nimport { toJS } from 'mobx'\nimport deepClone from 'utils/deep-clone'\nimport Icon from 'components/icon'\n\nimport 'components/modal/index.css'\n\nconst PAGE_SIZE: { [name: string]: () => [number, number] } = {\n  'B4': () => [250, 353],\n  'B5': () => [176, 250],\n  'A4': () => [210, 297],\n  'A5': () => [148, 210],\n  'CG 16:9': () => [160, 90],\n  'CG 16:10': () => [160, 100],\n}\n\nconst KeywordPicker = function(props: { keywords: string[], onClick: (str: string) => void }) {\n  const onClick = useCallback((e: FormEvent<HTMLButtonElement>) => {\n    const index = e.currentTarget.dataset.index as string\n\n    props.onClick(props.keywords[+index])\n  }, [props])\n\n  return (\n    <>\n      {\n        props.keywords.map((str, index) =>\n          <button\n            type=\"button\"\n            key={index}\n            data-index={index}\n            className=\"btn btn-outline-primary btn-sm mr-1\"\n            onClick={onClick}\n          >{str}</button>\n        )\n      }\n    </>\n  )\n}\n\nconst ModalAnalyzeFileName = observer(function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n  const [fileName, setFileName] = useState('')\n\n  const [formTitle, setFormTitle] = useState('')\n  const [formAuthors, setFormAuthors] = useState('')\n  const [formPublisher, setFormPublisher] = useState('')\n  const [keywords, setKeywords] = useState<string[]>([])\n\n  const onClickModal = useCallback((e) => {\n    e.stopPropagation()\n    return\n  }, [])\n\n  const onClickClose = useCallback(() => {\n    store.toggleAnalyzeVisible()\n  }, [store])\n\n  const onChangeFormTitle = useCallback((e: FormEvent<HTMLInputElement> | string) => {\n    setFormTitle(typeof e === 'string' ? e : e.currentTarget.value)\n  }, [])\n  const onChangeFormAuthors = useCallback((e: FormEvent<HTMLInputElement> | string) => {\n    setFormAuthors(typeof e === 'string' ? e : e.currentTarget.value)\n  }, [])\n  const onChangeFormPublisher = useCallback((e: FormEvent<HTMLInputElement> | string) => {\n    setFormPublisher(typeof e === 'string' ? e : e.currentTarget.value)\n  }, [])\n\n  const onClickSave = useCallback(() => {\n    storeMain.book.updateBookPageProperty('bookTitle', formTitle)\n    storeMain.book.updateBookPageProperty('bookAuthors', [formAuthors])\n    storeMain.book.updateBookPageProperty('bookPublisher', formPublisher)\n    onClickClose()\n  }, [formAuthors, formPublisher, formTitle, onClickClose])\n\n  useEffect(() => {\n    const reg = [\n      /\\[.*?\\(.*\\)\\]/, // [xxx(xxx)]\n      /\\[.*?\\]\\s?\\[.*?\\]/, // [xxx][xxx]\n      /\\[.*?\\]/, // [xxx]\n      /\\(.*?\\)/, // (xxx)\n      /\\([^[\\]()]*?\\)|\\[[^[\\]()]*?\\]/g,\n    ]\n\n    let suffix0 = reg[0].exec(fileName)\n    let suffix1 = reg[1].exec(fileName)\n    let suffix2 = reg[2].exec(fileName)\n    let suffix3 = reg[3].exec(fileName)\n\n    if (suffix0) {\n      let suffix = suffix0[0]\n      let author = Array.from(suffix.match(/\\(.*?\\)/g) || []).pop()\n      const i = fileName.indexOf(suffix[0])\n      const titleAndPrefix = fileName.slice(i === 0 ? suffix.length : i + suffix.length).trim()\n\n      setFormTitle(titleAndPrefix)\n      setFormAuthors(author?.slice(1, -1)?.trim() || '')\n      setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n      return\n    }\n\n    if (suffix1) {\n      let suffix = suffix1[0]\n      let author = Array.from(suffix.match(/\\[.*?\\]/g) || []).pop()\n      const i = fileName.indexOf(suffix[0])\n      const titleAndPrefix = fileName.slice(i === 0 ? suffix.length : i + suffix.length).trim()\n\n      setFormTitle(titleAndPrefix)\n      setFormAuthors(author?.slice(1, -1)?.trim() || '')\n      setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n      return\n    }\n\n    if (suffix2) {\n      let suffix = suffix2[0]\n      let author = suffix.slice(1, -1)\n      const i = fileName.indexOf(suffix[0])\n      const titleAndPrefix = fileName.slice(i === 0 ? suffix.length : i + suffix.length).trim()\n\n      setFormTitle(titleAndPrefix)\n      setFormAuthors(author)\n      setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n      return\n    }\n\n    if (suffix3) {\n      let suffix = suffix3[0]\n      let author = suffix.slice(1, -1)\n      const i = fileName.indexOf(suffix[0])\n      const titleAndPrefix = fileName.slice(i === 0 ? suffix.length : i + suffix.length).trim()\n\n      setFormTitle(titleAndPrefix)\n      setFormAuthors(author)\n      setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n      return\n    }\n\n    setFormTitle(fileName)\n    setKeywords(Array.from(fileName.match(reg[4]) || []).map(str => str.slice(1, -1)))\n  }, [fileName])\n\n  useEffect(() => {\n    if (store.modalAnalyzeVisible) {\n      setFileName(store.fileName.split('.').slice(0, -1).join(''))\n    }\n  }, [store.fileName, store.modalAnalyzeVisible])\n\n  return (\n    <div className=\"modal-dialog modal-lg\" onClick={onClickModal}>\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">analyze</h5>\n          <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" onClick={onClickClose}></button>\n        </div>\n        <div className=\"modal-body\">\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-page-progression direction\" className=\"col-2 col-form-label text-end\">file name</label>\n            <div className=\"col-10\">\n              <input type=\"text\" className=\"form-control\" value={fileName} disabled/>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-page-progression direction\" className=\"col-2 col-form-label text-end\">title</label>\n            <div className=\"col-10\">\n              <input type=\"text\" className=\"form-control\" value={formTitle} onChange={onChangeFormTitle}/>\n              <div className=\"mt-3\"><KeywordPicker keywords={keywords} onClick={onChangeFormTitle}/></div>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-page-progression direction\" className=\"col-2 col-form-label text-end\">authors</label>\n            <div className=\"col-10\">\n              <input type=\"text\" className=\"form-control\" value={formAuthors} onChange={onChangeFormAuthors}/>\n              <div className=\"mt-3\"><KeywordPicker keywords={keywords} onClick={onChangeFormAuthors}/></div>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-page-progression direction\" className=\"col-2 col-form-label text-end\">publisher</label>\n            <div className=\"col-10\">\n              <input type=\"text\" className=\"form-control\" value={formPublisher} onChange={onChangeFormPublisher}/>\n              <div className=\"mt-3\"><KeywordPicker keywords={keywords} onClick={onChangeFormPublisher}/></div>\n            </div>\n          </div>\n        </div>\n        <div className=\"modal-footer\">\n          <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\" onClick={onClickClose}>later</button>\n          <button type=\"button\" className=\"btn btn-primary\" onClick={onClickSave}>Save changes</button>\n        </div>\n      </div>\n    </div>\n  )\n})\n\nconst ModalBook = observer(function() {\n  const storeUI = React.useContext(React.createContext(storeMain.ui))\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n\n  const onClickModal = useCallback((e) => {\n    e.stopPropagation()\n    return\n  }, [])\n\n  const onClickClose = useCallback(() => {\n    storeUI.toggleBookVisible()\n  }, [storeUI])\n\n  const onChangeBookID = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    storeBook.updateBookPageProperty('bookID', eventTarget.value)\n  }, [storeBook])\n  const onChangeBookTitle = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    storeBook.updateBookPageProperty('bookTitle', eventTarget.value)\n  }, [storeBook])\n  const onAddAuthor = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    const index = eventTarget.dataset.index as string\n    const newValue = [...toJS(storeBook.bookAuthors)]\n    newValue.splice(+index, 1, newValue[+index], '')\n    storeBook.updateBookPageProperty('bookAuthors', newValue)\n  }, [storeBook])\n  const onRemoveAuthor = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    const index = eventTarget.dataset.index as string\n    const newValue = [...toJS(storeBook.bookAuthors)]\n    newValue.splice(+index, 1)\n    storeBook.updateBookPageProperty('bookAuthors', newValue)\n  }, [storeBook])\n  const onChangeBookAuthors = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    const index = eventTarget.dataset.index as string\n    const newValue = [...toJS(storeBook.bookAuthors)]\n    newValue.splice(+index, 1, eventTarget.value)\n    storeBook.updateBookPageProperty('bookAuthors', newValue)\n  }, [storeBook])\n  const onChangeBookSubject = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    storeBook.updateBookPageProperty('bookSubject', eventTarget.value)\n  }, [storeBook])\n  const onChangeBookPublisher = useCallback((e: FormEvent) => {\n    const eventTarget = e.currentTarget as HTMLInputElement\n    storeBook.updateBookPageProperty('bookPublisher', eventTarget.value)\n  }, [storeBook])\n\n  return (\n    <div className=\"modal-dialog modal-md\" onClick={onClickModal}>\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">Book</h5>\n          <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" onClick={onClickClose}></button>\n        </div>\n        <div className=\"modal-body\">\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-id\" className=\"col-sm-2 col-form-label\">id</label>\n            <div className=\"col-sm-10\">\n              <input type=\"text\" className=\"form-control\" id=\"input-book-id\" value={storeBook.bookID} onInput={onChangeBookID}/>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-title\" className=\"col-sm-2 col-form-label\">title</label>\n            <div className=\"col-sm-10\">\n              <input type=\"text\" className=\"form-control\" id=\"input-book-title\" value={storeBook.bookTitle} onInput={onChangeBookTitle}/>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-author\" className=\"col-sm-2 col-form-label\">author</label>\n            <div className=\"col-sm-10\">\n              {\n                storeBook.bookAuthors.map((name: string, index: number) => (\n                  <div key={index} className={\"input-group\" + ((index + 1) === storeBook.bookAuthors.length ? '' : ' mb-3')}>\n                    <input type=\"text\" className=\"form-control\" data-index={index} value={name} onInput={onChangeBookAuthors}/>\n                    <button\n                      className=\"btn btn-outline-secondary d-flex justify-content-center align-items-center\"\n                      type=\"button\"\n                      data-index={index}\n                      onClick={onAddAuthor}\n                    >\n                      <Icon name=\"plus\"></Icon>\n                    </button>\n                    <button\n                      className=\"btn btn-outline-secondary d-flex justify-content-center align-items-center\"\n                      type=\"button\"\n                      data-index={index}\n                      disabled={storeBook.bookAuthors.length === 1}\n                      onClick={onRemoveAuthor}\n                    >\n                      <Icon name=\"minus\"></Icon>\n                    </button>\n                  </div>\n                ))\n              }\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-subject\" className=\"col-sm-2 col-form-label\">subject</label>\n            <div className=\"col-sm-10\">\n              <input type=\"text\" className=\"form-control\" list=\"dl-publisher\" id=\"input-book-subject\" value={storeBook.bookSubject} onInput={onChangeBookSubject}/>\n              <datalist id=\"dl-publisher\">\n                <option value=\"KADOKAWA\" />\n                <option value=\"講談社\" />\n                <option value=\"集英社\" />\n                <option value=\"小学館\" />\n                <option value=\"小学館集英社プロダクション\" />\n                <option value=\"少年画報社\" />\n                <option value=\"松文館\" />\n                <option value=\"日本文芸社\" />\n                <option value=\"白泉社\" />\n                <option value=\"芳文社\" />\n                <option value=\"ワニマガジン社\" />\n                <option value=\"FAKKU\" />\n              </datalist>\n            </div>\n          </div>\n          <div className=\"mb-3 row\">\n            <label htmlFor=\"input-book-publisher\" className=\"col-sm-2 col-form-label\">publisher</label>\n            <div className=\"col-sm-10\">\n              <input type=\"text\" className=\"form-control\" list=\"dl-subject\" id=\"input-book-publisher\" value={storeBook.bookPublisher} onInput={onChangeBookPublisher}/>\n              <datalist id=\"dl-subject\">\n                <option value=\"少年\" />\n                <option value=\"少女\" />\n                <option value=\"青年\" />\n                <option value=\"同人誌\" />\n                <option value=\"漫画\" />\n                <option value=\"成年コミック\" />\n              </datalist>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n})\n\nconst ModalContents = function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n  const [plainMode, setPlainMode] = useState(false)\n  const [tempList, setTempList] = useState<typeof storeMain.contents.list>([])\n  const [textAreaInput, setTextAreaInput] = useState('')\n  const maxIndex = tempList.length - 1\n\n  const onClickModal = useCallback((e) => {\n    e.stopPropagation()\n    return\n  }, [])\n\n  const onClickClose = useCallback(() => {\n    store.toggleContentVisible()\n  }, [store])\n\n  const togglePlainMode = useCallback(() => {\n    if (plainMode) {\n      const list: typeof storeMain.contents.list = []\n      const items = textAreaInput.split('\\n')\n      items.forEach(item => {\n        const [pageIndex, ...title] = item.split('. ')\n\n        if (!isNaN(pageIndex as any) && title.length) {\n          list.push({\n            pageIndex: Math.abs(+pageIndex - 1),\n            title: title.join('')\n          })\n        } else {\n          list.push({\n            pageIndex: 998,\n            title: pageIndex\n          })\n        }\n      })\n\n      setTempList(list)\n    } else {\n      let value = tempList.map(contentItem => {\n        return ((contentItem.pageIndex || 0) + 1) + '. ' + contentItem.title\n      }).join('\\n')\n\n      setTextAreaInput(value)\n    }\n\n    setPlainMode(!plainMode)\n  }, [tempList, plainMode, textAreaInput])\n\n  const onInputPageIndex = useCallback((e: FormEvent<HTMLInputElement>) => {\n    const listIndex = +(e.currentTarget.dataset.index as string)\n    const value = e.currentTarget.value as string\n    const newList = deepClone(tempList) as typeof storeMain.contents.list\n    const item = newList[listIndex]\n    item.pageIndex = (+value - 1) || 0\n    setTempList(newList)\n  }, [tempList])\n\n  const onInputTitle = useCallback((e: FormEvent<HTMLInputElement>) => {\n    const listIndex = +(e.currentTarget.dataset.index as string)\n    const value = e.currentTarget.value as string\n    const newList = deepClone(tempList) as typeof storeMain.contents.list\n    const item = newList[listIndex]\n    item.title = value\n    setTempList(newList)\n  }, [tempList])\n\n  const onClickAdd = useCallback((e: FormEvent<HTMLButtonElement>) => {\n    const listIndex = +(e.currentTarget.dataset.index as string)\n    const list = deepClone(tempList) as typeof storeMain.contents.list\n    const item = list[listIndex]\n    list.splice(listIndex, 1, item, {\n      pageIndex: 0,\n      title: ''\n    })\n    setTempList(list)\n  }, [tempList])\n\n  const onClickRemove = useCallback((e: FormEvent<HTMLButtonElement>) => {\n    const listIndex = +(e.currentTarget.dataset.index as string)\n    const list = deepClone(tempList) as typeof storeMain.contents.list\n    list.splice(listIndex, 1)\n    setTempList(list)\n  }, [tempList])\n\n  const onSortList = useCallback(() => {\n    const list = deepClone(tempList) as typeof storeMain.contents.list\n\n    list.sort((a, b) => {\n      if (isNaN(a.pageIndex as number)) {\n        return 1\n      }\n      if (isNaN(b.pageIndex as number)) {\n        return 1\n      }\n      return (a.pageIndex as number) - (b.pageIndex as number)\n    })\n\n    setTempList(list)\n  }, [tempList])\n\n  const onFocusNumberInput = useCallback((e: FormEvent<HTMLInputElement>) => {\n    e.currentTarget.select()\n  }, [])\n\n  const onTextareaInput = useCallback((e: FormEvent<HTMLTextAreaElement>) => {\n    setTextAreaInput(e.currentTarget.value)\n  }, [])\n\n  const onSave = useCallback(() => {\n    storeMain.contents.updateList(tempList)\n    store.toggleContentVisible()\n  }, [store, tempList])\n\n  useEffect(() => {\n    if (store.modalContentVisible) {\n      setTempList(deepClone(toJS(storeMain.contents.list)))\n    }\n  }, [store.modalContentVisible])\n\n  return (\n    <div className=\"modal-dialog modal-lg\" onClick={onClickModal}>\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">Content</h5>\n          <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" onClick={onClickClose}></button>\n        </div>\n        <div className=\"modal-body\">\n          {\n            plainMode ? (\n              <textarea\n                cols={30}\n                rows={10}\n                placeholder=\"eg: \\n 1. cover \\n 2. xxxx \\n 3.xxxx\"\n                className=\"form-control\"\n                style={{resize: 'none'}}\n                value={textAreaInput}\n                onInput={onTextareaInput}\n              />\n            ) : (\n              <>\n                <div className=\"row mb-2\">\n                  <div className=\"col-2\">\n                    <h6>index</h6>\n                  </div>\n                  <div className=\"col-6\">\n                    <h6>title</h6>\n                  </div>\n                  <div className=\"col-auto\"></div>\n                </div>\n                {\n                  tempList.map((contentItem, index) => (\n                    <div className={'row mb-' + (index === maxIndex ? '2' : '4')} key={index}>\n                      <div className=\"col-2\">\n                        <input\n                          type=\"number\"\n                          className=\"form-control\"\n                          data-index={index}\n                          value={(contentItem.pageIndex || 0) + 1}\n                          onFocus={onFocusNumberInput}\n                          onInput={onInputPageIndex}\n                        />\n                      </div>\n                      <div className=\"col-8\">\n                        <input type=\"text\" className=\"form-control\" data-index={index} value={contentItem.title} onInput={onInputTitle}/>\n                      </div>\n                      <div className=\"col-auto\">\n                        <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                          <button type=\"button\" className=\"btn btn btn-secondary d-flex justify-content-center align-items-center\" data-index={index} onClick={onClickAdd}>\n                            <Icon name=\"plus\"></Icon>\n                          </button>\n                          <button type=\"button\" className=\"btn btn btn-secondary d-flex justify-content-center align-items-center\" data-index={index} onClick={onClickRemove}>\n                            <Icon name=\"minus\"></Icon>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                }\n              </>\n            )\n          }\n        </div>\n        <div className=\"modal-footer justify-content-start\">\n          <button type=\"button\" className=\"btn btn-outline-primary\" onClick={togglePlainMode}>\n            {plainMode ? 'form mode' : 'plain text mode'}\n          </button>\n          <button type=\"button\" disabled={plainMode} className=\"btn btn-outline-primary me-auto\" onClick={onSortList}>\n            sort\n          </button>\n          <button type=\"button\" disabled={plainMode} className=\"btn btn-primary\" onClick={onSave}>\n            Save\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst ButtonRadio = function(props: { value: any; current: any; label: string; onClick: (val: any) => void }) {\n  const onClick = useCallback(() => {\n    props.onClick(props.value)\n  }, [props])\n\n  const className = props.value === props.current\n    ? 'btn btn-sm btn-primary me-2'\n    : 'btn btn-sm btn-outline-primary me-2'\n\n  return (\n    <button\n      type=\"button\"\n      className={className}\n      onClick={onClick}\n    >{props.label}</button>\n  )\n}\n\nconst ModalPage = observer(function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n  const storeBook = React.useContext(React.createContext(storeMain.book))\n\n  const onClickModal = useCallback((e) => {\n    e.stopPropagation()\n    return\n  }, [])\n\n  const onClickClose = useCallback(() => {\n    store.togglePageVisible()\n  }, [store])\n\n  const onChangePageWidth = useCallback((e: FormEvent<HTMLInputElement>) => {\n    storeBook.updateBookPageProperty('pageSize', [\n      +e.currentTarget.value || 1,\n      storeBook.pageSize[1]\n    ])\n  }, [storeBook])\n  const onChangePageHeight = useCallback((e: FormEvent<HTMLInputElement>) => {\n    storeBook.updateBookPageProperty('pageSize', [\n      storeBook.pageSize[0],\n      +e.currentTarget.value || 1\n    ])\n  }, [storeBook])\n  const onSwitchPageSize = useCallback(() => {\n    storeBook.updateBookPageProperty('pageSize', [\n      storeBook.pageSize[1],\n      storeBook.pageSize[0]\n    ])\n  }, [storeBook])\n  const onChangeSizeWithDefaultValue = useCallback((key: string) => {\n    let func = PAGE_SIZE[key]\n    storeBook.updateBookPageProperty('pageSize', func())\n  }, [storeBook])\n  const onChangePagePosition = useCallback((value) => {\n    storeBook.updateBookPageProperty('pagePosition', value)\n  }, [storeBook])\n  const onChangePageShow = useCallback((value) => {\n    storeBook.updateBookPageProperty('pageShow', value)\n  }, [storeBook])\n  const onChangePageFit = useCallback((value) => {\n    storeBook.updateBookPageProperty('pageFit', value)\n  }, [storeBook])\n  // const onChangePageBackgroundColor = useCallback((value) => {\n  //   storeBook.updateBookPageProperty('pageBackgroundColor', value)\n  // }, [storeBook])\n  const onChangePageDirection = useCallback((value) => {\n    storeBook.updateBookPageProperty('pageDirection', value)\n  }, [storeBook])\n\n  return (\n    <div className=\"modal-dialog modal-md\" onClick={onClickModal}>\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">Page</h5>\n          <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" onClick={onClickClose}></button>\n        </div>\n        <div className=\"modal-body\">\n          <div className=\"mb-2 row\">\n            <label className=\"col-3 col-form-label text-end\">size</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <div className=\"row justify-content-between\">\n                <div className=\"col-5 d-flex align-items-center\">\n                  <div className=\"input-group input-group-sm\">\n                    <span className=\"input-group-text\">w</span>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      min=\"1\"\n                      max=\"9999\"\n                      value={storeBook.pageSize[0]}\n                      onInput={onChangePageWidth}\n                    />\n                  </div>\n                </div>\n                <div className=\"col-2 d-flex justify-content-center\">\n                  <button type=\"button\" className=\"btn btn-sm btn-secondary d-flex justify-content-center align-items-center\" onClick={onSwitchPageSize}>\n                    <Icon name=\"cycle\"/>\n                  </button>\n                </div>\n                <div className=\"col-5 d-flex align-items-center\">\n                  <div className=\"input-group input-group-sm\">\n                    <span className=\"input-group-text\">h</span>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      min=\"1\"\n                      max=\"9999\"\n                      value={storeBook.pageSize[1]}\n                      onInput={onChangePageHeight}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"mb-2 row\">\n            <div className=\"col-3\"></div>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current=\"x\" value=\"B4\" label=\"B4\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"B5\" label=\"B5\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"A4\" label=\"A4\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"A5\" label=\"A5\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"CG 16:9\" label=\"CG 16:9\" onClick={onChangeSizeWithDefaultValue}/>\n              <ButtonRadio current=\"x\" value=\"CG 16:10\" label=\"CG 16:10\" onClick={onChangeSizeWithDefaultValue}/>\n            </div>\n          </div>\n          <div className=\"mb-2 row\">\n            <label htmlFor=\"input-page-position\" className=\"col-3 col-form-label text-end\">position</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current={storeBook.pagePosition} value=\"center\" label=\"center\" onClick={onChangePagePosition} />\n              <ButtonRadio current={storeBook.pagePosition} value=\"between\" label=\"between\" onClick={onChangePagePosition} />\n            </div>\n          </div>\n          <div className=\"mb-2 row\">\n            <label className=\"col-3 col-form-label text-end\">show</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current={storeBook.pageShow} value=\"two\" label=\"two pages\" onClick={onChangePageShow} />\n              <ButtonRadio current={storeBook.pageShow} value=\"one\" label=\"one page\" onClick={onChangePageShow} />\n            </div>\n          </div>\n          <div className=\"mb-2 row\">\n            <label className=\"col-3 col-form-label text-end\">fit</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current={storeBook.pageFit} value=\"stretch\" label=\"stretch\" onClick={onChangePageFit} />\n              <ButtonRadio current={storeBook.pageFit} value=\"fit\" label=\"fit\" onClick={onChangePageFit} />\n              <ButtonRadio current={storeBook.pageFit} value=\"fill\" label=\"fill\" onClick={onChangePageFit} />\n            </div>\n          </div>\n          {\n            // <div className=\"mb-2 row\">\n            //   <label className=\"col-3 col-form-label text-end\">background</label>\n            //   <div className=\"col-9 d-flex align-items-center\">\n            //     <ButtonRadio current={storeBook.pageBackgroundColor} value=\"white\" label=\"white\" onClick={onChangePageBackgroundColor} />\n            //     <ButtonRadio current={storeBook.pageBackgroundColor} value=\"black\" label=\"black\" onClick={onChangePageBackgroundColor} />\n            //   </div>\n            // </div>\n          }\n          <div className=\"mb-2 row\">\n            <label className=\"col-3 col-form-label text-end\">direction</label>\n            <div className=\"col-9 d-flex align-items-center\">\n              <ButtonRadio current={storeBook.pageDirection} value=\"right\" label=\"right (japanese style)\" onClick={onChangePageDirection} />\n              <ButtonRadio current={storeBook.pageDirection} value=\"left\" label=\"left\" onClick={onChangePageDirection} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n})\n\nconst Modal = function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n\n  const modalVisible = store.modalAnalyzeVisible || store.modalBookVisible || store.modalContentVisible || store.modalPageVisible\n\n  return modalVisible ? (\n    <div id=\"modal\" className=\"modal fade show\" style={{display:'block'}}>\n      {\n        !store.modalAnalyzeVisible ? null : <ModalAnalyzeFileName />\n      }\n      {\n        !store.modalBookVisible ? null : <ModalBook />\n      }\n      {\n        !store.modalContentVisible ? null : <ModalContents />\n      }\n      {\n        !store.modalPageVisible ? null : <ModalPage />\n      }\n    </div>\n  ) : null\n}\n\nconst ModalBackDrop = observer(function() {\n  const store = React.useContext(React.createContext(storeMain.ui))\n  const modalVisible = store.modalAnalyzeVisible || store.modalBookVisible || store.modalContentVisible || store.modalPageVisible\n\n  return modalVisible\n    ? <div key=\"modal-backdrop\" className=\"modal-backdrop fade show\"/>\n    : null\n})\n\nexport { ModalBackDrop }\nexport default observer(Modal)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\nimport 'components/icon'\nimport './index.css'\n\nimport Header from 'components/header'\nimport Main from 'components/main'\nimport Modal, { ModalBackDrop } from 'components/modal'\n\nfunction renderComponent(reactComponent: React.ReactElement) {\n  const container = document.createElement('div')\n  const Portal = () => {\n    return ReactDOM.createPortal(reactComponent, document.body)\n  }\n  ReactDOM.render(<Portal/>, container)\n}\n\nrenderComponent(<Header />)\nrenderComponent(<Main />)\nrenderComponent(<Modal />)\nrenderComponent(<ModalBackDrop />)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}